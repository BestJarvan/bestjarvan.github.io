[{"title":"puppeteerç”Ÿæˆpdfå¡é¡¿è§£å†³æ–¹æ¡ˆ","url":"/2023/12/28/node/puppeteer-pdf/","content":"\n> æœ€è¿‘å…¬å¸çº¿ä¸Špdfç”Ÿæˆç¼“æ…¢ï¼Œç»å¸¸è¶…è¿‡30så¯¼è‡´è¯·æ±‚è¶…æ—¶æ–­å¼€ï¼Œé€šè¿‡æ’æŸ¥é—®é¢˜ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™æ¡issuesï¼Œå¯è§£å†³ç›®å‰é—®é¢˜\n\nchromiumå‡çº§åˆ°119ä¹‹åå¯¼è‡´åŸæœ¬20é¡µçš„pdfç”Ÿæˆè¶…çº§æ…¢ï¼Œé€šè¿‡æ‰“å°æ—¶é—´å‘ç°`puppeteer`çš„`page.pdf()`æ–¹æ³•è½¬æ¢htmlåˆ°pdfç”¨æ—¶è¾¾åˆ°20så·¦å³ï¼Œæ ¹æ®issuesä¿®æ”¹ç‰ˆæœ¬å·é™çº§åˆ°Chromium(117.0.5938.92)å¯¹ç…§puppeteerçš„21.3.2ç‰ˆæœ¬\n\n\n\né™çº§å`page.pdf`æ–¹æ³•ç”Ÿæˆ20é¡µpdfä»åŸæœ¬20sé™ä½åˆ°680msï¼Œæå‡å°†è¿‘30å€ï¼Œæ•´ä½“æ¥å£è¿”å›æ—¶é—´å¤§æ¦‚5så·¦å³\n\n\n\n- Issues: [#11494](https://github.com/puppeteer/puppeteer/issues/11494)\n\n- `puppeteer`å’Œ`chromium`å¯¹ç…§è¡¨: [support](https://pptr.dev/chromium-support)\n\n- ä¾èµ–å¯¹ç…§è¡¨(æç¤ºç¼ºå°‘ä¾èµ–å¯ä»¥å¯¹æ¯”å®‰è£…): [Chrome doesn't launch on Linux](https://pptr.dev/troubleshooting#chrome-doesnt-launch-on-linux)\n\n- ä¸­æ–‡ä¹±ç : éœ€è¦è‡ªè¡Œä¸‹è½½å­—ä½“åº“\n``` shell\n# åœ¨å­—ä½“æ–‡ä»¶ç›®å½•å®‰è£…å­—ä½“\nsudo mkfontscale\nsudo mkfontdir\nsudo fc-cache -fv\n```\n\n\n![#11494](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/image-20231228174532723.png)\n\n","tags":["nodejs","puppeteer"],"categories":["node"]},{"title":"Serve-Send Events(SSE) + Visibility APIé¡¹ç›®ä¸­åº”ç”¨","url":"/2023/12/10/js/sse/","content":"\n>æœ€è¿‘æ”¶åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åšä¸€å¥—æ¶ˆæ¯ä¸­å¿ƒï¼Œéœ€æ±‚å€’æ˜¯å¾ˆç®€å•ï¼Œå†ç”¨æˆ·æœ‰æ–°æ¶ˆæ¯æ—¶æ¨é€ç»™webé¡µé¢ï¼Œæç¤ºç”¨æˆ·æœ‰æ–°æ¶ˆæ¯æœªè¯»ï¼Œæœ€åˆç‰ˆæœ¬ç”¨çŸ­è½®è¯¢æ–¹æ¡ˆå®ç°ï¼Œè‹¥æ˜¯å±€éƒ¨ç»„ä»¶ï¼Œå¯å…³é—­é¡µé¢åç»“æŸè½®è¯¢ï¼Œä½†æ˜¯æ­¤æ¶ˆæ¯ä¸­å¿ƒæ˜¯ä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œåªè¦å¼€å¯é¡µé¢å°±å¼€å§‹è½®è¯¢ï¼Œä½“éªŒä¸ä½³ï¼Œçœ‹ç€networkå¯†å¯†éº»éº»çš„è¯·æ±‚å¤´éƒ½å¤§äº†ï¼Œéšä½¿ç”¨SSEæ–¹æ¡ˆã€‚\n\n### å¯¹äºè¿™ç§æ¶ˆæ¯æ¨é€ç›®å‰å‡ ä¸ªæˆç†Ÿæ–¹æ¡ˆï¼š\n\n1. å®¢æˆ·ç«¯è½®è¯¢ (çŸ­è½®è¯¢)\n2. æœåŠ¡ç«¯è½®è¯¢ (é•¿è½®è¯¢)\n3. WebSocket\n4. SSE (Serve-Send Events)\n\n<!-- more -->\n\n![çŸ­è½®è¯¢](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/WX20231205-151930.png)\n\n### å„æ–¹æ¡ˆé—´åŒºåˆ«ï¼š\n\n|*|å®¢æˆ·ç«¯è½®è¯¢|æœåŠ¡ç«¯è½®è¯¢|WebSocket|SSE|\n|--|--|--|--|--|\n|åè®®|http|http|tcp|http|\n|ä¼˜ç‚¹|å®ç°æ–¹ä¾¿ï¼Œå…¼å®¹æ€§å¥½|åŒçŸ­è½®è¯¢ï¼Œä½†æ¯”çŸ­è½®è¯¢èŠ‚çº¦èµ„æºï¼Œç›¸å¯¹çŸ­è½®è¯¢è¯·æ±‚æ¬¡æ•°å°‘|åŒå…¨å·¥é€šä¿¡åè®®ï¼Œæ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒå°ï¼Œå¯åŒå‘é€šä¿¡|H5è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œæ— éœ€å®‰è£…ç›´æ¥ä½¿ç”¨ï¼›èµ„æºå ç”¨å°ï¼›å‰ç«¯éƒ¨åˆ†å®ç°æå…¶ç®€å•|\n|ç¼ºç‚¹|å ç”¨è¾ƒå¤šå†…å­˜å’Œè¯·æ±‚æ•°ï¼›æ±¡æŸ“networkåˆ—è¡¨|åŒçŸ­è½®è¯¢|å¼€å‘æˆæœ¬é«˜ï¼›ç›¸å¯¹sseèµ„æºå¼€é”€å¤§|å•å‘æ¨é€ï¼›å…¼å®¹æ€§é—®é¢˜ï¼›åªèƒ½getè¯·æ±‚ï¼Œä¸”è¯·æ±‚å¤´æ— æ³•åŠ å†…å®¹(æˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹å°è£…sseæ’ä»¶)|\n\n### SSEå…¼å®¹é—®é¢˜ï¼š\n\n![å…¼å®¹æµè§ˆå™¨](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/image-20231210170510078.png)\n\n### SSEå®ç°\n\n#### 1. å‰ç«¯å®ç° + visibilitychangeæ€§èƒ½ä¼˜åŒ–\n\nç»è¿‡æµ‹è¯•ç¯å¢ƒå‡ å¤©çš„è¿è¡Œå‘ç°äº†æ–°çš„é—®é¢˜ï¼Œå½“ç”¨æˆ·æŒ‚æœºæ—¶ï¼Œjsä»£ç ä¹Ÿåœ¨æ­£å¸¸çš„è·‘ï¼Œå¦‚æœç”¨æˆ·å¿˜è®°å…³é—­é¡µé¢ï¼Œä¸”ç”µè„‘ä»ä¸å…³æœºï¼Œå°±ä¼šå¯¼è‡´é¡µé¢è¯·æ±‚æ¯éš”ä¸€å°æ—¶å‘é€ä¸€æ¬¡ï¼Œå®é™…ç»å¤§éƒ¨åˆ†æŒ‚æœºæ—¶é—´ä¸éœ€è¦ç»´æŒæ­¤é“¾æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡`visibilitychange`äº‹ä»¶ä¼˜åŒ–æˆ‘ä»¬çš„æ¶ˆæ¯é€šçŸ¥\n\n![visible](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/image-20231212104513647.png)\n\né€šè¿‡mdnæ–‡æ¡£å¯çŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`visible`å’Œ`hidden`å»ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç \n\nä»¥ä¸‹ä»£ç ä¸ºæœ€æ–°ä»£ç ï¼Œå¸¦æµè§ˆå™¨é™çº§å¤„ç†\n\n```javascript\n// å¦‚æœæ–­å¼€é“¾æ¥15ç§’åé‡è¯•ï¼Œç½‘ç»œæ•…éšœã€æ¥å£æ•…éšœç­‰é‡è¿éœ€è¦\nconst RETRY_TIME = 15 * 1000\n// ç”Ÿå‘½å‘¨æœŸä¸­åˆå§‹åŒ–\nmounted() {\n  // åˆå§‹åŒ–æ’ä»¶\n  this.initNotify()\n  // æŒ‚è½½ç›‘å¬å™¨\n  this.initListener()\n},\n\nmethods: {\n  // ç”Ÿå‘½å‘¨æœŸä¸­åˆå§‹åŒ–æ­¤æ’ä»¶\n  initNotify() {\n    if ('EventSource' in window) {\n      // ç¬¬ä¸€æ¬¡åˆ·æ–°æ¶ˆæ¯æ•°\n      this.getUnReadNoticeCount()\n      // æ³¨å†Œsse\n      this.registerEvent()\n    } else {\n      // ä¸å…¼å®¹èµ°çŸ­è½®è¯¢\n      clearTimeout(this.timer)\n      this.loopFetch()\n    }\n  },\n  // æ³¨å†Œç›‘å¬å™¨\n  initListener() {\n    document.addEventListener('visibilitychange', this.listeningChange)\n  },\n  // ç›‘å¬å›è°ƒäº‹ä»¶\n  listeningChange() {\n    if (document.visibilityState === 'hidden') {\n      // ä¸å¯è§æ¸…ç©ºæ‰€æœ‰å®šæ—¶å™¨\n      this.clearAllTimer()\n    } else if (this.eventSource) {\n      if (this.eventSource.readyState === 2) {\n        // å˜ä¸ºå¯è§æ—¶ï¼Œä¸”sseå·²æ–­å¼€ï¼Œåˆ™é‡æ–°è¿æ¥\n        this.registerEvent()\n      }\n    } else {\n      // é™çº§å¤„ç†\n      this.loopFetch()\n    }\n  },\n  // æ³¨å†Œäº‹ä»¶\n  registerEvent() {\n    if (document.visibilityState === 'visible') {\n      const now = new Date().getTime()\n      if (!this.sourceTime || (now - this.sourceTime) >= RETRY_TIME) {\n        this.sourceTime = new Date().getTime()\n        const user = getUserInfo()\n        const userId = user ? JSON.parse(user).userId : ''\n        // notifyNumUrl = 'https://xxxx/message-center/sse/create?userId='+id;\n        this.eventSource = new EventSource(notifyNumUrl(userId))\n        console.log('eventSource: ', this.eventSource);\n        // é“¾æ¥æˆåŠŸå›è°ƒ\n        this.eventSource.onopen = () => {\n          clearTimeout(this.errorTimer)\n        }\n        // æŒç»­æ¥å—æ¶ˆæ¯\n        this.eventSource.onmessage = ({ data }) => {\n          if (data) {\n            this.noticeNum = data\n          }\n        }\n        // å¤±è´¥å›è°ƒ\n        this.eventSource.onerror = (error) => {\n          if (error.currentTarget.readyState === 2) {\n            this.eventSource.close && this.eventSource.close()\n            this.registerEvent()\n          }\n        }\n      } else {\n        this.errorTimer = setTimeout(() => {\n          this.registerEvent()\n        }, RETRY_TIME)\n      }\n    }\n  },\n  // é™çº§å¤„ç†ï¼Œé€’å½’è½®è¯¢æ¥å£\n  loopFetch() {\n    this.getUnReadNoticeCount()\n    this.timer = setTimeout(() => {\n      this.loopFetch()\n    }, 1000 * 30)\n  },\n  // è¯·æ±‚å¤„ç†\n  getUnReadNoticeCount() {\n    // apiè¯·æ±‚\n  },\n  // é¡µé¢é”€æ¯æ—¶æ¸…é™¤å®šæ—¶å™¨\n \tclearAllTimer() {\n    if (this.eventSource) {\n      clearTimeout(this.errorTimer)\n    } else {\n      clearTimeout(this.timer)\n    }\n  },\n},\n\n// é¡µé¢é”€æ¯æ—¶æ¸…é™¤å®šæ—¶å™¨\nbeforeDestroy() {\n  document.removeEventListener('visibilitychange', this.listeningChange)\n  this.clearAllTimer()\n  this.eventSource && this.eventSource.close && this.eventSource.close()\n},\n```\n\n\n\n#### 2. åç«¯å®ç° JAVA Spring Web MVC\n\n```java\n@RestController\n@RequestMapping(\"/sse\")\n@Api(tags = \"Sseæ¶ˆæ¯é€šçŸ¥\")\n@Slf4j\npublic class SseController extends BaseController {\n    @Resource\n    private SseService sseService;\n\n    /**\n     * åˆ›å»ºæ–°è¿æ¥\n     * @return\n     */\n    @GetMapping(\"/create\")\n    public Object createSession(String userId) throws IOException {\n        return sseService.createSession(userId);\n    }\n\n    /**\n     * å…³é—­è¿æ¥\n     * @return\n     */\n    @GetMapping(\"/close\")\n    public void closeSession(String userId) throws IOException {\n        sseService.closeSession(userId);\n    }\n}\n\n@DubboService\n@Service\n@Slf4j\npublic class SseServiceImpl implements SseService {\n\n    public final static Map<String, SseEmitter> SSE_CACHE= new ConcurrentHashMap<>();\n\n    public final static Map<String, Integer> SEND_RECORD= new ConcurrentHashMap<>();\n\n    /**\n     *  åˆ›å»ºè¿æ¥\n     * @return\n     */\n    public synchronized SseEmitter createSession(String clientId) throws IOException{\n        //éœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼ˆéæ­£å¸¸å…³é—­çš„æƒ…å†µä¸‹ä¼šä¸€ç›´ä¿ç•™åŸå…ˆçš„é€šé“é€ æˆæ¶ˆæ¯å‘é€å¤±è´¥ï¼‰\n        SEND_RECORD.remove(clientId);\n        // è¿‡æœŸæ—¶é—´è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ\n        SseEmitter sseEmitter = new SseEmitter(0L);\n        SSE_CACHE.put(clientId,sseEmitter);\n        log.info(\"å®¢æˆ·ç«¯ï¼š{}  æ–°å»ºè¿æ¥æˆåŠŸï¼Œå½“å‰å®¢æˆ·ç«¯æ€»æ•°ä¸ºã€{}ã€‘\",clientId,SSE_CACHE.size() );\n        return sseEmitter;\n    }\n\n    @Override\n    public void closeSession(String clientId) {\n        if (SSE_CACHE.containsKey(clientId)){\n            SSE_CACHE.get(clientId).complete();\n            SSE_CACHE.remove(clientId);\n            SEND_RECORD.remove(clientId);\n            log.info(\"å®¢æˆ·ç«¯ï¼šã€{}ã€‘ æ–­å¼€æˆåŠŸï¼Œå½“å‰å‰©ä½™å®¢æˆ·ç«¯æ€»æ•°ä¸ºã€{}ã€‘\",clientId,SSE_CACHE.size());\n        }\n    }\n}\n\n\n\n\n@XxlJob(\"sendUnRead\")\npublic void sendUnRead(){\n    if (SseServiceImpl.SSE_CACHE.size()>0){\n        List<UnReadNoticePO> unReadNoticePOS = noticeService.countAllUnReadNotice(new ArrayList<>(SseServiceImpl.SSE_CACHE.keySet()));\n        log.info(\"stringIntegerMap\",unReadNoticePOS);\n        if(CollectionUtil.isNotEmpty(unReadNoticePOS)){\n\n            for (Map.Entry<String, SseEmitter> entry : SseServiceImpl.SSE_CACHE.entrySet()) {\n                String key = entry.getKey();\n                Optional<UnReadNoticePO> first = unReadNoticePOS.stream().filter(u -> u.getUserId().equals(key)).findFirst();\n\n                if(first.isPresent()){\n                    log.info(\"first\",first.get());\n                    SseEmitter sseEmitter = SseServiceImpl.SSE_CACHE.get(key);\n                    try {\n                        Integer lastNum = SseServiceImpl.SEND_RECORD.get(first.get().getUserId());\n                        if(ObjectUtil.isEmpty(lastNum) || lastNum!=first.get().getNum()){\n                            sseEmitter.send(SseEmitter.event().reconnectTime(1000).id(entry.getKey()).data(first.get().getNum()));\n                            log.info(entry.getKey()+\"å‘é€æ¶ˆæ¯æˆåŠŸï¼Œå†…å®¹ï¼š{}\",first.get().getNum());\n                        }\n                        SseServiceImpl.SEND_RECORD.put(first.get().getUserId(),first.get().getNum());\n                    }catch (IOException e){\n                        //å‘é€å¤±è´¥ï¼Œç§»é™¤\n                        SseServiceImpl.SSE_CACHE.remove(entry.getKey());\n                        log.error(entry.getKey()+\"æ¶ˆæ¯å‘é€å¤±è´¥ï¼Œé€šé“å·²å…³é—­!\",e);\n\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\n#### 3. è¿ç»´\n\nè¿ç»´éœ€è¦é…åˆä¿®æ”¹`nginx`é…ç½®çš„`proxy-read-timeout`è¶…æ—¶æ—¶é—´ï¼Œç›®å‰æˆ‘ä»¬æ–¹æ¡ˆè¶…æ—¶æ—¶é—´ä¸€å°æ—¶ã€‚\n\n### æˆå“å±•ç¤º\n\næ­¤æ—¶åªä¿ç•™ä¸€æ¡httpè¯·æ±‚ï¼Œåç«¯è½®è¯¢åˆ°æ–°æ¶ˆæ¯å°±æ¨é€åˆ°å‰ç«¯ï¼Œè‹¥å‰ç«¯é¡µé¢ä¸æ˜¾ç¤ºæˆ–è¢«éšè—(é”å±åˆ‡æ ‡ç­¾ç­‰)åˆ™ä¸å»è¯·æ±‚ï¼Œè‹¥é¡µé¢æ˜¾ç¤ºåˆ™è‡ªåŠ¨æ¢å¤è¯·æ±‚ã€‚æ–¹ä¾¿å¿«æ·ï¼Œä½“éªŒæ›´å¥½\n\n![network](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/image-20231210173206861.png)\n\n\n\n","tags":["javascript","SSE"],"categories":["js"]},{"title":"Xbox Oneæ‰‹æŸ„æ”¹TypeCå°¾æ’","url":"/2023/09/20/notes/xbox-one/","content":"\næœ¬æ¬¡æ”¹è£…æŒ‰ç…§[Foundries](https://space.bilibili.com/57800164)å¤§ä½¬çš„æ•™ç¨‹æå¾—ï¼Œé™„å¸¦ä¸€äº›ä¸ªäººå¿ƒå¾—\n\n### å‡†å¤‡çš„å·¥å…·å’Œææ–™\n* è´´ç‰‡å¼Type C 16Pin æ¯å£\n* çƒ­é£æª(æ²¡æœ‰å¯ä»¥ç”¨æ‰“ç£¨ç¬”+ç”µçƒ™é“æ…¢æ…¢æ)\n* ç”µçƒ™é“ï¼Œç„Šé”¡ï¼ŒåŠ©ç„Šå‰‚\n* å…­è§’èºä¸åˆ€(T6ç”¨äºæ‹†ä¸»æ¿èºä¸ï¼Œå¤–å£³èºä¸éœ€è¦ä¸“ç”¨çš„é˜²ç›—èºä¸åˆ€æ‹†)\n* 30AWGè·³çº¿\n* æ‰“ç£¨ç¬”(æœ‰æ›´å¥½ï¼Œæ²¡ä¹Ÿè¡Œ)\n* é•Šå­\n* 5.1k ohmç”µé˜»*2(è§¦å‘PDå¿«å……éœ€è¦ï¼Œæœ€å¥½å‡†å¤‡0805ï¼Œ0603å„ä¸€é¢—)\n* 0.1mmæ¼†åŒ…çº¿\n* M1*2*1.5èºä¸ä¸¤é¢—(å¯é€‰ï¼Œä¸»è¦æ˜¯å›ºå®šå°¾æ’ç”¨)\n* ABæ ‘è„‚ç»“æ„èƒ¶(å¯é€‰)\n* å…‰å›ºåŒ–ç»¿æ²¹å’Œå›ºåŒ–ç¯\n* èšé…°äºšèƒºèƒ¶å¸¦\n* ä¸‡ç”¨è¡¨\n\n<!-- more -->\n\n\nå‡†å¤‡å¥½å·¥å…·åå¼€æï¼Œæœ€éš¾çš„ç¬¬ä¸€æ­¥ï¼Œtype cæ¯åº§æ”¹é€ \n\n### ä¸€ã€æ”¹é€ typecæ¯åº§\næŒ‰ç…§[Xboxæ‰‹æŸ„æ”¹Type Cæ¥å£](https://www.bilibili.com/read/cv22153887/?spm_id_from=333.999.collection.opus.click)ç„Šæ¥ï¼Œéš¾ç‚¹åœ¨äºç”µé˜»çš„ç„Šæ¥ï¼Œå¤ªå°äº†ï¼Œæ²¡æ”¾å¤§é•œå¾ˆè´¹çœ¼\n\n![æ‹”é™¤A4B9ï¼ŒB8ï¼ŒA8å¼•è„š](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201150656.png)\næ‹”é™¤A4B9ï¼ŒB8ï¼ŒA8å¼•è„š\n\nè¿™å‡ ä¸ªå¼•è„šæœ€å¥½æ‹”é™¤ï¼Œæ–¹ä¾¿ä¸ºåç»­ç„Šæ¥æä¾›ç©ºé—´\n\n![0805å’Œ0603ç”µé˜»ï¼Œé˜»å€¼5.1k](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201411213.jpeg)\n0805å’Œ0603ç”µé˜»ï¼Œé˜»å€¼5.1k\n\n![æ‹”é™¤å¼•è„šåç”¨èšé…°äºšèƒºèƒ¶å¸¦éš”çƒ­](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201416284.jpeg)\næ‹”é™¤å¼•è„šåç”¨èšé…°äºšèƒºèƒ¶å¸¦éš”çƒ­\n\n![IMG_6485](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201417443.jpeg)\n\n![IMG_6486](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201418882.JPG)\n\næ”¹é€ åçš„16pin typecæ¯åº§\n\nç„Šæ¥å®Œæˆåå¯ä»¥ç”¨ã€å®‰å…¨å……ç”µå¤šåŠŸèƒ½æ£€æµ‹ä»ªã€æµ‹ä¸€ä¸‹å……ç”µç”µå‹æœ‰æ²¡æœ‰5vï¼Œæ²¡æœ‰æ£€æµ‹ä»ªçš„è¯å¯ä»¥ç”¨ä¸‡ç”¨è¡¨æµ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å¼•è„šçŸ­æ¥ï¼Œå•¥éƒ½æ²¡å°±è‚‰çœ¼çœ‹ä¸‹ç¡®ä¿ç„Šé”¡æ²¡æœ‰çŸ­æ¥åˆ°å…¶ä»–å¼•è„š\n\n![222](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201418762.png)\n\næµ‹è¯•è¾“å…¥ç”µå‹5vï¼ŒæˆåŠŸè§¦å‘å¿«å……\n\n\n\næ²¡é—®é¢˜åç„Šæ¥è·³çº¿ï¼Œä¸ºåç»­ç„Šæ¥pcbåšå‡†å¤‡\n\n![IMG_6487](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201418730.jpeg)\n\nåƒä¸‡åˆ«è¿é”¡çŸ­æ¥ï¼Œåšå¥½ç»ç¼˜\n### äºŒã€PCBæ”¹é€ \n![WX20230920-141950@2x](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201420331.png)\n\nå¤„ç†æ—§çš„å°¾æ’ï¼Œæ­¤å¤„ä¸€å®šè¦å¤„ç†å¹³æ•´ï¼Œè¿™æ ·æ‰ç¾è§‚\n\n\n\n* æŠŠæ—§çš„å°¾æ’æ‹”é™¤ï¼Œè¿™é‡Œæˆ‘æ²¡æœ‰çƒ­é£æªï¼Œé€‰æ‹©äº†è›®åŠ›ï¼Œç›´æ¥æŠŠç„Šç›˜æ‹”æ‰äº†ï¼Œä¸è¿‡å½“æ—¶è„‘å­æŠ½ï¼Œæ²¡æœ‰æ‰“ç£¨å¹³æ•´ï¼Œå°±å¼€å§‹åç»­æ“ä½œäº†ï¼Œå¯¼è‡´è¿™é‡Œä¸å¹³æ•´ï¼Œtypecå°¾æ’ç¿˜èµ·æ¥ä¸€å°å—(ä¸å½±å“ä½¿ç”¨ï¼Œå°±æ˜¯ä¸ç¾è§‚äº†)\n* M1çš„èºä¸æ‹§å…¥åŸå°¾æ’çš„æ’æ§½å†…ï¼Œè¿™é‡ŒM1çš„èºä¸ä¸è¦é€‰æ‹©é“åˆ¶ï¼Œä¸åƒé”¡ï¼Œæœ€å¥½æ‹§è¿›å»å‰æ‰¾ä¸€é¢—å®éªŒä¸‹åƒä¸åƒé”¡ï¼Œä¸åƒçš„è¯å°½æ—©å¤„ç†ä¸‹è¿™ä¸¤ä¸ªèºä¸ï¼Œæ¯”å¦‚æ´å•çµæ¶‚ä¸€ä¸‹ä¾µèš€è¡¨é¢ï¼Œä¸ç„¶æ‹§ä¸Šå»å‘ç°ä¸åƒé”¡å°±å¾ˆå°´å°¬äº†\n\n### ä¸‰ã€é£çº¿ç„Šæ¥\n![WX20230920-142057@2x](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201421380.png)\n\n> D-å’ŒD+çº¿ç„Šæ¥åœ¨1å·ä½æ—¶ï¼Œèƒ½è·å¾—æœ€å¥½çš„ESDä¿æŠ¤ï¼Œä½†æ¯”è¾ƒéš¾ç„Šæ¥ã€‚2å·ä½æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æµ‹è¯•ç‚¹ï¼Œæ–¹ä¾¿ç„Šæ¥ï¼ˆå›¾ä¸­è¢«æˆ‘æµ‹è¯•æ—¶ï¼Œææ‰äº†ï¼‰ã€‚3å·ç‚¹æ˜¯æœ€åçš„é€‰æ‹©ã€‚\n> \n> å°†A7,B7é£çº¿åˆ°D-ä½ï¼ŒA6ï¼ŒB6é£çº¿åˆ°D+ä½ã€‚\n> \n> æœ€ä½³çš„é£çº¿æ–¹å¼æ˜¯B7ç„Šæ¥ä¸€æ ¹çŸ­çº¿åˆ°A7ï¼ŒB6ç„Šæ¥ä¸€æ ¹çŸ­çº¿åˆ°A6ã€‚A6, A7å†é£çº¿åˆ°PCBã€‚è¿™éœ€è¦ç†Ÿç»ƒçš„ç„Šæ¥èƒ½åŠ›ã€‚\n> \n> å·®ä¸€ç‚¹çš„æ–¹å¼æ˜¯A6, A7é£çº¿åˆ°PCBï¼Œç„¶åB6, B7é€šè¿‡é£çº¿ä¸­é€”æ¥å…¥A6ï¼ŒA7çš„é£çº¿ä¸Šã€‚\n> \n> æœ€å·®çš„ä¾¿æ˜¯4æ ¹çº¿ç›´æ¥é£çº¿åˆ°PCBä¸Šã€‚\n> \n> å¸ƒçº¿è¿‡ç¨‹ä¸­ï¼Œå°½é‡ä¿è¯ç­‰é•¿ï¼Œè´´è¿‘ï¼ï¼ï¼\n\nè¿™é‡Œæˆ‘é€‰æ‹©ç„Šæ¥åˆ°2å·ä½ï¼Œ2å·ä½ç½®ç„Šæ¥ç©ºé—´ç›¸å¯¹å¤§ä¸€äº›\n\n![IMG_6489 11.25.51](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201422315.jpeg)\n\nç„Šæ¥åæ¶‚ä¸€å±‚ç»¿æ²¹å›ºå®š\nè¿™é‡Œç»¿æ²¹æ¶‚å¤šäº†ï¼Œåé¢ç”¨åˆ·å­åˆ·è–„ï¼Œå¤ªåšä¸åˆ©äºå…‰ç…§å›ºåŒ–ï¼Œå¯ä»¥çœ‹åˆ°ç„Š2å·ä½æ“ä½œç©ºé—´æœ‰å¤šå¤§ï¼Œè¿™ä¹ˆä¸€å¤§å¨ç„Šé”¡ï¼Œæ‰‹æ®‹çš„æˆ‘ä¹Ÿèƒ½ç„Šä¸Š\n\n### å››ã€æ‰“ç£¨å¤–å£³\nå…ˆä¸Šå¤§ä½¬çš„å®Œç¾ä½œå“\n\n![33](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201424204.jpg)\n\n![44](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201422616.jpg)\n\nå¤§ä½¬ä½œå“\n\n![IMG_6506](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201423308.jpeg)\n\næˆ‘çš„ä¸‘ç…§\n\næ­¤å¤„å°±æ˜¯ç¬¬äºŒæ­¥pcbå¤„ç†æ—¶å€™ï¼Œæ—§çš„ç„Šç›˜æ²¡æœ‰å¤„ç†å¹³æ•´ï¼Œå¯¼è‡´typecå°¾æ’ä¸å¹³ï¼Œåé¢ç¿˜èµ·ä¸€ç‚¹ï¼Œæ²¡åŠæ³•é‡æ–°å¤„ç†ï¼Œåªèƒ½å¼ºè¡Œå‰ªå¼€å¤–å£³ï¼Œè®©cå£æ²¡æœ‰èƒ½æ­£å¸¸ä½¿ç”¨\n\nè¿™é‡Œæˆ‘å›ºå®šå°¾æ’ç¬¬ä¸€æ¬¡ç”¨äº†ç„Šé”¡ï¼Œæ‹”æ’å‡ æ¬¡åç„Šé”¡æ–­å¼€ï¼Œåé¢ç”¨äº†ABæ ‘è„‚ç»“æ„èƒ¶å›ºå®šï¼Œå›ºåŒ–æ—¶é—´å¤§æ¦‚5åˆ†é’Ÿåˆå§‹å›ºåŒ–åˆ°24å°æ—¶å›ºåŒ–å®Œå…¨ï¼Œè¿™æ¬¡å¾ˆç¨³ï¼Œæ‹”æ’ç¨³å®š\n\n![IMG_6507](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309201423403.jpeg)\n\nQC2.0\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè£…æœºå®Œæˆåæ’å…¥å……ç”µå¯ä»¥è§¦å‘QC2.0å¿«å……åè®®\n\nè‡³æ­¤ï¼Œæ”¹é€ å®Œæˆ","tags":["xbox","DIY"],"categories":["notes"]},{"title":"è§£å†³puppeteerä¾èµ–chromiumå†…æ ¸ä¸‹è½½å¤±è´¥é—®é¢˜","url":"/2023/09/19/node/puppeteer/","content":"\n1. æœ¬åœ°å¯ä½¿ç”¨ä»£ç†é­”æ³•ä¸Šç½‘å®‰è£…\n\n2. æœåŠ¡å™¨å®‰è£…\né…ç½®puppeteerç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å›½å†…é•œåƒæºä¸‹è½½\n\nps: v20.1.1(2023-05-05)ç‰ˆæœ¬æ›´æ–° PUPPETEER_DOWNLOAD_HOST ç¯å¢ƒå˜é‡æ”¹ä¸º PUPPETEER_DOWNLOAD_BASE_URL\n\n```shell\n# v20.1.1ä¹‹å‰ç‰ˆæœ¬\nnpm config set puppeteer_download_host=https://npmmirror.com/mirrors/\n# å¤‡ç”¨é•œåƒåœ°å€\nnpm config set puppeteer_download_host=\"https://cdn.npmmirror.com/binaries/\"\n\n# v20.1.1ä»¥åŠä¹‹åç‰ˆæœ¬\nnpm config set puppeteer_download_base_url=https://npmmirror.com/mirrors/\n# å¤‡ç”¨é•œåƒåœ°å€\nnpm config set puppeteer_download_base_url=https://cdn.npmmirror.com/binaries/chrome-for-testing/\n\n# ä¸éœ€è¦ä¸‹è½½åˆ™éœ€è¦è¡¥å……ç¯å¢ƒå˜é‡ï¼Œè·³è¿‡ä¸‹è½½å†…æ ¸æ­¥éª¤\nPUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n```\n","tags":["nodejs","puppeteer"],"categories":["node"]},{"title":"ä»é›¶æ­å»ºå‰ç«¯è„šæ‰‹æ¶CLIå·¥å…·","url":"/2023/09/05/node/myself-cli/","content":"\n#### ç›®å½•ç»“æ„\n\né¦–å…ˆä»é›¶æ­å»ºä¸€å¥—å‰ç«¯è„šæ‰‹æ¶éœ€è¦ç”¨åˆ°æœ€æ ¸å¿ƒçš„ä¸€ä¸ªåº“å°±æ˜¯[`commander`](https://github.com/tj/commander.js/blob/HEAD/Readme_zh-CN.md)\n\n![commanderjs](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309051127055.png)\n<!-- more -->\n\n[githubä»“åº“](https://github.com/BestJarvan/helper-cli)\nå®Œæ•´ç›®å½•\n\n```javascript\n.\nâ”œâ”€â”€ bin // è„šæœ¬è¯†åˆ«æ–‡ä»¶\nâ”‚   â””â”€â”€ helper-cli // è„šæœ¬\nâ”œâ”€â”€ lib // éœ€è¦çš„æ–¹æ³•ç­‰\nâ”‚   â”œâ”€â”€ deploy.js\nâ”‚   â”œâ”€â”€ init-token.js\nâ”‚   â””â”€â”€ logo.js\nâ”œâ”€â”€ package.json\nâ””â”€â”€ session // å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶\n    â””â”€â”€ token.json\n```\n\n\n\n#### ä¿®æ”¹packageæ–‡ä»¶\n\n `package.json`éœ€è¦é…ç½®`bin`å­—æ®µï¼ŒæŒ‡æ˜è„šæœ¬å…¥å£æ–‡ä»¶å’Œè„šæœ¬å‘½ä»¤çš„åç§°\n\n```json\n{\n  // ...\n\t\"bin\": {\n\t\t\"helper-cli\": \"./bin/helper-cli\"\n\t}\n  // ...\n}\n```\n\n\n\n#### helper-cliçš„å¼€å‘\n\n1. é¦–å…ˆéœ€è¦å£°æ˜è¿è¡Œç¯å¢ƒ `#!/usr/bin/env node` æŒ‡æ˜ä½¿ç”¨`node`è¿è¡Œæ­¤è„šæœ¬\n2. ä½¿ç”¨`program`æ³¨å†Œå‘½ä»¤åç§°å’Œè¯´æ˜ç­‰\n3. ä½¿ç”¨`action`è°ƒç”¨å‘½ä»¤çš„æ‰§è¡Œå‡½æ•°\n\n```javascript\n#!/usr/bin/env node\n\nconst { program } = require('commander')\nconst chalk = require('chalk')\nconst leven = require('leven')\nconst pkg = require('../package.json')\nconst logo = require('../lib/logo')\n\nprogram\n  .version(`${pkg.name}: ${pkg.version}`, '-v, --version')\n  .usage('<command> [options]')\n\nprogram\n  .command('jenkins')\n  .alias('jk')\n  .description('Init jenkins Token')\n  .action(() => {\n    logo()\n    require('../lib/init-token')()\n  })\n\nprogram\n  .command('deploy <name> [branch]')\n  .alias('dp')\n  .description('Deploy the project (<name>) to the test environment')\n  .action((name, branch) => {\n    logo()\n    require('../lib/deploy')(name, branch)\n  })\n\nprogram\n  .arguments('<command>')\n  .action((cmd) => {\n    program.outputHelp()\n    console.log(`  ` + chalk.red(`Unknown command ${chalk.yellow(cmd)}.`))\n    console.log()\n    suggestCommands(cmd)\n  })\n\nprogram.parse(process.argv)\n\nfunction suggestCommands (unknownCommand) {\n  const availableCommands = program.commands.map(cmd => cmd._name)\n\n  let suggestion\n\n  availableCommands.forEach(cmd => {\n    const isBestMatch = leven(cmd, unknownCommand) < leven(suggestion || '', unknownCommand)\n    if (leven(cmd, unknownCommand) < 3 && isBestMatch) {\n      suggestion = cmd\n    }\n  })\n\n  if (suggestion) {\n    console.log(`  ` + chalk.red(`Did you mean ${chalk.yellow(suggestion)}?`))\n  }\n}\n\n```\n\n#### libæ–‡ä»¶çš„å¼€å‘\n\n1. `init-token`æ–‡ä»¶ï¼Œä½¿ç”¨[`inquirer`](https://www.npmjs.com/package/inquirer)åº“å®Œæˆå‘½ä»¤è¡Œçš„æŒ‡ä»¤äº¤äº’\n\n```javascript\nconst chalk = require(\"chalk\")\nconst figlet = require(\"figlet\")\nconst path = require('path')\nconst fs = require('fs')\nconst { default: confirm } = require(\"@inquirer/confirm\")\nconst { default: input } = require('@inquirer/input')\n\n// å¯ä»¥é»˜è®¤ç»™åˆå§‹å€¼\nlet account = \"default\"\nlet token = \"defaultToken\"\n\nasync function initToken () {\n  const answer = await confirm({ message: 'åˆå§‹åŒ–æœ¬åœ°jenkinsé…ç½®, æ˜¯å¦ä½¿ç”¨é»˜è®¤é…ç½® ?', default: false });\n  if (!answer) {\n    account = await input({ message: 'jenkinsè´¦å·:' })\n    token = await input({ message: 'jenkinså¯†ç (token):' })\n  }\n  genTokenFile()\n}\n\nfunction genTokenFile () {\n  try {\n    fs.writeFileSync(path.join(__dirname, '../session', 'token.json'), `{ \"account\": \"${account}\", \"token\": \"${token}\" }`)\n    console.log('jenkinsé…ç½®åˆå§‹åŒ–å®Œæˆ')\n    console.log(\n      chalk.green(\n        figlet.textSync(\"SUCCESS\", {\n          font: \"Soft\",\n          horizontalLayout: \"default\",\n          verticalLayout: \"default\"\n        })\n      )\n    );\n  } catch (error) {\n    console.error('error: ', error);\n  }\n}\n\nmodule.exports = initToken\n```\n\n2. `deploy.js`å’Œç¬¬ä¸€ç‰ˆç›¸ä¼¼ï¼Œä¿®æ”¹è§¦å‘æ–¹æ³•\n\n```javascript\nconst Jenkins = require('jenkins')\nconst fs = require('fs')\nconst path = require('path')\nconst { exec } = require('child_process')\nconst package = require('../package.json')\n\nconst auth = {}\nlet jobName = ''\n\nlet jenkins\nlet branchName = 'test'\n\n// æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œbranchä¸ºå¯é€‰å‚æ•°ï¼Œé»˜è®¤test\nfunction deploy (name, branch) {\n  jobName = name\n  if (branch) {\n    branchName = branch\n    initJenkins()\n  } else {\n    getGitBranch()\n      .then(res => {\n        branchName = res\n        initJenkins()\n      })\n  }\n}\n\nasync function initJenkins() {\n  try {\n    const data = fs.readFileSync(path.join(__dirname, '../session', 'token.json'), 'utf8')\n    Object.assign(auth, JSON.parse(data))\n    try {\n      jenkins = new Jenkins({\n        baseUrl: `https://${auth.account}:${auth.token}@jenkins-test.xxx.com`,\n      })\n      triggerBuild()\n    } catch (error) {\n      console.log(error);\n      process.exit(0)\n    }\n  } catch (error) {\n    console.error(`é…ç½®æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œè¯·å…ˆè¿è¡Œ ${package.name} jk ç”Ÿæˆé…ç½®æ–‡ä»¶`)\n    process.exit(0)\n  }\n}\n\n\nfunction getGitBranch() {\n  return new Promise((resolve, reject) => {\n    exec('git rev-parse --abbrev-ref HEAD', (error, stdout, stderr) => {\n      if (error) {\n        console.error(`exec error: ${error}`)\n        reject()\n        return;\n      }\n      resolve(stdout.trim())\n    })\n  })\n}\n\nasync function triggerBuild() {\n  try {\n    const result = await jenkins.job.build({\n      name: jobName,\n      parameters: {\n        branch: branchName,\n        merge: true\n      },\n      token: auth.token\n    })\n    console.log('å‡†å¤‡æ„å»º...', result)\n    waitOnQueue(result)\n  } catch (error) {\n    console.error('error: ', error);\n  }\n}\n\nasync function waitOnQueue(id) {\n  const result = await jenkins.queue.item(id)\n  if (result.executable) {\n  console.log('å¼€å§‹æ„å»º: ', jobName);\n    setTimeout(() => {\n      logBuild(result.executable.number)\n    }, 500);\n  } else if (result.cancelled) {\n    console.log('æ„å»ºå·²å–æ¶ˆ')\n  } else {\n    setTimeout(() => {\n      waitOnQueue(id)\n    }, 500);\n  }\n}\n\nfunction logBuild(id) {\n  console.log('æ„å»ºä¸­...', id)\n  const log = jenkins.build.logStream(jobName, id);\n\n  log.on(\"data\", (text) => {\n    process.stdout.write(text);\n  });\n\n  log.on(\"error\", (err) => {\n    console.log(\"error\", err);\n  });\n\n  log.on(\"end\", () => {\n    console.log(\"success: æ„å»ºå®Œæˆ.\");\n  });\n}\n\nmodule.exports = deploy\n```\n\n#### `logo.js`å…¨å±€çš„logoè¾“å‡º\n\n```javascript\nconst chalk = require('chalk')\nconst figlet = require(\"figlet\")\n\nmodule.exports = () => {\n  console.log(\n    chalk.cyan(\n      figlet.textSync(\"Helper CLI\", {\n        font: \"Ghost\",\n        horizontalLayout: \"default\",\n        verticalLayout: \"default\",\n        width: 100\n      })\n    )\n  );\n}\n```\n\n![logo](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309051142236.png)\n\n\nå¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`npm link` æŠŠæˆ‘ä»¬å¼€å‘ä¸­çš„æŒ‡ä»¤å…³è”åˆ°å…¨å±€æŒ‡ä»¤ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å…¨å±€ä½¿ç”¨`helper-cli -h`æŸ¥çœ‹å¸®åŠ©\n\n![help](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202309051144103.png)\n\n\n\nå¼€å‘è°ƒè¯•å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒåˆ°npmå¸‚åœºï¼Œæˆ–è€…å…¬å¸å†…éƒ¨ç§æœ‰npmå¹³å°ï¼Œæä¾›ç»™é¡¹ç›®ä½¿ç”¨ï¼Œå¦‚æœéå…¨å±€å®‰è£…ï¼Œå¯ä»¥é…åˆé¡¹ç›®å†…çš„`.npmrc`æŒ‡å®šæœ¬CLIçš„å®‰è£…æº\n\n","tags":["javascript","nodejs","CLI"],"categories":["node"]},{"title":"é€šè¿‡nodeè°ƒç”¨Jenkins APIå®Œæˆæ„å»ºè¿‡ç¨‹","url":"/2023/08/28/node/node-jenkins/","content":"\n#### å‰è¨€\né¡¹ç›®ä¸­ä½¿ç”¨jenkinsæŒºä¹…äº†ï¼Œæ¯æ¬¡å‘å¸ƒæµ‹è¯•ç¯å¢ƒä»£ç éƒ½éœ€è¦æ‰‹åŠ¨å»jenkinsä¸Šå‘å¸ƒï¼Œç‰¹åˆ«éº»çƒ¦ï¼Œæƒ³åˆ°ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯é€šè¿‡CI/CDæŒç»­é›†æˆï¼Œä¸€ç§æ˜¯é€šè¿‡jenkins APIè°ƒç”¨é…åˆ¶å¥½çš„jobã€‚\n\n* ç¬¬ä¸€ç§æ–¹æ¡ˆéœ€è¦è§¦å‘ï¼Œè¿˜è¦æ¨é€ä»£ç åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œä¸èƒ½å®Œç¾è§£å†³ç›®å‰çš„ç—›ç‚¹ã€‚\n* ç¬¬äºŒç§æ–¹æ¡ˆçµæ´»é…ç½®ï¼Œæ‰‹åŠ¨è§¦å‘ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ„å»ºï¼Œå¯ä»¥è§£å†³ç›®å‰çš„ç—›ç‚¹ã€‚\n\næœ¬æ–‡å°±è®²è§£å¦‚ä½•é€šè¿‡APIå®Œæˆæµ‹è¯•ç¯å¢ƒçš„æ„å»ºå·¥ä½œï¼Œç”Ÿäº§ç¯å¢ƒä¸æ¨èè¿™æ ·åšï¼Œç”Ÿäº§ç¯å¢ƒä¸€èˆ¬éƒ½æœ‰ä¸¥æ ¼çš„ä¸Šçº¿æµç¨‹å’Œæƒé™æ§åˆ¶ã€‚\n\n![image-20230831200429836](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202308312004869.png)\n\n<!-- more -->\n[githubä»“åº“](https://github.com/BestJarvan/helper-cli)\n\n#### æ„å»ºè„šæœ¬\n1. é¦–å…ˆæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ–°å»º(è‹¥æ²¡æœ‰)`build`æ–‡ä»¶å¤¹ï¼Œæ–°å»º`jenkins.js`å­˜æ”¾æˆ‘ä»¬çš„è„šæœ¬\n2. å®‰è£…[Jenkins](https://github.com/silas/node-jenkins) -> `npm install --save-dev jenkins`\n3. ç¤ºä¾‹ä»£ç å¦‚ä¸‹\n4. æŠŠè„šæœ¬æ·»åŠ åˆ°`package.json`çš„`script`ä¸­ï¼Œæ–°å¢`\"deploy:jen\": \"node ./build/jenkins\"`\n5. æˆ‘ä»¬è¿è¡Œ`npm run deploy:jen`\n\n```javascript\nconst Jenkins = require('jenkins')\n\n// åˆ†æ”¯å\nconst branchName = 'test'\n// é¡¹ç›®å\nconst jobName = 'example'\n// æˆæƒä¿¡æ¯\nconst auth = {\n  username: 'username',\n  // æ¨èä½¿ç”¨jenkins tokenï¼Œåœ¨ä¸ªäººè®¾ç½®ä¸­ç”Ÿæˆ\n  password: 'password'\n}\nconst jenkins = new Jenkins({\n  // https://ç”¨æˆ·å:å¯†ç /token@jenkinsåœ°å€\n  baseUrl: `https://${auth.username}:${auth.password}@jenkins.xxx.com`,\n})\n\nasync function triggerBuild() {\n  try {\n    const result = await jenkins.job.build({\n      name: jobName,\n      // jenkinsä¸­éœ€è¦çš„å‚æ•°ï¼Œè‹¥æ— åˆ™ä¸ºç©º\n      parameters: {\n        branch: branchName,\n        merge: true\n      },\n      token: auth.password\n    })\n    console.log('å¼€å§‹æ„å»º...', result)\n  } catch (error) {\n    console.error('error: ', error);\n  }\n}\n\ntriggerBuild()\n```\n\næ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥è§¦å‘æ„å»ºæµç¨‹ï¼Œä½†æ˜¯ä¸å¤Ÿå®Œç¾ï¼Œå‘å¸ƒåˆ†æ”¯éœ€è¦æˆ‘ä»¬å†™æ­»ï¼Œä¸”æˆ‘ä»¬å¹¶ä¸çŸ¥é“æ„å»ºè¿›åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©`child_process`æŸ¥çœ‹åˆ†æ”¯å’Œ`jenkins.build.logStream`å®æ—¶æŸ¥çœ‹æ„å»ºè¿›åº¦\n\n#### åŠ¨æ€é…ç½®åˆ†æ”¯å&è¾“å‡ºè¿›åº¦\nåœ¨ç¬¬ä¸€æ­¥çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿›è¡Œå®Œå–„\n```javascript\nconst Jenkins = require('jenkins')\nconst { exec } = require('child_process');\n\n// åˆ†æ”¯ååˆå§‹åŒ–\nconst branchName = 'test'\n// jenkinsçš„jobå\nconst jobName = 'example'\n// æˆæƒä¿¡æ¯\nconst auth = {\n  username: 'username',\n  password: 'password'\n}\nconst jenkins = new Jenkins({\n  // https://ç”¨æˆ·å:å¯†ç /token@jenkinsåœ°å€\n  baseUrl: `https://${auth.username}:${auth.password}@jenkins.xxx.com`,\n})\n\ngetGitBranch()\n  .then(res => {\n    branchName = res\n    triggerBuild()\n  })\n\n// è·å–å½“å‰åˆ†æ”¯\nfunction getGitBranch() {\n  return new Promise((resolve, reject) => {\n    exec('git rev-parse --abbrev-ref HEAD', (error, stdout, stderr) => {\n      if (error) {\n        console.error(`exec error: ${error}`)\n        reject()\n        return;\n      }\n      resolve(stdout.trim())\n    })\n  })\n}\n\n// è§¦å‘æ„å»º\nasync function triggerBuild() {\n  try {\n    const result = await jenkins.job.build({\n      name: jobName,\n      // jenkinsä¸­éœ€è¦çš„å‚æ•°ï¼Œè‹¥æ— åˆ™ä¸ºç©º\n      parameters: {\n        branch: branchName,\n        merge: true\n      },\n      token: auth.token\n    })\n    console.log('å‡†å¤‡æ„å»º...', result)\n    waitOnQueue(result)\n  } catch (error) {\n    console.error('error: ', error);\n  }\n}\n\n// è½®è®­æŸ¥çœ‹å½“å‰æ„å»ºçŠ¶æ€\nasync function waitOnQueue(id) {\n  const result = await jenkins.queue.item(id)\n  if (result.executable) {\n  console.log('å¼€å§‹æ„å»º: ', jobName);\n    setTimeout(() => {\n      logBuild(result.executable.number)\n    }, 500);\n  } else if (result.cancelled) {\n    console.log('æ„å»ºå·²å–æ¶ˆ')\n  } else {\n    setTimeout(() => {\n      waitOnQueue(id)\n    }, 500);\n  }\n}\n\n// è¾“å‡ºç¼–è¯‘ç»“æœ\nfunction logBuild(id) {\n  console.log('æ„å»ºä¸­...', id)\n  const log = jenkins.build.logStream(jobName, id);\n\n  log.on(\"data\", (text) => {\n    process.stdout.write(text);\n  });\n\n  log.on(\"error\", (err) => {\n    console.log(\"error\", err);\n  });\n\n  log.on(\"end\", () => {\n    console.log(\"success: æ„å»ºå®Œæˆ.\");\n  });\n}\n\n```\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»å®Œå–„äº†æˆ‘ä»¬çš„å‘å¸ƒè„šæœ¬ï¼Œä½†æ˜¯é¡¹ç›®ä¸­ä¼šæœ‰å¤šä¸ªå¼€å‘éœ€è¦ä½¿ç”¨æ­¤è„šæœ¬ï¼Œè®¤è¯ä¿¡æ¯å¦‚æœå¯ä»¥åŠ¨æ€é…ç½®ï¼Œé‚£å°±æ›´å¥½äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`node`è„šæœ¬æˆ–è€…`shell`å®Œæˆè¿™ä¸€æƒ³æ³•ã€‚\n\n#### ç¼–å†™shellè„šæœ¬å®Œæˆç”¨æˆ·è´¦å·ä¿¡æ¯é…ç½®\n1. `build`æ–‡ä»¶ä¸­æ–°å¢`jenkins-init.sh`æ–‡ä»¶ï¼Œå‚è€ƒç¬¬å››æ­¥\n\n2. æ–‡ä»¶å†…è„šæœ¬éœ€è¦å®Œæˆä¸‰ä¸ªä¸ªæ“ä½œ\n    1. å…è®¸ç”¨æˆ·è¾“å…¥è´¦å·ä¿¡æ¯\n    2. å†…ç½®é»˜è®¤è´¦å·é…ç½®\n    3. å­˜å…¥è´¦å·ä¿¡æ¯åˆ°jsonä¸­\n    \n3. åœ¨`package.json`çš„`script`ä¸­æ–°å¢`\"init:jen\": \"sh ./build/jenkins-init.sh\"`\n\n4. ä¿®æ”¹`jenkins.js`è„šæœ¬ï¼Œè¯»å–é…ç½®è´¦å·ä¿¡æ¯\n\n5. `shell`è„šæœ¬ä¼šè‡ªåŠ¨åœ¨`build`æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª`token.json`çš„æ–‡ä»¶ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶åŠ å…¥åˆ°`.gitignore`é‡Œé¢ï¼Œä¸éœ€è¦æäº¤åˆ°è¿œç«¯\n\n    ![image-20230831200256923](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202308312002955.png)\n\n#### å®Œæ•´ç‰ˆ\njenkins-init\n```shell\n#!/usr/bin/env sh\n\nset -e\nACCOUNT=\"\"\nTOKEN=\"\"\nread -p \"åˆå§‹åŒ–æœ¬åœ°jenkinsé…ç½®, æ˜¯å¦ä½¿ç”¨é»˜è®¤é…ç½® ? (y/n)\" -n 1 -r\n\nif [[ $REPLY =~ ^[Yy]$ ]]\n  then\n    echo \"\"\n    ACCOUNT=\"username\"\n    TOKEN=\"password|token\"\n  else\n    echo \"\"\n    echo \"jenkinsè´¦å·:\"\n    # 20sè¶…æ—¶è‡ªåŠ¨æ–­\n    read -t 20 ACCOUNT\n\n    echo \"jenkinså¯†ç (token):\"\n    read -t 20 TOKEN\nfi\n# å­˜å…¥é…ç½®æ–‡ä»¶\necho '{\"account\": \"'$ACCOUNT'\", \"token\": \"'$TOKEN'\"}' > ./build/token.json\necho \"jenkinsé…ç½®åˆå§‹åŒ–å®Œæˆ\"\n```\njenkins.js\n```javascript\nconst Jenkins = require('jenkins')\nconst fs = require('fs')\nconst path = require('path')\nconst { exec } = require('child_process');\n\nconst auth = {}\nconst jobName = 'example'\n\nlet jenkins\nlet branchName = 'test'\n\ngetGitBranch()\n  .then(res => {\n    branchName = res\n    initJenkins()\n  })\n\nfunction initJenkins() {\n  try {\n    const data = fs.readFileSync(path.join(__dirname, './', 'token.json'), 'utf8')\n    Object.assign(auth, JSON.parse(data))\n    jenkins = new Jenkins({\n      baseUrl: `https://${auth.account}:${auth.token}@jenkins.xxx.com`,\n    })\n    triggerBuild()\n  } catch (error) {\n    console.error('é…ç½®æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œè¯·å…ˆè¿è¡Œnpm run init:jen ç”Ÿæˆé…ç½®æ–‡ä»¶')\n  }\n}\n\n\nfunction getGitBranch() {\n  return new Promise((resolve, reject) => {\n    exec('git rev-parse --abbrev-ref HEAD', (error, stdout, stderr) => {\n      if (error) {\n        console.error(`exec error: ${error}`)\n        reject()\n        return;\n      }\n      resolve(stdout.trim())\n    })\n  })\n}\n\nasync function triggerBuild() {\n  try {\n    const result = await jenkins.job.build({\n      name: jobName,\n      // jenkinsä¸­éœ€è¦çš„å‚æ•°ï¼Œè‹¥æ— åˆ™ä¸ºç©º\n      parameters: {\n        branch: branchName,\n        merge: true\n      },\n      token: auth.token\n    })\n    console.log('å‡†å¤‡æ„å»º...', result)\n    waitOnQueue(result)\n  } catch (error) {\n    console.error('error: ', error);\n  }\n}\n\nasync function waitOnQueue(id) {\n  const result = await jenkins.queue.item(id)\n  if (result.executable) {\n  console.log('å¼€å§‹æ„å»º: ', jobName);\n    setTimeout(() => {\n      logBuild(result.executable.number)\n    }, 500);\n  } else if (result.cancelled) {\n    console.log('æ„å»ºå·²å–æ¶ˆ')\n  } else {\n    setTimeout(() => {\n      waitOnQueue(id)\n    }, 500);\n  }\n}\n\nfunction logBuild(id) {\n  console.log('æ„å»ºä¸­...', id)\n  const log = jenkins.build.logStream(jobName, id);\n\n  log.on(\"data\", (text) => {\n    process.stdout.write(text);\n  });\n\n  log.on(\"error\", (err) => {\n    console.log(\"error\", err);\n  });\n\n  log.on(\"end\", () => {\n    console.log(\"success: æ„å»ºå®Œæˆ.\");\n  });\n}\n```\n\n![image-20230831200141757](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202308312001802.png)\n\nå¼€å‘æ‹‰å–ä»£ç åï¼Œé¦–æ¬¡éœ€è¦è¿è¡Œ`npm run init:jen`ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œä¹‹åæ¯æ¬¡å‘å¸ƒæµ‹è¯•ç¯å¢ƒå¯ä»¥è¿è¡Œ`npm run deploy:jen`è§¦å‘æ„å»ºï¼Œè‹¥éœ€è¦åˆå¹¶teståˆ†æ”¯ï¼Œåˆ™å¯ä»¥åœ¨jenkinsä¸­é…ç½®è‡ªåŠ¨åˆå¹¶ã€‚\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†å¯è‡ªç”±é…ç½®è´¦å·ä¿¡æ¯ï¼Œæ‰‹åŠ¨è§¦å‘jenkinsæ„å»ºï¼Œå¹¶ä¸”æŸ¥çœ‹æ„å»ºè¿›åº¦çš„è„šæœ¬ã€‚\n\n\n\n#### ç¬¬äºŒç‰ˆï¼Œé€šè¿‡CLIå‘å¸ƒ\n\næ­¤ç‰ˆæœ¬æ›´é€‚åˆå¤šé¡¹ç›®å‘å¸ƒï¼Œæå–åˆ°npmå¯å…¨å±€å®‰è£…æˆ–é¡¹ç›®å®‰è£…ï¼Œæ¯”ç¬¬ä¸€ç‰ˆæœ¬æ›´åŠ çµæ´»ã€‚\n\n[ä»é›¶æ­å»ºå‰ç«¯è„šæ‰‹æ¶CLIå·¥å…·](https://www.jiangyh.cn/2023/09/05/node/myself-cli/index.html)","tags":["javascript","nodejs","jenkins","shell"],"categories":["node"]},{"title":"iTerm2å¿«æ·é”®å¤§å…¨","url":"/2023/05/16/node/iterm2/","content":"\n#### **æ ‡ç­¾æ“ä½œ**\n\næ–°å»ºæ ‡ç­¾ï¼š`command + t`\n\nå…³é—­æ ‡ç­¾ï¼š`command + w`\n\nåˆ‡æ¢æ ‡ç­¾ï¼š`command + æ•°å­— / command + å·¦å³æ–¹å‘é”®`\n\nåˆ‡æ¢å…¨å±ï¼š`command + enter`\n\næŸ¥æ‰¾ï¼š`command + f`\n\n#### **åˆ†å±æ“ä½œ**\n\nå‚ç›´åˆ†å±ï¼š`command + d`\n\næ°´å¹³åˆ†å±ï¼š`command + shift + d`\n\nåˆ‡æ¢å±å¹•ï¼š`command + option + æ–¹å‘é”® / command + [ / command + ]`\n\næŸ¥çœ‹å†å²å‘½ä»¤ï¼š`command + ;`\n\næŸ¥çœ‹å‰ªè´´æ¿å†å²ï¼š`command + shift + h`\n\n#### **å…¶ä»–**\n\né€‰ä¸­å³å¤åˆ¶ï¼Œåœ¨iterm2ä¸­é€‰ä¸­å†…å®¹å°±å·²ç»å¤åˆ¶åˆ°äº†å‰ªåˆ‡æ¿\n\næ¸…é™¤å½“å‰è¡Œï¼š`ctrl + u`\n\nåˆ°è¡Œé¦–ï¼š`ctrl + a`\n\nåˆ°è¡Œå°¾ï¼š`ctrl + e`\n\nå‰è¿›åé€€ï¼š`ctrl + f/b (ç›¸å½“äºå·¦å³æ–¹å‘é”®)`\n\nä¸Šä¸€æ¡å‘½ä»¤ï¼š`ctrl + p`\n\næœç´¢å‘½ä»¤å†å²ï¼š`ctrl + r`\n\nåˆ é™¤å½“å‰å…‰æ ‡çš„å­—ç¬¦ï¼š`ctrl + d`\n\nåˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ï¼š`ctrl + h`\n\nåˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ï¼š`ctrl + w`\n\nåˆ é™¤åˆ°æ–‡æœ¬æœ«å°¾ï¼š`ctrl + k`\n\näº¤æ¢å…‰æ ‡å¤„æ–‡æœ¬ï¼š`ctrl + t`\n\næ¸…å±1ï¼š`command + r`\n\næ¸…å±2ï¼š`ctrl + l`\n\n\n\nåŸæ–‡åœ°å€: [çŸ¥ä¹](https://zhuanlan.zhihu.com/p/114232649)\n","tags":["iTerm2"],"categories":["notes"]},{"title":"å¾®å‰ç«¯æ–¹æ¡ˆå¯¹æ¯”","url":"/2022/12/25/vue/micro-frontends/","content":"## ä»€ä¹ˆæ˜¯å¾®å‰ç«¯\n\nå¾®å‰ç«¯ç±»ä¼¼å¾®æœåŠ¡ï¼Œå¹¶ä¸æ˜¯æŒ‡æŸä¸€å…·ä½“çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§æ•´åˆäº†æŠ€æœ¯ã€ç­–ç•¥å’Œæ–¹æ³•çš„**å®è§‚æ¶æ„æ–¹æ¡ˆ**ï¼Œæ˜¯ä¸€ç§å°†å¤šä¸ªå¯ç‹¬ç«‹äº¤ä»˜çš„å°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“çš„æ¶æ„é£æ ¼ã€‚\n\n## ä¸ºä»€ä¹ˆé€‰æ‹©å¾®å‰ç«¯\n\nå¾®å‰ç«¯ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜:\n\n1. é¡¹ç›®è¿­ä»£å¯¼è‡´å·¨çŸ³åº”ç”¨ï¼Œéš¾ä»¥ç»´æŠ¤\n\n2. å…¼å®¹å†å²åº”ç”¨ï¼Œå®ç°å¢é‡å¼€å‘\n\n<!-- more -->\n\nä¼˜ç‚¹:\n\n1. æ›´çµæ´»çš„æŠ€æœ¯æ ˆé€‰æ‹©\n2. æ‹“å±•å¤šä¸ªæŠ€æœ¯å›¢é˜Ÿ\n\n3. æ›´å¿«ä¸”ç‹¬ç«‹çš„éƒ¨ç½²\n4. ...\n\nç¼ºç‚¹:\n\n1. ç”¨æˆ·å±‚é¢ï¼Œä¸è¿è´¯çš„ä½“éªŒé—®é¢˜\n2. å¤šé¡¹ç›®ã€å¤šè¯­è¨€é€ æˆçš„ç»´æŠ¤æˆæœ¬å¢åŠ \n\n## [Why Not Iframe](https://www.yuque.com/kuitos/gky7yw/gesexv)\n\n## å¾®å‰ç«¯æ¡†æ¶é€‰æ‹©\n\næœ¬æ¬¡æ”¹é€ ä½¿ç”¨ä¸€ä¸‹æŠ€æœ¯æ ˆ\n\nåŸºåº§åº”ç”¨vue2.x\n\nå­åº”ç”¨vue2.x\n\nè·¯ç”±æ¨¡å¼å‡ä¸º`hash`\n\n### ä¸€. [qiankun](https://github.com/umijs/qiankun)\n\n![d1a6cb48359cf96be6b4cd750a241dfa.png](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202303201601278.png)\n\nå›¾ç‰‡æ¥æºï¼šhttps://blog.csdn.net/xgangzai/article/details/128489706\n\n#### åŸºåº§åº”ç”¨\n\n1. æ‰‹åŠ¨åŠ è½½(å¯æ‰‹åŠ¨ï¼Œå¯è‡ªåŠ¨ï¼Œè‡ªåŠ¨åŠ è½½éœ€è¦ä¿®æ”¹main.jså…¥å£æ–‡ä»¶)\n\n```html\n<!-- qiankunè·¯ç”±è½åœ°é¡µé¢ -->\n<template>\n  <div :id=\"instantId\"></div>\n</template>\n\n<script>\nimport { registerMicroApps, loadMicroApp, start } from 'qiankun';\n\nexport default {\n  name: 'index',\n\n  props: {\n    // å®ä¾‹id\n    instantId: {\n      type: String,\n      default: 'sub-app-viewport'\n    },\n    // å…¥å£\n    entry: {\n      type: String,\n      default: '//localhost:7101',\n    }\n  },\n\n  mounted () {\n    this.$nextTick(async () => {\n      this.$once('unmount', () => {\n        console.log('%cqiankun unmountï¼ï¼ï¼', 'color: orange;font-size: 32px')\n        this.app.unmount('#/qiankun')\n        this.app = null\n      })\n\n\n      const getActiveRule = (hash) => (location) => location.hash.startsWith(hash);\n\n      this.app = loadMicroApp({\n        name: 'vueApp', // app name registered\n        entry: this.entry,\n        container: `#${this.instantId}`,\n        activeRule: getActiveRule('#/qiankun'),\n      }, {\n        singular: true\n      })\n\n      console.log('%cqiankun app =====', 'color: orange;font-size: 32px', this.app)\n    })\n  },\n\n  destroyed () {\n    if (!this.app) return\n    this.app.unmount()\n    this.app = null\n  },\n}\n</script>\n```\n\n2. è·¯ç”±æ”¹é€ \n\n```javascript\n// router.js\nimport Qiankun from '@/views/qiankun/index'\n\nconst routes = [\n  {\n    path: '/',\n    component: Layout,\n    redirect: '/dashboard',\n    children: [\n      {\n        path: 'dashboard',\n        name: 'Dashboard',\n        component: () => import('@/views/dashboard/index'),\n        meta: { title: 'é¦–é¡µ', icon: 'dashboard', affix: true }\n      },\n      // åŒ¹é…æ‰€æœ‰/qiankunè·¯å¾„ï¼Œé˜²æ­¢æ‰¾ä¸åˆ°æŠ¥é”™404\n      {\n        path: 'qiankun/*', // åœ¨ä¸»åº”ç”¨ä¸­ï¼Œæ‰€æœ‰çš„/qiankun/*è·¯å¾„æŒ‡å‘å­åº”ç”¨\n        component: Qiankun,\n        hidden: true\n      },\n    ]\n  },\n]\n\n```\n\n\n\n#### å­åº”ç”¨\n\n1. æ”¹é€ å…¥å£æ–‡ä»¶ï¼Œæš´éœ²ç”Ÿå‘½å‘¨æœŸ\n\n```javascript\n// main.js\nimport Vue from 'vue';\nimport './public-path'\n\nlet instance = null;\n\nfunction render(props = {}) {\n  const { container } = props;\n\n  instance = new Vue({\n    router,\n    store,\n    render: h => h(App),\n  }).$mount(container ? container.querySelector('#app') : '#app');\n}\n\nif (!window.__POWERED_BY_QIANKUN__) {\n  render();\n}\n\nexport async function bootstrap() {\n  console.log('[vue] vue app bootstraped');\n}\n\nexport async function mount(props) {\n  console.log('[vue] props from main framework', props);\n  render(props);\n}\n\nexport async function unmount() {\n  instance.$destroy();\n  instance.$el.innerHTML = '';\n  instance = null;\n  // router = null;\n}\n\n```\n\n2. æ–°å¢`public-path.js`æ–‡ä»¶ï¼Œå¹¶åœ¨`main.js`å¼•å…¥\n\n```javascript\nif (window.__POWERED_BY_QIANKUN__) {\n  // eslint-disable-next-line no-undef\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;\n}\n\n```\n\n3. æ”¹é€ è·¯ç”±\n\n```javascript\n// router.js\nimport Layout form '@/components/layout'\nimport { name } from \"../../package.json\"\n\nconst flag = !!window.__POWERED_BY_QIANKUN__\n// åŠ¨æ€å‰ç¼€ï¼Œå¯ä»¥å†™æ­»ï¼Œè¿™é‡Œç”¨çš„é¡¹ç›®åä½œä¸ºå‰ç¼€ï¼Œå¦‚æœç‹¬ç«‹è¿è¡Œåˆ™ä¸º/\nconst prefixPath = flag ? `/${name}` : '/'\n\nconst routes = [\n  {\n    path: prefixPath,\n    component: Layout,\n    children: [\n      // å…¶ä»–çš„è·¯ç”±éƒ½å†™åˆ°è¿™é‡Œ\n      {\n        path: 'home',\n        name: 'home',\n        meta: {\n          // requireAuth: true\n        },\n        component: () => import('@/views/home')\n      },\n    ],\n  },\n];\n```\n\n4. æ”¹é€ `webpack`æ‰“åŒ…\n\n```javascript\n// vue.config.js\nconst { name } = require('./package.json')\n\nmodule.exports = {\n  devServer: {\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Headers\": \"*\",\n      \"Access-Control-Allow-Methods\": \"*\",\n    },\n    port: 7101\n  },\n  chainWebpack: config => {\n    config.output\n      .library(`${name}-[name]`)\n      .libraryTarget('umd')\n      .jsonpFunction(`webpackJsonp_${name}`)\n      .filename('js/[name].[hash].js')\n      .chunkFilename('js/[name].[hash].js')\n      .end();\n  }\n}\n\n```\n\n\n\nä¼˜ç‚¹:\n\n  1. ç¤¾åŒºæ´»è·ƒï¼Œæ¡†æ¶ç»è¿‡å¤šä¸ªé¡¹ç›®æ‰“ç£¨ï¼Œæ›´åŠ æˆç†Ÿ\n  2. ç¤¾åŒºdemoå¤šï¼Œæ¡ˆä¾‹å¤š\n  3. å®Œå¤‡çš„æ²™ç®±æ–¹æ¡ˆï¼Œjs æ²™ç®±åšäº† `SnapshotSandbox`ã€`LegacySandbox`ã€`ProxySandbox` ä¸‰å¥—æ¸è¿›å¢å¼ºæ–¹æ¡ˆï¼Œcss æ²™ç®±åšäº† `strictStyleIsolation`ã€`experimentalStyleIsolation` ä¸¤å¥—é€‚ç”¨ä¸åŒåœºæ™¯çš„æ–¹æ¡ˆ\n\nç¼ºç‚¹:\n\n  1. é¡¹ç›®ä¾µå…¥æ€§å¼ºï¼Œæ¥å…¥æˆæœ¬é«˜\n  2. é¡µé¢å±•ç¤ºå¤šä¸ªå­åº”ç”¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `momery` è·¯ç”±\n  3. å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒç®€æ´ï¼Œéœ€è¦å¤šå»ç¤¾åŒºçœ‹demo\n\n\n\n### äºŒ. [wujie](https://github.com/Tencent/wujie)\n\n![img](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202303201438420.webp)\n\n#### åŸºåº§åº”ç”¨\n\n1. æ”¹é€ å…¥å£æ–‡ä»¶ï¼Œæ³¨å…¥æ— ç•Œ\n\n```javascript\n// main.js\nimport WujieVue from 'wujie-vue2'\n\nconst { setupApp, preloadApp, bus } = WujieVue;\n\nVue.use(WujieVue)\n\npreloadApp({\n  name: 'vue2'\n})\n\n\n```\n\n2. æ–°å»ºæ— ç•Œé¡µé¢ï¼Œè·¯ç”±è·³è¿™é‡Œ\n\n```html\n<template>\n  <WujieVue\n    width=\"100%\"\n    height=\"100%\"\n    v-bind=\"options\"\n  ></WujieVue>\n</template>\n\n<script>\n// æ¨èæŠ½ç¦»åˆ°å…¬å…±jsä¸­æˆ–å•ç‹¬ä¸€ä¸ªjs\nconst lifecycles = {\n  beforeLoad: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeLoad ç”Ÿå‘½å‘¨æœŸ`),\n  beforeMount: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeMount ç”Ÿå‘½å‘¨æœŸ`),\n  afterMount: (appWindow) => console.log(`${appWindow.__WUJIE.id} afterMount ç”Ÿå‘½å‘¨æœŸ`),\n  beforeUnmount: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeUnmount ç”Ÿå‘½å‘¨æœŸ`),\n  afterUnmount: (appWindow) => console.log(`${appWindow.__WUJIE.id} afterUnmount ç”Ÿå‘½å‘¨æœŸ`),\n  activated: (appWindow) => console.log(`${appWindow.__WUJIE.id} activated ç”Ÿå‘½å‘¨æœŸ`),\n  deactivated: (appWindow) => console.log(`${appWindow.__WUJIE.id} deactivated ç”Ÿå‘½å‘¨æœŸ`),\n  loadError: (url, e) => console.log(`${url} åŠ è½½å¤±è´¥`, e),\n};\n\nexport default {\n  name: 'wujie',\n\n  data () {\n    return {\n      options: {\n        name: 'vue2',\n        url: '//localhost:9001/#/',\n        exec: true,\n        sync: true, // è·¯ç”±åŒæ­¥\n        props: {\n          params: 1,\n          methods: () => {\n            console.log(123)\n          }\n        }, // ä¼ å‚ç»™å­è·¯ç”±\n        ...lifecycles // ç”Ÿå‘½å‘¨æœŸ\n      }\n    }\n  },\n  \n  mounted () {\n    // æ ¹æ®åŸºåº§åº”ç”¨è·¯ç”±åˆ†æè·³è½¬åˆ°å­åº”ç”¨å¯¹åº”é¡µé¢\n    const routerStr = location.hash.replace('#/wujie/', '')\n    this.options.url += routerStr\n  },\n}\n</script>\n\n```\n\n#### å­åº”ç”¨\n\n1. æ”¹é€ å…¥å£æ–‡ä»¶\n\n```javascript\n// main.js\n\n// å­è·¯ç”±æ¥æ”¶æ–¹å¼\nwindow.$wujie?.props // { params: 1, methods: function }\nwindow.$wujie?.props.methods()\n\n// ç”Ÿå‘½å‘¨æœŸæ”¹é€ \nif (window.__POWERED_BY_WUJIE__) {\n  let instance;\n  window.__WUJIE_MOUNT = () => {\n    instance = new Vue({\n      router,\n      store,\n      render: (h) => h(App)\n    }).$mount(\"#app\");\n  };\n  window.__WUJIE_UNMOUNT = () => {\n    instance.$destroy();\n  };\n} else {\n  new Vue({\n    router,\n    store,\n    render: h => h(App)\n  }).$mount('#app');\n}\n\n```\n\n\n\nä¼˜ç‚¹:\n\n  1. æ”¹é€ æˆæœ¬ä½ï¼Œæœ‰åŸºäºvueçš„`wujie-vue`å’Œreactçš„` wujie-react`å°è£…ï¼Œå¼€ç®±å³ç”¨\n  2. å­åº”ç”¨åŠ è½½å’Œæ™®é€š vue ç»„ä»¶åŠ è½½å¹¶æ— äºŒè‡´ï¼Œæ‰€æœ‰é…ç½®éƒ½æ”¶æ•›åˆ°ç»„ä»¶çš„å±æ€§ä¸Šã€‚\n  3. `webcomponent` + `shadowdom`ã€js-iframeåŸç”Ÿæ²™ç®±\n  4. æ”¯æŒ`plugin`\n  5. å­åº”ç”¨ä¿æ´»\n  6. æ›´æ–¹ä¾¿çš„å…¨å±€ç»„ä»¶æŒ‚è½½\n  7. æµè§ˆå™¨é™çº§å¤„ç†\n\nç¼ºç‚¹:\n\n  1. ç¤¾åŒºä¸å¦‚qiankunå’Œmicro-appæ´»è·ƒ\n\n\n\n### ä¸‰ã€[micro-app](https://github.com/micro-zoe/micro-app)\n\n![image](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202303171505687.png)\n\n#### åŸºåº§åº”ç”¨\n\n1. åŸºåº§åº”ç”¨æ”¹é€ ä¾µå…¥æ€§å°\n\n```javascript\n// å®‰è£…\n// npm i @micro-zoe/micro-app --save\n\n// main.js\nimport Vue from 'vue'\nimport microApp from '@micro-zoe/micro-app'\n\nmicroApp.start()\n\n// é¢„åŠ è½½\nmicroApp.preFetch([\n  { name: 'myApp', url: '//localhost:9001' }\n])\n\n// å­åº”ç”¨å¸è½½\nwindow.addEventListener('unmount', function () {\n  // æ‰§è¡Œå¸è½½ç›¸å…³æ“ä½œ\n})\n\n...\nVue.config.productionTip = false\n\nnew Vue({\n  el: '#app',\n  render: (h) => h(App),\n})\n\n```\n\n2. åˆ†é…è·¯ç”±\n\n```javascript\n// router.js\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport MyPage from './my-page.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    // ğŸ‘‡ éä¸¥æ ¼åŒ¹é…ï¼Œ/my-page/* éƒ½æŒ‡å‘ MyPage é¡µé¢\n    path: '/micro/*', // vue-router@4.x pathçš„å†™æ³•ä¸ºï¼š'/my-page/:page*'\n    name: 'micro',\n    component: MyPage,\n  },\n]\n\nexport default routes\n```\n\n3. é¡µé¢ä¸­ä½¿ç”¨ï¼Œæ•°æ®é€šä¿¡ï¼Œç”Ÿå‘½å‘¨æœŸ\n\n```html\n<!-- my-page.vue -->\n<template>\n  <micro-app\n    name='myApp'\n    url='//localhost:9001'\n    baseroute='/micro'\n    :data='dataForChild'\n    @created='handleLifecycle'\n    @beforemount='handleLifecycle'\n    @mounted='handleLifecycle'\n    @unmount='handleLifecycle'\n    @error='handleLifecycle'\n    @datachange='handleDataChange'\n  ></micro-app>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      dataForChild: {type: 'å‘é€ç»™å­åº”ç”¨çš„æ•°æ®'}\n    }\n  },\n  methods: {\n    handleLifecycle (e) {\n      console.log('è§¦å‘ç”Ÿå‘½å‘¨æœŸï¼š', e.type)\n    },\n    handleDataChange (e) {\n      console.log('æ¥è‡ªå­åº”ç”¨çš„æ•°æ®ï¼š', e.detail.data)\n    }\n  }\n}\n</script>\n\n...\n```\n\n\n\n#### å­åº”ç”¨\n\n1. å­åº”ç”¨æ”¹é€ \n\n```javascript\n// main.js\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\n\n// è¿”å›åŸºåº§ä¸‹å‘çš„dataæ•°æ®\nconst data = window.microApp.getData()\nconsole.log(data)\n\n// å‘é€æ•°æ®ç»™åŸºåº§åº”ç”¨ï¼Œdispatchåªæ¥å—å¯¹è±¡ä½œä¸ºå‚æ•°\nwindow.microApp.dispatch({type: 'å­åº”ç”¨å‘é€çš„æ•°æ®'})\n\n// umdæ¨¡å¼ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œé€‚åˆé¢‘ç¹æŒ‚è½½ã€å¸è½½å­åº”ç”¨\nlet app = null\n// ğŸ‘‡ å°†æ¸²æŸ“æ“ä½œæ”¾å…¥ mount å‡½æ•° -- å¿…å¡«\nfunction mount () {\n  app = new Vue({\n    router,\n    store,\n    render: h => h(App)\n  }).$mount('#app');\n}\n\n// ğŸ‘‡ å°†å¸è½½æ“ä½œæ”¾å…¥ unmount å‡½æ•° -- å¿…å¡«\nfunction unmount () {\n  app.$destroy()\n  app.$el.innerHTML = ''\n  app = null\n}\n\n// å¾®å‰ç«¯ç¯å¢ƒä¸‹ï¼Œæ³¨å†Œmountå’Œunmountæ–¹æ³•\nif (window.__MICRO_APP_ENVIRONMENT__) {\n  window[`micro-app-${window.__MICRO_APP_NAME__}`] = { mount, unmount }\n} else {\n  // éå¾®å‰ç«¯ç¯å¢ƒç›´æ¥æ¸²æŸ“\n  mount()\n}\n```\n\n2. è·¯ç”±æ”¹é€ \n\n```javascript\n// router.js\nimport VueRouter from 'vue-router';\nimport layOut from '@/components/layOut'\n\nconst routes = [\n  {\n    path: window.__MICRO_APP_BASE_ROUTE__ || '/',\n    component: layOut,\n    children: [\n      ...\n    ]\n  }\n]\n\nconst router = new VueRouter({\n  mode: \"hash\",\n  // base: process.env.BASE_URL,\n  base: window.__MICRO_APP_BASE_ROUTE__ || '/',\n  routes\n});\n\nexport default router;\n\n```\n\nè·¯ç”±çº¦æŸï¼š\n\n- åŸºåº§æ˜¯hashè·¯ç”±ï¼Œå­åº”ç”¨ä¹Ÿå¿…é¡»æ˜¯hashè·¯ç”±\n- åŸºåº§æ˜¯historyè·¯ç”±ï¼Œå­åº”ç”¨å¯ä»¥æ˜¯hashæˆ–historyè·¯ç”±\n\nåŸºç¡€è·¯ç”±ï¼š\n\n1. å¦‚æœåŸºåº§æ˜¯historyè·¯ç”±ï¼Œå­åº”ç”¨æ˜¯hashè·¯ç”±ï¼Œä¸éœ€è¦è®¾ç½®åŸºç¡€è·¯ç”±baseroute\n\n2. å¦‚æœå­åº”ç”¨åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œæ²¡æœ‰ä½¿ç”¨`react-router`ï¼Œ`vue-router`ä¹‹ç±»ï¼Œä¹Ÿä¸éœ€è¦è®¾ç½®åŸºç¡€è·¯ç”±baseroute\n\n3. `vue-router`åœ¨hashæ¨¡å¼ä¸‹æ— æ³•é€šè¿‡baseè®¾ç½®åŸºç¡€è·¯ç”±ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç©ºçš„è·¯ç”±é¡µé¢ï¼Œå°†å…¶å®ƒè·¯ç”±ä½œä¸ºå®ƒçš„children\n\n`Proxy`ä»£ç†ä¿è¯`window`çš„çº¯å‡€ï¼Œå› `Proxy`æ²¡æœ‰æ›´å¥½çš„`polyfill`æ–¹æ¡ˆï¼Œæ‰€ä»¥ä¸æ”¯æŒ`Proxy`çš„æµè§ˆå™¨(IEã€ä½ç‰ˆæœ¬iOSç­‰)æ— æ³•è¿è¡Œmicro-app\n\n\n\nä¼˜ç‚¹ï¼š\n\n1. æ”¹é€ æˆæœ¬å¯¹æ¯”qiankunæœ‰æ‰€é™ä½\n2. ç®€å•çš„å­åº”ç”¨(æ— è·¯ç”±è·³è½¬ç­‰)å¼€ç®±å³ç”¨\n3. æ”¯æŒ`plugin`\n4. `webcomponet`ã€jsæ²™ç®±ã€`ShadowDom`ç­‰\n5. å­åº”ç”¨ä¿æ´»\n6. æ–‡æ¡£è¯¦ç»†ã€å®Œå–„ï¼Œå®˜æ–¹æ‰‹æŠŠæ‰‹demoæ•™å­¦ï¼Œç¤¾åŒºç›¸å¯¹æ´»è·ƒ\n\nç¼ºç‚¹:\n\n1. å¤æ‚å­åº”ç”¨æœ‰æ”¹é€ æˆæœ¬ï¼Œéœ€è¦æ”¹é€ è·¯ç”±æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨\n2. å…¬ç”¨ç»„ä»¶æŒ‚è½½éº»çƒ¦ï¼Œæ²¡æœ‰åŸç”Ÿæ”¯æŒ\n3. ä½ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹é—®é¢˜(IEç­‰ä¸æ”¯æŒ`Proxy`çš„æµè§ˆå™¨)\n\n\n\n### å››. [garfish](https://github.com/web-infra-dev/garfish)\n\n![è®¾è®¡ç†å¿µ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202303161957251.image)\n\n### äº”. æœ¬åœ°è·¨åŸŸè§£å†³æ–¹æ¡ˆ\n\n```javascript\n// vue.config.js\nmodule.exports = {\n  devServer: {\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Headers\": \"*\",\n      \"Access-Control-Allow-Methods\": \"*\",\n    },\n  },\n}\n\n```\n","tags":["vue","å¾®å‰ç«¯","qiankun","wujie","micro-app"],"categories":["vue"]},{"title":"æ‰‹å†™callã€applyã€bindä¸thisæŒ‡å‘é—®é¢˜","url":"/2022/08/15/js/æ‰‹å†™callã€applyã€bindä¸thisæŒ‡å‘é—®é¢˜/","content":"\n> æœ¬æ–‡ç»™å¤§å®¶ä»‹ç»æ›´å®Œå–„çš„æ‰‹å†™æ–¹æ³•\n>\n> è™½ç„¶æ‰‹å†™callï¼Œapplyï¼Œbindç½‘ä¸Šå·²ç»å¤§æŠŠå¤§æŠŠçš„æ–‡ç« ï¼Œä¸”æœ¬èº«çŸ¥è¯†ç‚¹æ¯”è¾ƒé›†ä¸­ï¼Œä½†æ˜¯ç½‘ä¸Šçš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½ä¼šæœ‰è¿™æ ·æˆ–è€…é‚£æ ·çš„é—®é¢˜ï¼Œå¹¶ä¸å®Œå–„\n>\n> æœ¬æ–‡å¸¦å¤§å®¶ä»å¦ä¸€ä¸ªè§’åº¦ï¼Œæ›´åŠ å®Œå–„çš„ç†è§£ã€å­¦ä¹ å¦‚ä½•æ‰‹å†™callã€applyã€bind\n\n### ä¸€ã€ç”¨æ³•ä¸åŒºåˆ«\n\n1. callï¼š\n\n   `call()` æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ `this` å€¼å’Œå•ç‹¬ç»™å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚\n\n2. applyï¼š\n\n   `apply()` æ–¹æ³•è°ƒç”¨ä¸€ä¸ªæŒ‡å®š `this` å€¼çš„å‡½æ•°ï¼Œä»¥åŠä»¥ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ä¸€ä¸ª[ç±»æ•°ç»„å¯¹è±¡](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Indexed_collections#working_with_array-like_objects)ï¼‰çš„å½¢å¼æä¾›çš„å‚æ•°ã€‚\n\n3. bindï¼š\n\n   `bind()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ `bind()` è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ `this` è¢«æŒ‡å®šä¸º `bind()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚\n<!-- more -->\n> æ€»ç»“ï¼šcallå’Œapplyä¼ å‚ä¸åŒï¼Œä½†éƒ½ä¼šè°ƒç”¨å‡½æ•°ã€‚bindä¼ å‚å’Œcallä¸€æ ·ï¼Œä½†æ˜¯bindä¼šè¿”å›thisæ”¹å˜åçš„å‡½æ•°ï¼Œå¹¶ä¸ä¼šç«‹å³è°ƒç”¨ã€‚\n\n```javascript\nvar name = 'lisi'\n\nconst obj = {\n\tname: 'zhangsan'\n}\n\nfunction getName (age, hobby) {\n  console.log(`æˆ‘å«${this.name}ï¼Œä»Šå¹´${age}å²ï¼Œå–œæ¬¢${hobby}`,)\n}\n\ngetName(20ï¼Œ'ç”µè„‘') // 'æˆ‘å«lisiï¼Œä»Šå¹´20å²ï¼Œå–œæ¬¢ç”µè„‘'\ngetName.call(obj, 18, 'è·³èˆ') // 'æˆ‘å«zhangsanï¼Œä»Šå¹´18å²ï¼Œå–œæ¬¢è·³èˆ'\ngetName.apply(obj, [18, 'è·³èˆ']) // 'æˆ‘å«zhangsanï¼Œä»Šå¹´18å²ï¼Œå–œæ¬¢è·³èˆ'\ngetName.bind(obj, 18, 'è·³èˆ')() // 'æˆ‘å«zhangsanï¼Œä»Šå¹´18å²ï¼Œå–œæ¬¢è·³èˆ'\n\n```\n\n\n\n### äºŒã€ä»€ä¹ˆæ˜¯this\n\n`this` æ˜¯æŒ‡å½“å‰å‡½æ•°ä¸­æ­£åœ¨æ‰§è¡Œçš„**ä¸Šä¸‹æ–‡ç¯å¢ƒ**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`this`æŒ‡å‘è°æ˜¯è°ƒç”¨æ—¶ç¡®å®šçš„ï¼Œè€Œéæ–‡æœ¬å®šä¹‰ã€‚\n\nå…¶æ¬¡å…³äº`this`ï¼Œéœ€è¦è®°ä½ä¸€å¥è¯ â€”â€”â€”â€” è°è°ƒç”¨å°±æŒ‡å‘è°\n\n\n\n### ä¸‰ã€å¦‚ä½•åˆ¤æ–­thisæŒ‡å‘\n\nå…³äº`this`æŒ‡å‘é—®é¢˜ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š\n\n1. å…¨å±€ç¯å¢ƒä¸‹çš„thisæŒ‡å‘: window\n\n   ```javascript\n   console.log(this) // window\n   ```\n\n2. å‡½æ•°å†…çš„this: \n\n      ```javascript\n   var name = 'lisi'\n   function getName () {\n     console.log(this.name)\n   }\n      \n   getName() // lisi\n   // ç­‰åŒäº\n   window.getName() // lisi\n      ```\n\n3. å¯¹è±¡ä¸­çš„this: \n\n   ```javascript\n   const obj = {\n   \tname: 'zhangsan',\n     getName: function () {\n       console.log(this.name)\n     }\n   }\n   obj.getName() // zhangsan\n   ```\n\n4. ç®­å¤´å‡½æ•°ä¸­çš„this: ç®­å¤´å‡½æ•°ä¸­æ²¡æœ‰ thisï¼Œ å®ƒä¼šç»‘å®šæœ€è¿‘çš„éç®­å¤´å‡½æ•°ä½œç”¨åŸŸä¸­çš„thisã€‚é¦–å…ˆä»å®ƒçš„çˆ¶çº§ä½œç”¨åŸŸæ‰¾ï¼Œå¦‚æœçˆ¶çº§ä½œç”¨åŸŸè¿˜æ˜¯ç®­å¤´å‡½æ•°ï¼Œå°±å†å¾€ä¸Šæ‰¾ï¼Œä¸€å±‚ä¸€å±‚çš„ç›´åˆ°æ‰¾åˆ°thisçš„æŒ‡å‘\n\n5. æ„é€ å‡½æ•°ä¸­çš„this: æŒ‡å‘å®ä¾‹ï¼Œå› ä¸ºé€šè¿‡newå…³é”®å­—æ„å»ºåå·²ç»æ”¹å˜thisæŒ‡å‘\n\n6. åŸå‹é“¾ä¸­çš„this: 1, çœ‹æ˜¯è°è°ƒç”¨ 2, è¿›è¡Œthisæ›¿æ¢ 3, åŸºäºåŸå‹é“¾ç¡®è®¤ç»“æœ\n\n   ```javascript\n   function Person (name, age) {\n     this.name = name\n     this.age = age\n   }\n   \n   Person.prototype.getAge = function () {\n     console.log(this.age)\n   }\n   \n   Person.prototype.addHobby = function () {\n   \tthis.hobby = 'å¹²é¥­'\n   }\n   \n   const personA = new Person('zhangsan', 18)\n   personA.name // zhangsan  this=>personA\n   personA.getAge() // 18 this=>personA\n   personA.__proto__.name // undefined this=>Person.prototype\n   Person.prototype.age // undefined this=>Person.prototype\n   personA.addHobby() // personAå®ä¾‹ä¸Šæ·»åŠ hobbyå­—æ®µ this=>personA\n   Person.prototype.addHobby() // Personå®ä¾‹ä¸Šæ·»åŠ hobbyå­—æ®µ this=>Person\n   \n   ```\n\n\n\n### å››ã€æ‰‹å†™callã€applyã€bind\n\næ ¹æ®ä¸Šè¿°çš„ç¬¬ä¸‰æ¡thisæŒ‡å‘ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ ä¸€ä¸ªå¯¹è±¡æ¥ä½¿å¾—æ”¹å˜thisçš„æŒ‡å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰‹å†™callå°±æœ‰äº†ä¸‹é¢çš„æ€è·¯\n\n```javascript\nFunction.prototype.myCall = function (ctx, ...args) {\n  ctx.fn = this\n  ctx.fn(...args)\n  delete ctx.fn\n}\n\n// test\nconst obj = {\n  name: 'zhangsan'\n}\nfunction test () {\n  console.log(this.name)\n}\ntest() // undefined\ntest.myCall(obj) // zhangsan\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸Šè¿°æ–¹æ³•å¯ä»¥å®ç°æ”¹å˜thisçš„æŒ‡å‘ï¼Œä½†æ˜¯ä¸Šè¿°æ–¹æ³•åˆä¼šå­˜åœ¨ä¸€äº›å¼Šç«¯\n\n1. å¦‚æœå¯¹è±¡é‡Œé¢æœ‰`fn`æ–¹æ³•ï¼Œä¼šæ›¿æ¢æ‰å¯¹è±¡ä¸­çš„`fn`æ–¹æ³•ï¼Œå“ªæ€•æ”¹æˆå¾ˆååƒ»çš„`__fn`ç­‰ç­‰ï¼Œéƒ½ä¼šå­˜åœ¨é£é™©ï¼Œå…¶æ¬¡ä¹Ÿä¸ç¾è§‚\n2. å¦‚æœä¼ å…¥çš„`ctx`æ˜¯æ™®é€šæ•°æ®ç±»å‹æˆ–è€…ç©ºå€¼ï¼Œæ¯”å¦‚`number`ï¼Œ`string`ï¼Œ`null`,`undefined`ç­‰\n3. å¦‚æœå‡½æ•°æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å°±æ²¡åŠæ³•æ¥æ”¶åˆ°è¿”å›å€¼\n\né‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•å»ä¼˜åŒ–ä¸Šé¢çš„myCallå‘¢ï¼Ÿ\n\næ€è€ƒä¸€ä¸‹\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\næ¥ä¸‹æ¥é’ˆå¯¹ä¸Šè¿°å‡ ä¸ªé—®é¢˜è¿›è¡Œæ”¹è¿›\n\n1. `fn`å‘½åå†²çªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©es6çš„`Symbol`è§£å†³\n\n   ```javascript\n   // å› ä¸ºSymbolçš„å”¯ä¸€æ€§ï¼Œå¯¼è‡´\n   const a = Symbol('a')\n   const b = Symbol('a')\n   a == b // false\n   // æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å®Œå¿…é¡»åˆ é™¤Symbolï¼Œä¿è¯å¯¹è±¡çš„å¹²å‡€\n   ```\n\n2. æ™®é€šæ•°æ®ç±»å‹å’Œç©ºå€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‰ç›®å»è§£å†³\n\n3. è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬æ¥æ”¶ï¼Œæœ€å`return`å‡ºå»\n\n> æ­¤å¤„ä½¿ç”¨`globalThis`åŸå› æ˜¯jsè¿è¡Œç¯å¢ƒæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æµè§ˆå™¨ä¸­ï¼Œä¸€ç§æ˜¯Nodeç¯å¢ƒï¼Œæ‰€ä»¥ä½¿ç”¨jså†…ç½®å…¨å±€å±æ€§æ¥åˆ¤æ–­\n\n```javascript\nFunction.prototype.myCall = function (ctx, ...args) {\n  ctx = ctx === null || ctx === undefined ? globalThis : Object(ctx)\n  const key = Symbol('fn')\n  ctx[key] = this\n  const res = ctx[key](...args)\n  delete ctx[key]\n  return res\n}\n\n// test\nconst obj = {\n  name: 'zhangsan'\n}\ntest.myCall(null) // this\ntest.myCall(2) // undefined\ntest.myCall(obj) // zhangsan\n```\n\næµ‹è¯•æ²¡é—®é¢˜åï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒmyCallæ‰‹å†™å‰©ä¸‹çš„ä¸¤ä¸ªmyApplyå’ŒmyBind\n\n```javascript\nFunction.prototype.myApply = function (ctx, args) {\n  ctx = ctx === null || ctx === undefined ? globalThis : Object(ctx)\n  // é˜²æ­¢argsæ²¡æœ‰æˆ–ä¼ å€¼ä¸å¯¹\n  args = Array.isArray(args) ? args : []\n  const key = Symbol('fn')\n  ctx[key] = this\n  const res = ctx[key](...args)\n  delete ctx[key]\n  return res\n}\n\nFunction.prototype.myBind = function (ctx, ...args1) {\n  ctx = ctx === null || ctx === undefined ? globalThis : Object(ctx)\n  const key = Symbol('fn')\n  ctx[key] = this\n  \n  return function (...args2) {\n    const res = ctx[key](...args1, ...args2)\n    delete ctx[key]\n    return res\n  }\n}\n```\n\nä¸‹é¢æˆ‘ä»¬è¯·å‡ºç‰¹çº¦å˜‰å®¾`zhangsan`å’Œ`lisi`ï¼Œå¸®æˆ‘ä»¬è·‘ä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯ä¸‹æ–¹æ³•çš„å¯é æ€§\n\n```javascript\nvar name = 'lisi'\nconst obj = {\n  name: 'zhangsan'\n}\n\nfunction test (...args) {\n  console.log(`æˆ‘æ˜¯: ${this.name}, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: ${args}`)\n}\n\nfunction testReturnValue (...args) {\n  console.log(`æˆ‘æ˜¯: ${this.name}, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: ${args}`)\n  return 'æ²¡é”™å°±æ˜¯æˆ‘'\n}\n\n// æ€è€ƒä¸‹ä¸‹é¢ä¼šè¾“å‡ºä»€ä¹ˆç»“æœ\ntest.myCall(obj)\ntest.myCall(obj, 1, 2, 3)\nconst a = testReturnValue.myCall(obj)\nconst a2 = testReturnValue.myCall(obj, 1, 2, 3)\n\ntest.myApply(obj)\ntest.myApply(obj, 1)\ntest.myApply(obj, [1])\n\ntest.myBind(obj)()\ntest.myBind(obj, 1, 2)()\ntest.myBind(obj, 1, 2)(3, 4)\n\n\n\n\n\n// è¾“å‡ºï¼Œä»ä¸Šåˆ°ä¸‹ï¼ŒæŒ‰é¡ºåºæ’åˆ—\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°:\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: 1,2,3\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°:  a => æ²¡é”™å°±æ˜¯æˆ‘\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: 1,2,3  a => æ²¡é”™å°±æ˜¯æˆ‘\n\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°:\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°:\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: 1\n\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°:\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: 1, 2\n// æˆ‘æ˜¯: zhangsan, æˆ‘æ”¶åˆ°äº†ä¸€äº›å‚æ•°: 1, 2, 3, 4\n\n```\n\n\n\n\n\nå‚è€ƒæ–‡çŒ®ï¼š\n\n* [jsåŸå‹ä¸­çš„this](https://www.jianshu.com/p/c0af837a6e23)","tags":["javascript"],"categories":["js"]},{"title":"ä»£ç å¯è¯»æ€§","url":"/2022/06/22/notes/ä»£ç å¯è¯»æ€§/","content":"> å¯¹è½¯ä»¶æ¥è¯´ï¼Œé€‚å½“çš„è§„èŒƒå’Œæ ‡å‡†ç»ä¸æ˜¯æ¶ˆç­ä»£ç å†…å®¹çš„åˆ›é€ æ€§ã€ä¼˜é›…æ€§ï¼Œè€Œæ˜¯é™åˆ¶è¿‡åº¦ä¸ªæ€§åŒ–ï¼Œä»¥ä¸€ç§æ™®éè®¤å¯çš„ç»Ÿä¸€æ–¹å¼ä¸€èµ·åšäº‹ï¼Œæå‡åä½œæ•ˆç‡ã€‚ä»£ç çš„å­—é‡Œè¡Œé—´æµæ·Œçš„æ˜¯è½¯ä»¶ç”Ÿå‘½ä¸­çš„è¡€æ¶²ï¼Œè´¨é‡çš„æå‡æ˜¯å°½å¯èƒ½å°‘è¸©å‘ï¼Œæœç»è¸©é‡å¤çš„å‘ï¼Œåˆ‡å®æå‡è´¨é‡æ„è¯†ã€‚       â€”â€”ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œã€‹\n\n<!-- more -->\n### ä¸€è‡´æ€§\n\nä¸åŒå¼€å‘è€…å¯¹åŒä¸€äº‹ç‰©ä¼šæœ‰ä¸åŒçš„ç†è§£ï¼Œå› æ­¤å¯¹äºå…³é”®ä¸šåŠ¡åç§°çš„å‘½åéœ€è¦ç»Ÿä¸€ï¼Œä½¿æ•´ä¸ªé“¾è·¯ä¿æŒä¸€è‡´æ€§ã€‚\n\n### æœ‰æ„ä¹‰ä¸”ç®€çŸ­\n\nå‘½åè¿‡é•¿æ„å‘³ç€è¯¥æ–¹æ³•å¹²çš„äº‹å¤ªå¤šï¼Œéœ€è¦æ€è€ƒæ˜¯å¦å¯ä»¥æ‹†åˆ†æ–¹æ³•ï¼Œæ–¹æ³•æ—¶å€™ç¬¦åˆã€å•ä¸€èŒè´£ã€è®¾è®¡åŸåˆ™\n\n### å‘½åè§„èŒƒ\n\næ–¹æ³•åã€å‚æ•°åã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡éƒ½ç»Ÿä¸€ä½¿ç”¨lowerCamelCaseé£æ ¼ã€‚\n\nå¸¸é‡åº”å…¨éƒ¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€\n\n### ç¬¦åˆé˜…è¯»ä¹ æƒ¯\n\næ¡ä»¶åˆ¤æ–­çš„æ—¶å€™ä¼˜å…ˆåˆ¤æ–­å¼‚å¸¸æƒ…å†µæå‰è¿”å›ã€‚\n\nå¦‚æœifä¸­çš„æ¡ä»¶è¡¨è¾¾å¼æ¯”è¾ƒå¤æ‚ï¼Œå°†å¤æ‚çš„æ¡ä»¶è¡¨è¾¾å¼å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å‡½æ•°åæ¥è§£é‡Šè¡¨è¾¾å¼çš„å«ä¹‰ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ã€ç­–ç•¥æ¨¡å¼ã€è®¾è®¡åŸåˆ™ã€‚\n\n\n\nå¥½çš„ä»£ç é‡æ„åŸå› ï¼šå­¦ä¹ ã€é›†æˆã€ä¼˜åŒ–ï¼›\n\nå·®çš„ä»£ç é‡æ„åŸå› ï¼šå¸‚åœºå˜åŒ–ã€éœ€æ±‚å˜åŒ–ã€æ¶æ„æˆ–è®¾è®¡é—®é¢˜ã€ä»£ç ç¼ºé™·ï¼›\n\n\n\n","tags":["javascript"],"categories":["notes"]},{"title":"å¾®ä¿¡è°ƒæ•´å­—ä½“å¤§å°å¯¼è‡´h5æ’ç‰ˆé”™ä¹±é—®é¢˜è§£å†³æ–¹æ¡ˆ","url":"/2022/05/23/wechat/wx-html/","content":"\næŠŠä¸‹é¢ä»£ç æ”¾åˆ°åˆé€‚ä½ç½®ï¼Œåˆ—å¦‚app.vueå³å¯\n\niOS:\n\n```javascript\nbody {\n  -webkit-text-size-adjust: 100% !important;\n  text-size-adjust: 100% !important;\n  -moz-text-size-adjust: 100% !important;\n}\n```\n<!-- more -->\n\n\nAndroid:\n\n```javascript\nfunction handleFontSize() {\n  // è®¾ç½®ç½‘é¡µå­—ä½“ä¸ºé»˜è®¤å¤§å°\n  WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize' : 0 })\n  // é‡å†™è®¾ç½®ç½‘é¡µå­—ä½“å¤§å°çš„äº‹ä»¶\n  WeixinJSBridge.on('menu:setfont', function() {\n    WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize' : 0 })\n  })\n}\nif (typeof WeixinJSBridge === \"object\" && typeof WeixinJSBridge.invoke === \"function\") {\n  handleFontSize()\n} else {\n  document.addEventListener(\"WeixinJSBridgeReady\", handleFontSize, false)\n}\n```\n\n","tags":["wechat"],"categories":["wechat"]},{"title":"Vueæºç ä¹‹init","url":"/2022/04/10/vue/vue-init/","content":"#### 1.Vue\n\n```javascript\n// src/core/instance/index.js\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\nstateMixin(Vue)\neventsMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n```\n<!-- more -->\né¦–å…ˆå®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°`Vue`ï¼Œæ‰§è¡Œ`initMixin`ã€`stateMixin`ç­‰åˆå§‹åŒ–æ–¹æ³•ï¼›ä¹‹åç”¨æˆ·è°ƒç”¨`new Vue()`å°±ä¼šå®ä¾‹åŒ–Vueä¸”æ‰§è¡Œ`_init`æ–¹æ³•ï¼Œä¸‹é¢çœ‹\\_initæ–¹æ³•åšäº†ä»€ä¹ˆ\n\n#### 2.initMixin\n\n```javascript\n// src/core/instance/init.js\n// åœ¨initMixinæ—¶ä¼šç»™Vueçš„åŸå‹ä¸Šæ·»åŠ _initæ–¹æ³•\nexport function initMixin (Vue: Class<Component>) {\n  Vue.prototype._init = function (options?: Object) {\n    const vm: Component = this\n    // a uid\n    vm._uid = uid++\n\n   \t...\n    \n    // åˆå¹¶å‚æ•°\n    vm.$options = mergeOptions(\n      resolveConstructorOptions(vm.constructor),\n      options || {},\n      vm\n    )\n    \n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    initRender(vm)\n    callHook(vm, 'beforeCreate')\n    initInjections(vm) // resolve injections before data/props\n    initState(vm)\n    initProvide(vm) // resolve provide after data/props\n    callHook(vm, 'created')\n\n    ...\n    \n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨`callHook`è§¦å‘`beforeCreate`æ—¶å€™å¹¶æ²¡æœ‰`initState`ï¼Œåªæ˜¯åˆå§‹åŒ–äº†åŸºç¡€å‚æ•°ï¼Œæ‰€ä»¥åœ¨`beforeCreate`æ—¶å€™æ— æ³•è®¿é—®åˆ°data/method/computed/watchç­‰æ–¹æ³•","tags":["vueæºç "],"categories":["vue"]},{"title":"new Vue()çš„è¿‡ç¨‹","url":"/2022/03/10/vue/new Vue()/","content":"Vue: `vue@2.6.14`\n\n1. `'core/instance/index'`,å®šä¹‰`Vue`\n   * `initMixin`ç»™Vueçš„åŸå‹å®šä¹‰`_init`\n     * `_init` å±æ€§çš„åˆå§‹åŒ–\n       * `mergeOptions`åˆå¹¶å‚æ•°\n       * `initLifecycle`åˆå§‹åŒ–æŒ‚è½½ç”Ÿå‘½å‘¨æœŸç›¸å…³å±æ€§\n       * `initEvents`åˆå§‹äº‹ä»¶ç›¸å…³å±æ€§ï¼Œå½“çˆ¶ç»„ä»¶ç»‘å®šåˆ°å­ç»„ä»¶æ—¶ï¼Œä¾›å­ç»„ä»¶è°ƒç”¨\n       * `initRender`åˆå§‹åŒ–slotæ’æ§½\n       * `callHook(vm, 'beforeCreate')` ç”Ÿå‘½å‘¨æœŸè°ƒç”¨\n       * `initState` åˆå§‹åŒ–data/method/computed/watch\n       * `initProvide` åˆå§‹åŒ–provide\n       * `callHook(vm, 'created')` createdç”Ÿå‘½å‘¨æœŸè°ƒç”¨\n       * `$mount` è°ƒç”¨mountComponent\n       <!-- more -->\n   * `stateMixin` åˆå§‹åŒ–dataDefï¼ŒpropsDefçš„getæ–¹æ³•\n     * `Vue.prototype.$set = set` æŒ‚è½½å…¨å±€$setæ–¹æ³•\n     * `Vue.prototype.$delete = del` æŒ‚è½½å…¨å±€$deleteæ–¹æ³•\n     * `Vue.prototype.$watch` æŒ‚è½½å…¨å±€$watchæ–¹æ³•ï¼ŒcreateWatcher\n   * `eventsMixin` åˆå§‹åŒ–eventbus, æŒ‚è½½`$on, $once, $emit, $off` æ–¹æ³•\n   * `lifecycleMixin` åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸç›¸å…³\n     * `Vue.prototype._update` æ‰“è¡¥ä¸\\_\\_patch\\_\\_ï¼Œæ›´æ–°æ•°æ®\n     * `Vue.prototype.$forceUpdate` Vue å®ä¾‹é‡æ–°æ¸²æŸ“æ–¹æ³•\n     * `Vue.prototype.$destroy` é”€æ¯\n     * `mountComponent` æŒ‚è½½ç»„ä»¶\n       * ç¼–è¯‘templateæˆrenderå‡½æ•°\n       * `callHook(vm, 'beforeMount')` è§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­\n       * `new Watcher(vm, updateComponent)` ç›‘å¬vmï¼Œå¦‚æœå·²ç»æŒ‚è½½ä¸”æœªé”€æ¯ç»„ä»¶ï¼Œåˆ™ä¼šè§¦å‘é’©å­`callHook(vm, 'beforeUpdate')`\n       * `updateComponent` æ›´æ–°æ•°æ®ï¼Œè°ƒç”¨`_update`\n       * `callHook(vm, 'mounted')` æ›´æ–°å®Œæ¯•æ•°æ®åï¼Œè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­\n   * `renderMixin` æ¸²æŸ“DOMç›¸å…³\n     * `Vue.prototype.$nextTick` åˆå§‹åŒ–nextTickæ–¹æ³•\n     * `Vue.prototype._render` renderæ–¹æ³•\n\n\n\n### ç”Ÿå‘½å‘¨æœŸ\n\n![new Vue()](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202203081423948.png)\n\n","tags":["vueæºç "],"categories":["vue"]},{"title":"å°ç±³T500ç”µåŠ¨ç‰™åˆ·æ›´æ¢ç”µæ± ","url":"/2022/02/10/notes/mi-T500/","content":"\n#### æ›´æ¢ææ–™å‡†å¤‡\n\n* 14500é”‚ç”µæ± (å¸¦é•ç‰‡)\n* èºä¸åˆ€\n* ç„Šæ¥å·¥å…·\n<!-- more -->\n\n![å›¾ä¸€](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281405875.jpeg)\n\n> å°ç±³T500ä½¿ç”¨çš„æ˜¯ä¸€é¢—14500å¯å……ç”µé”‚ç”µæ± (700mAhï¼Œå›¾ä¸€ä¸‹)ï¼Œç”¨äº†ä¸€å¹´ä¹‹ååªèƒ½åšæŒä¸¤æ¬¡å°±æç¤ºå……ç”µï¼Œåªèƒ½ç€æ‰‹æ›´æ¢ç”µæ± (å›¾ä¸€ä¸Šï¼Œ1000mAhæ›¿ä»£ç”µæ± )\n\n#### æ‹†è§£æ­¥éª¤\n\n1. T500æ•´ä½“å…‰æ»‘æ— ä»ä¸‹æ‰‹ï¼Œæ‹†æœºéœ€ä»åº•éƒ¨å…¥æ‰‹ï¼Œæœ€ä¸‹é¢çš„å«ç‰‡éœ€è¦å…ˆå–å‡ºæ¥ï¼Œå–å‡ºåä¼šéœ²å‡ºå›ºå®šèºä¸ã€‚å«ç‰‡æ¯”è¾ƒéš¾å–ï¼Œåˆšå¼€å§‹ç”¨çš„çƒ­ç†”èƒ¶ï¼Œä½†æ˜¯ç²˜æ€§ä¸å¤Ÿï¼Œå–ä¸å‡ºæ¥ï¼Œä¹‹åå°è¯•ç¾å·¥åˆ€æ•²ï¼Œä½†æ˜¯ç¼éš™å¤ªå°æ²¡æ³•æï¼Œæœ€åä½¿ç”¨èºä¸åˆ€æ‹§å…¥ä¸€é¢—èºä¸(å¼€çº¢é…’çš„åŠæ³•)å–å‡ºæ¥![img](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281419590.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg)\n\n2. èºä¸æ‹§æ‰åï¼Œå…ˆæŠŠé¢œè‰²ç¯å–æ‰,ä¹‹åå°å¿ƒå–æ‰å°¾éƒ¨(å°¾éƒ¨æœ‰ç”µç£å……ç”µçš„çº¿åœˆï¼Œæš´åŠ›æ‹†è§£æœ‰æ–­æ‰é£é™©ï¼Œæ–­æ‰éœ€è¦é‡æ–°ç„Šæ¥ï¼Œé—®é¢˜ä¸å¤§)![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281408645.jpeg)\n\n3. å–æ‰å°¾éƒ¨åï¼Œéœ€è¦å¡ç€ä¸‹å›¾ä¸¤è¾¹çš„ç™½è‰²å‡¸èµ·ï¼Œå‡¸èµ·éƒ¨åˆ†æ˜¯ç´§ç´§å¡ç€æ¡¶å£çš„ï¼Œä½¿ç”¨é•Šå­æˆ–è€…æ’¬æ£’ä¸¤è¾¹ç¿˜èµ·ä¸€ç‚¹ï¼Œä¹‹åé¡¶ç€å¤´éƒ¨å°±å¯ä»¥é¡¶å‡ºæ¥äº†ï¼Œä¹‹åæ…¢æ…¢æ‹–åŠ¨æŠŠç‰™åˆ·ä¸»ä½“æ‹¿å‡ºæ¥![å°¾éƒ¨å……ç”µçº¿åœˆ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281445076.JPG)\n\n4. åŠ çƒ­ç„Šæªï¼ŒèåŒ–æ­£è´Ÿæç„Šé”¡åå¸é”¡å™¨å¸èµ°ï¼Œå–å‡ºç”µæ± ![ç‰™åˆ·ä¸»ä½“](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281445817.JPG)\n\n5. æ›´æ¢ç”µæ± ï¼ŒæŠŠåŸæœ‰çš„æ­£è´Ÿæç»ç¼˜è´´ï¼Œè´´åˆ°æ–°ç”µæ± ä¸Šï¼Œç„Šæ¥æ­£è´Ÿæé•ç‰‡ï¼Œå¼€æœºæµ‹è¯•![æ–°ç”µæ± ç„Šæ¥](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202202281447923.jpeg)\n\n6. æµ‹è¯•æ­£å¸¸åæŒ‰é¡ºåºè£…æœºå³å¯ï¼Œæ³¨æ„é®å…‰ç½©ï¼Œå«å­ç­‰ä¸è¦å¿˜è®°è¿˜åŸ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","categories":["notes"]},{"title":"JavaScriptè¯­è¨€ç²¾ç²¹","url":"/2021/12/30/notes/JavaScriptè¯­è¨€ç²¾ç²¹/","content":"1. [è¿ç®—ç¬¦ä¼˜å…ˆçº§](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)\n![image](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112271513665.png)\n<!-- more -->\n2. ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨.è¡¨ç¤ºæ³•ï¼Œå› ä¸ºå®ƒæ›´ç´§å‡‘ä¸”å¯è¯»æ€§æ›´å¥½ï¼Œä½†æ˜¯å¦‚æœä½ å°è¯•æ£€ç´¢ä¸€ä¸ªä¸ä¸€å®šå­˜åœ¨çš„å€¼ï¼Œåˆ™éœ€ä½¿ç”¨['string']å†™æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª`undefined`ï¼Œè‹¥å°è¯•ä»`undefined`çš„æˆå‘˜å±æ€§ä¸­å–å€¼ï¼Œåˆ™ä¼šå¯¼è‡´ TypeError å¼‚å¸¸ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡`&&`è¿ç®—ç¬¦é¿å…é”™è¯¯\n   ```javascript\n   const obj = {\n     name: 'zhangsan'\n   }\n   \n   obj.name // 'zhangsan'\n   obj['age'] // undefined\n   obj.hubby.name // throw 'TypeError'\n   obj.hubby && obj.hubby.name // undefiend\n   ```\n   \n3. `for in`è¯­å¥å¯ä»¥éå†ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œè¯¥æšä¸¾è¿‡ç¨‹å°†ä¼šåˆ—å‡ºæ‰€æœ‰çš„å±æ€§â€”â€”åŒ…æ‹¬å‡½æ•°å’ŒåŸå‹ä¸­çš„å±æ€§ã€‚æ‰€ä»¥é€šå¸¸å¯ä»¥ä½¿ç”¨`hasOwnProperty` æ–¹æ³•è¿‡æ»¤ã€‚å±æ€§åçš„**å‡ºç°é¡ºåºæ˜¯ä¸ç¡®å®šçš„**ï¼Œå¦‚æœä½ æƒ³è¦ç¡®ä¿å±æ€§ä»¥ç‰¹å®šé¡ºåºå‡ºç°ï¼Œæœ€é«˜çš„åŠæ³•å°±æ˜¯é¿å…ä½¿ç”¨`for in`è¯­å¥ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œåœ¨å…¶ä¸­ä»¥æ­£ç¡®çš„é¡ºåºä¿å‡½å±æ€§åã€‚é€šè¿‡ for è€Œä¸æ˜¯ for inï¼Œå¯ä»¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„å±æ€§ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå¯èƒ½å‘è§‰å‡ºåŸå‹é“¾ä¸­çš„å±æ€§ï¼Œå¹¶ä¸”æˆ‘ä»¬æŒ‰æ­£ç¡®é¡ºåºå–å¾—äº†å®ƒä»¬çš„å€¼ã€‚\n\n   ```javascript\n   const obj = {.........}\n   const arr = [\n     'name',\n     'age',\n     'height',\n     'weight',\n     'hubby'\n   ]\n   arr.forEach(k => {\n   \tconsole.log(item + ': ' + obj[k])\n   })\n   ```\n\n4. å‡å°‘å…¨å±€å˜é‡æ±¡æŸ“\n\n5. é—­åŒ…çš„å¥½å¤„æ˜¯å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å®šä¹‰ä»–ä»¬çš„å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå˜é‡(é™¤äº† this å’Œ arguments)ï¼Œä¸”å†…éƒ¨å‡½æ•°æ‹¥æœ‰æ¯”å¤–éƒ¨å‡½æ•°æ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸã€‚\n\n6. å‡½æ•°æŸ¯é‡ŒåŒ–ï¼š1.å‚æ•°å¤ç”¨ï¼›2.æå‰è¿”å›ï¼›3å»¶è¿Ÿè®¡ç®—/è¿è¡Œ(bindå°±æ˜¯ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„ä¾‹å­)\n\n7. å¯¹è±¡è¯´æ˜ç¬¦ï¼š\n\n   ```javascript\n   // bad\n   const myObj = maker(a, b, c, d, e)\n   \n   // good\n   const myObj = maker({\n   \tfirst: a,\n     middle: b,\n   \tlast: c,\n     state: d,\n     city: e\n   })\n   // ç°åœ¨å¤šä¸ªå‚æ•°å¯ä»¥æŒ‰ç…§ä»»æ„é¡ºåºæ’åˆ—ï¼Œå¦‚æœmakerå‡½æ•°æ¥å—å‚æ•°ä½¿ç”¨é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä¸€äº›å‚æ•°ä¹Ÿå¯ä»¥å¿½ç•¥è°ƒï¼Œå¹¶ä¸”ä»£ç ä¹Ÿæ›´å®¹æ˜“é˜…è¯»\n   ```\n   \n8. ä¼ªç±»ï¼šå½“ä¸€ä¸ªå‡½æ•°è¢«åˆ›å»ºæ—¶ï¼Œæ–°å‡½æ•°å¯¹è±¡ä¼šè¢«èµ‹äºˆä¸€ä¸ª`prototype`å±æ€§ï¼Œä»–çš„å€¼æ˜¯ä¸€ä¸ªåŒ…å«`constructor`å±æ€§ä¸”å±æ€§å€¼ä¸ºè¯¥æ–°å‡½æ•°çš„å¯¹è±¡ã€‚`prototype`æ˜¯å­˜æ”¾ç»§æ‰¿ç‰¹å¾çš„åœ°æ–¹ã€‚å½“é‡‡ç”¨æ„é€ å™¨è°ƒç”¨æ¨¡å¼ï¼Œå³ç”¨`new`å‰ç¼€è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°æ‰§è¡Œæ–¹å¼ä¼šè¢«ä¿®æ”¹ã€‚æ„é€ å™¨å‡½æ•°å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„å±å®³ï¼Œå¦‚æœä½ åœ¨è°ƒç”¨æ„é€ å™¨å‡½æ•°æ—¶å¿˜è®°åŠ ä¸Š`new`å‰ç¼€ï¼Œé‚£ä¹ˆthiså°†ä¼šç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šï¼Œé€ æˆä¸ä½†æ²¡æœ‰æ‰©å……æ–°å¯¹è±¡ï¼Œåè€Œç ´åäº†å…¨å±€å˜é‡ç¯å¢ƒï¼Œæ‰€ä»¥æ„é€ å™¨å‡½æ•°çº¦å®šæ˜æ˜æˆé¦–å­—æ¯å¤§å†™çš„å½¢å¼(es6çš„classè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸ç”¨newè°ƒç”¨ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚es6çš„classå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä»–çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½es5éƒ½å¯ä»¥åšåˆ°ï¼Œä½†æ˜¯es6çš„classå†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å¯¹å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•)ã€‚\n\n9. åŸå‹ï¼šä¸€ä¸ªæ–°çš„å¯¹è±¡å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæ—§å¯¹è±¡çš„å±æ€§(`Object.creat(parentObj)`)ã€‚ä½ å¯ä»¥é€šè¿‡æ„é€ ä¸€ä¸ªæœ‰ç”¨çš„å¯¹è±¡å¼€å§‹ï¼Œæ¥ç€æ„é€ æ›´å¤šçš„å’Œé‚£ä¸ªå¯¹è±¡ç±»ä¼¼çš„å¯¹è±¡ã€‚è¿™æ ·å¯ä»¥å®Œå…¨é¿å…æŠŠä¸€ä¸ªåº”ç”¨æ‹†è§£æˆä¸€ç³»åˆ—åµŒå¥—æŠ½è±¡ç±»çš„åˆ†ç±»è¿‡ç¨‹ã€‚\n\n10. å‡½æ•°åŒ–ï¼šä¸Šé¢å‡ ç§ç»§æ‰¿æ¨¡å¼çš„ä¸€ä¸ªå¼±ç‚¹å°±æ˜¯æ²¡æ³•ä¿æŠ¤éšç§(ç§æœ‰å˜é‡ã€ç§æœ‰å‡½æ•°)ã€‚å¦‚æœå¯¹è±¡çš„æ‰€æœ‰çŠ¶æ€éƒ½æ˜¯ç§æœ‰çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±æˆä¸ºä¸€ä¸ªã€é˜²ä¼ª(tamper-proof)ã€å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å±æ€§å¯ä»¥è¢«æ›¿æ¢æˆ–åˆ é™¤ï¼Œä½†è¯¥å¯¹è±¡çš„**å®Œæ•´æ€§ä¸ä¼šå—åˆ°æŸå®³**ã€‚\n\n    ```javascript\n    const mammal = function (spec, my = {}) {\n      // myå¯¹è±¡æ˜¯ä¸€ä¸ªä¸ºç»§æ‰¿é“¾ä¸­çš„æ„é€ å™¨æä¾›ç§˜å¯†å…±äº«çš„å®¹å™¨ï¼Œmyå¯¹è±¡å¯ä»¥é€‰æ‹©æ€§ä½¿ç”¨\n      let _this\n      \n      _this = {}\n      // _this = new Object()\n      // _this = Object.creat({})\n    \n    \t// nameå’Œsayingç°åœ¨å°±æ˜¯å®Œå…¨ç§æœ‰çš„ï¼Œåªèƒ½é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•å»è®¿é—®å®ƒï¼Œæ— æ³•ä»å…¶ä»–æ–¹å¼è®¿é—®\n      _this.getName = function () {\n        return spec.name\n      }\n      _this.say = function () {\n    \t\treturn spec.saying || ''\n      }\n        \n      return _this\n    }\n    \n    const myMammal = mammal({ name: 'zhangsan' })\n    \n    // åˆ›å»ºcatç»§æ‰¿ä»–ï¼Œæˆ‘ä»¬çš„catåªéœ€è¦å…³å¿ƒè‡ªèº«å·®å¼‚\n    const cat = function (spec = 'meow') {\n      const _this = mammal(spec)\n      _this.xyz = function () {\n        return 'Hello World'\n      }\n      _this.getName = function () {\n        return 'aaaaaa==' + spec.name\n      }\n      return _this\n    }\n    \n    const myCat = cat({name: 'lisi'})\n    ```\n\n11. æ­£åˆ™å°¾éƒ¨ç¬¦å·æ„ä¹‰: g(global)/i(ignoreCase)/m(multiline)![image-20211229142706807](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112291427083.png)\n\n12. ç”¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡åˆ›å»ºRegExpå¯¹è±¡å…±äº«**åŒä¸€ä¸ªå•åˆ©**ï¼š\n\n    ```javascript\n    // å­—é¢é‡\n    function test () {\n    \treturn /a/gi\n    }\n    \n    const x = test()\n    const y = test()\n    \n    x.lastIndex = 10\n    console.log(y.lastIndex) // 10\n    \n    // new\n    function reg () {\n    \treturn new RegExp(a, 'gi')\n    }\n    \n    const x = reg()\n    const y = reg()\n    \n    x.lastIndex = 8\n    console.log(y.lastIndex) // 0\n    ```\n\n13. é™¤äº†æ§åˆ¶å­—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦å¤–ï¼Œæ‰€æœ‰çš„å­—ç¬¦éƒ½ä¼šè¢«æŒ‰ç…§å­—é¢å¤„ç†ï¼Œä¸‹åˆ—å­—ç¬¦å¦‚æœéœ€è¦æŒ‰ç…§å­—é¢å»åŒ¹é…ï¼Œé‚£ä¹ˆå¿…é¡»è¦ç”¨ä¸€ä¸ª`\\`å‰ç¼€æ¥è¿›è¡Œè½¬ä¹‰ã€‚\n\n    ```javascript\n    \\ / [ ] ( ) { } ? + * | . ^ $\n    ```\n\n14. æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„ï¼š\n\n    1. æ•è·å‹(/([a-z])/)ï¼šä»»ä½•åŒ¹é…è¿™ä¸ªåˆ†ç»„çš„å­—ç¬¦éƒ½ä¼šè¢«æ•è·ã€‚æ¯ä¸ªæ•è·å‹åˆ†ç»„éƒ½è¢«æŒ‡å®šäº†ä¸€ä¸ªæ•°å­—ã€‚åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ç¬¬ä¸€ä¸ªæ•è·(çš„åˆ†ç»„æ˜¯1ï¼Œç¬¬äºŒä¸ªæ•è·(çš„åˆ†ç»„æ˜¯2ã€‚(\\$1....$x)\n    2. éæ•è·å‹(/(?:a)/)ï¼šéæ•è·å‹åˆ†ç»„ä»…åšç®€å•çš„åŒ¹é…ï¼Œå¹¶ä¸ä¼šæ•è·æ‰€åŒ¹é…çš„æ–‡æœ¬ã€‚è¿™ä¼šå¸¦æ¥**å¾®å¼±çš„æ€§èƒ½ä¼˜åŠ¿**ã€‚éæ•è·å‹åˆ†ç»„ä¸ä¼šå¹²æ‰°æ•è·å‹åˆ†ç»„çš„ç¼–å·ã€‚\n    3. å‘å‰æ­£å‘åŒ¹é…(/(?=a)/)ï¼šå®ƒç±»ä¼¼äºéæ•è·å‹åˆ†ç»„ï¼Œä½†åœ¨è¿™ä¸ªç»„åŒ¹é…åï¼Œæ–‡æœ¬ä¼šå€’å›åˆ°å®ƒå¼€å§‹çš„åœ°æ–¹ï¼Œå®é™…ä¸Šå¹¶ä¸ä¼šåŒ¹é…åˆ°ä»»ä½•ä¸œè¥¿ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½ç‰¹æ€§ã€‚\n    4. å‘å‰è´Ÿå‘åŒ¹é…(/(?!a)/)ï¼šå®ƒç±»ä¼¼äºå‘å‰æ­£å‘åŒ¹é…åˆ†ç»„ï¼Œä½†åªæœ‰å½“å®ƒåŒ¹é…å¤±è´¥æ—¶å®ƒæ‰å›ç»§ç»­å‘å‰è¿›è¡ŒåŒ¹é…ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½ç‰¹æ€§\n\n    ```javascript\n    \"abcabc\".match(/(a)(b)(c)/) // [\"abc\", \"a\", \"b\", \"c\"]\n    \"abcabc\".match(/(?:a)(b)(c)/) // [\"abc\", \"b\", \"c\"]\n    \n    '<div>'.match(/<(?=br>)/) // null\n    '<br>'.match(/<(?=br>)/) // [\"<\"]\n    \n    '<div>'.match(/<(?!br>)/) // [\"<\"]\n    '<br>'.match(/<(?!br>)/) // null\n    ```\n\n15. `regexp.exec()`æ˜¯æ­£åˆ™è¡¨è¾¾å¼æœ€å¼ºå¤§(ä¹Ÿæ˜¯æœ€æ…¢)çš„æ–¹æ³•ã€‚å¦‚æœå®ƒæˆåŠŸåŒ¹é…`regexp`å’Œå­—ç¬¦ä¸²`string`ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„ä¸‹æ ‡0çš„å…ƒç´ å°†åŒ…å«æ­£åˆ™è¡¨è¾¾å¼regexpåŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚ä¸‹æ ‡1çš„å…ƒç´ æ˜¯åˆ†ç»„1æ•è·çš„æ–‡æœ¬ï¼Œ2çš„å…ƒç´ æ˜¯åˆ†ç»„2æ•è·çš„æ–‡æœ¬ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœåŒ¹é…å¤±è´¥ï¼Œå®ƒä¼šæ”¾å›`null`ã€‚å¦‚æœregexpå¸¦æœ‰ä¸€ä¸ªgæ ‡è¯†ï¼Œ`regexp.lastIndex`ä¼šè¢«è®¾ç½®ä¸ºè¯¥åŒ¹é…åç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ï¼Œä¸æˆåŠŸåˆ™ä¼šé‡ç½®ä¸º0ã€‚\n\n16. `regexp.test()`æ˜¯æ­£åˆ™è¡¨è¾¾å¼æœ€ç®€å•(ä¹Ÿæ˜¯æœ€å¿«)çš„æ–¹æ³•ã€‚å¦‚æœå®ƒåŒ¹é…æˆåŠŸåˆ™ä¼šè¿”å›`true`ï¼Œå¦åˆ™è¿”å›`false`ã€‚ä¸è¦å¯¹è¿™ä¸ªæ–¹æ³•ä½¿ç”¨gæ ‡è¯†ã€‚\n\n17. ç»Ÿä¸€çš„ä»£ç é£æ ¼....\n\n18. æ¯’ç˜¤ï¼š\n\n    1. å…¨å±€å˜é‡\n    2. è‡ªåŠ¨æ’å…¥åˆ†å·\n\n19. ç³Ÿç²•ï¼š\n\n    1. ==ï¼Œéšå¼è½¬æ¢ï¼š\n       1. å¯¹è±¡å’Œå¸ƒå°”å€¼æ¯”è¾ƒæ—¶ï¼Œä¼šå…ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œåœ¨è½¬æ¢ä¸ºæ•°å­—\n       2. å¯¹è±¡å’Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åä¸¤è€…è¿›è¡Œæ¯”è¾ƒ\n       3. å¯¹è±¡å’Œæ•°å­—æ¯”è¾ƒæ—¶ï¼Œå¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²,ç„¶åè½¬æ¢ä¸ºæ•°å­—ï¼Œå†å’Œæ•°å­—è¿›è¡Œæ¯”è¾ƒ\n       4. å­—ç¬¦ä¸²å’Œæ•°å­—æ¯”è¾ƒæ—¶ï¼Œå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—\n       5. å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼è¿›è¡Œæ¯”è¾ƒæ—¶ï¼ŒäºŒè€…å…¨éƒ¨è½¬æ¢æˆæ•°å€¼å†æ¯”è¾ƒ\n       6. å¸ƒå°”å€¼å’Œæ•°å­—è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¸ƒå°”è½¬æ¢ä¸ºæ•°å­—\n\n    ```javascript\n    '' == 0 // true\n    [1,2,3] == '1,2,3' // true\n    '0' == false // true\n    [] == false // true\n    true == 1 // true\n    ```\n\n    1. with: jsæä¾›äº†withè¯­å¥ï¼Œæœ¬æ„æ˜¯æƒ³ç”¨å®ƒæ¥å¿«æ·çš„è®¿é—®å¯¹è±¡å±æ€§ï¼Œä¸å¹¸çš„æ˜¯ï¼Œä»–çš„ç»“æœæœ‰æ—¶ä¸å¯é¢„æ–™\n    2. eval: evalä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ç»™jsç¼–è¯‘å™¨ï¼Œå¹¶æ‰§è¡Œå…¶ç»“æœã€‚ä½¿ç”¨evalä¼šå¯¼è‡´ä»£ç æ›´åŠ éš¾ä»¥é˜…è¯»ï¼Œä¸”å¯¼è‡´æ€§èƒ½æ˜¾è‘—é™ä½ï¼Œå› ä¸ºå®ƒéœ€è¦è¿è¡Œç¼–è¯‘å™¨ã€‚evalå‡½æ•°å‡å¼±äº†ç¨‹åºçš„å®‰å…¨æ€§ï¼Œå› ä¸ºä»–ç»™æ±‚å€¼çš„æ–‡æœ¬å¤ªå¤šæƒåˆ©ï¼Œè€Œä¸”å°±åƒwithè¯­å¥æ‰§è¡Œæ–¹å¼ä¸€æ ·ï¼Œä»–é™ä½äº†è¯­è¨€çš„æ€§èƒ½\n    3. continue: é‡æ„ç§»é™¤continueåï¼Œæ€§èƒ½ä¼šå¾—åˆ°æ”¹å–„\n    4. ç¼ºå°‘å—çš„è¯­å¥ï¼šè²Œä¼¼åœ¨åšä¸€ä»¶äº‹ï¼Œå®é™…ç¡®å®å¦ä¸€ä»¶äº‹çš„ç¨‹åºæ˜¯éå¸¸éš¾ç†è§£æ¸…æ¥šçš„ã€‚\n\n    ```javascript\n    if (a)\n      t = 1\n    \tfn()\n    \n    // å®ƒçœ‹èµ·æ¥åƒæ˜¯è¦è¿™æ ·:\n    if (a) {\n    \tt = 1\n      fn()\n    }\n    \n    // å®é™…ä¸Šæœ¬æ„æ˜¯\n    if (a) {\n    \tt = 1\n    }\n    fn()\n    ```\n\n    5. ä½è¿ç®—ç¬¦ï¼šåœ¨javaé‡Œï¼Œä½è¿ç®—ç¬¦å¤„ç†çš„æ˜¯æ•´æ•°ï¼Œjaæ²¡æœ‰æ•´å‹ï¼Œåªæœ‰åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚å› æ­¤ï¼Œä½æ“ä½œç¬¦æŠŠå®ƒä»¬çš„æ•°å­—è¿ç®—æ•°å…ˆè½¬æ¢æˆæ•´æ•°ï¼Œæ¥ç€æ‰§è¡Œè¿ç®—ï¼Œæœ€åå†æ¢å›å»ã€‚å†å¤§å¤šæ•°è¯­è¨€ä¸­ï¼Œè¿™äº›ä½è¿ç®—ç¬¦æ¥è¿‘äºç¡¬ä»¶å¤„ç†ï¼Œæ‰€ä»¥éå¸¸å¿«ï¼Œè€Œjsæ‰§è¡Œç¯å¢ƒä¸€èˆ¬æ¥è§¦ä¸åˆ°ç¡¬ä»¶ï¼Œæ‰€ä»¥éå¸¸æ…¢ã€‚\n\n    ```javascript\n    &\t\t\tand æŒ‰ä½ä¸\n    |\t\t\tor  æŒ‰ä½æˆ–\n    ^\t\t\txor æŒ‰ä½å¼‚æˆ–\n    ~\t\t\tnot æŒ‰ä½é\n    >>\t\tå¸¦ç¬¦å·å³ä½ç§»\n    >>>\t\tæ— ç¬¦å·åˆä½ç§»(ç”¨0è¡¥è¶³)\n    <<\t\tå·¦ä½ç§»\n    ```\n","tags":["javascript"],"categories":["notes"]},{"title":"macOS 12 å‡çº§xcode 13åæ— æ³•æ‰“å¼€iOS11.4Simulatorè§£å†³æ–¹æ³•","url":"/2021/11/19/notes/macOS12-xcode13/","content":">macOSå‡çº§åˆ°12 macOS Montereyåï¼Œxcode(version 12)æç¤ºæ— æ³•ä½¿ç”¨ï¼Œéœ€è¦å‡çº§ï¼Œå‡çº§å‰è¿˜èƒ½æ‰“å¼€iOS11.4çš„Simulatorï¼Œå‡çº§å(xcode 13)æç¤ºä¸æ”¯æŒä½ç‰ˆæœ¬iOSï¼Œæœ€ä½æ”¯æŒiOS12ç‰ˆæœ¬ï¼Œä½†æ˜¯é¡¹ç›®ä¸­åˆéœ€è¦ç”¨åˆ°ä½ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚\n<!-- more -->\n1. é¦–å…ˆç¡®ä¿xcodeæœ‰å®‰è£…iOS11.4çš„Simulatorï¼Œè‹¥æ²¡æœ‰åˆ™éœ€è¦`Xcode > Preferences > Components`ä¸‹è½½éœ€è¦çš„Simulator![æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171407668.png)\n2. ä¸‹è½½å®Œæ¯•åï¼Œæ‰“å¼€finderï¼Œcommond+shift+gå¿«é€Ÿå‰å¾€Simulatorå®‰è£…ç›®å½•`/Library/Developer/CoreSimulator/Profiles/Runtimes`ï¼Œé€‰ä¸­å¯¹åº”çš„æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬å³é”®æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œæ‰¾åˆ°`Info.plist`ï¼Œæ‹·è´åˆ°æ¡Œé¢ä¸€ä»½![Info.plist](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171407086.png)\n3. åŒå‡»æ‰“å¼€æ¡Œé¢çš„`Info.plist`ï¼Œé»˜è®¤ä½¿ç”¨Xcodeæ‰“å¼€ï¼Œæ‰¾åˆ°Bundle identifierï¼Œä¿®æ”¹å€¼ï¼Œåœ¨æœ€åé¢åŠ ä¸€ä¸ª-1ï¼Œä½¿ç‰ˆæœ¬æ£€æŸ¥å‡½æ•°æ‰¾ä¸åˆ°å¯¹åº”çš„bundle nameè·³è¿‡æ£€æŸ¥ï¼Œä¿®æ”¹åå¤åˆ¶æ¡Œé¢çš„æ–‡ä»¶å›åˆ°åŸæ¥çš„ä½ç½®è¦†ç›–ç²˜è´´(æ­¤å¤„å¯èƒ½éœ€è¦éªŒè¯æƒé™)![iOS](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171407865.png)\n4. Terminalä¸­è¾“å…¥`open -a Simulator`æ‰“å¼€æ¨¡æ‹Ÿå™¨ï¼Œé€‰æ‹©`File > New Simulator`ï¼Œç‚¹å‡»Createå°±å¯ä»¥åˆ›å»ºä½ç‰ˆæœ¬Simulatoräº†ï¼Œå¦‚æœæ²¡æœ‰è‡ªåŠ¨æ‰“å¼€Simulatorï¼Œåˆ™æ‰‹åŠ¨é€‰æ‹©`File > Open Simulator`æ‰¾åˆ°iOS 11.4å»æ‰“å¼€![Simulator](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171407106.png)\n![iOS 11.4](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171408620.png)\n\nå‚è€ƒï¼šhttps://hiraku.tw/2021/04/6428/","tags":["macOS","Xcode","Simulator"],"categories":["notes"]},{"title":"typecå¿«é€Ÿåˆ†ç¦»çº¿","url":"/2021/10/15/notes/typec-line/","content":"#### ææ–™ï¼š\n\n* èˆªç©ºæ’å¤´\n* typecæ•°æ®çº¿\n* ç”µçƒ™é“ï¼Œç„Šé”¡ã€åŠ©ç„Šå‰‚ç­‰\n<!-- more -->\n#### ç„Šæ¥è¦ç‚¹ï¼š\n\n* èƒ†å¤§å¿ƒç»†ï¼Œæ¸©åº¦åˆé€‚\n* æ³¨æ„ç„Šå¤´ä¸è¦é•¿æœŸé«˜æ¸©ç©ºç½®ï¼Œé•¿æœŸä¸ç”¨å°±è°ƒä½æ¸©åº¦ï¼ŒçŸ­æœŸä¸ç”¨å°±æ³¨æ„åŠæ—¶æŒ‚é”¡\n* è¦ç„Šæ¥çš„åœ°æ–¹æå‰ä¸Šé”¡ï¼Œæ–¹ä¾¿ç„Šæ¥\n* ç„Šæ¥å‰å¯ä»¥ç‚¹ä¸‹æ¾é¦™ï¼Œå»æ‰æ°§åŒ–å±‚å†ä¸Šé”¡\n\n#### æ­¥éª¤ï¼š\n\n1. ç®€å•ç²—æš´ï¼Œç›´æ¥å¹²æ–­ï¼Œç”µçº¿èŠ¯å‰¥ä¸€ç‚¹éœ²å‡ºé“œçº¿å¤´ï¼Œæ–¹ä¾¿ç„Šæ¥\n![æ–­ç‚¹è‡ªå·±å–œæ¬¢å°±å¥½](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171409142.png)\n2. é“œçº¿é•€é”¡ï¼Œé˜²æ­¢ç„Šæ¥æ—¶å€™æ•£å¼€\n![é•€é”¡](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171409132.png)\n3. ç„Šæ¥ä¸¤ä¸ªç‚¹ï¼Œè®°ä½ç„Šæ¥çš„ç‚¹ä½ï¼Œèˆªæ’ä¸Šæœ‰ä¸ªé˜²å‘†æ‰£ï¼Œæ–¹ä¾¿è®°å¿†ï¼Œçº¿åºç„Šé”™å·®ä¸Šæ˜¯ä¸èƒ½ç”¨çš„\n![å›ºå®š](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171409503.png)\n4. ç‚¹ä½ç„Šæ¥å®Œæ¯•ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è™šç„Š\n![æ£€æŸ¥å›ºå®š](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171409468.png)\n5. ç„Šæ¥æ¯å¤´ï¼Œæ“ä½œè·Ÿä¸Šé¢ä¸€ç›´ï¼Œä¸€å®šè¦ç¡®å®šçº¿åºå¯¹é½ï¼Œä¸€å®šè¦ç¡®å®šçº¿åºå¯¹é½ï¼Œä¸€å®šè¦ç¡®å®šçº¿åºå¯¹é½ï¼Œä¿é²œè†œç»•çº¿å¤§æ³•ï¼ˆçº¿æè´¨å¤ªç¡¬ï¼Œæˆ–è€…æˆ‘æ“ä½œæœ‰é—®é¢˜ï¼Œå¤±è´¥äº†XDï¼‰\n![ç»•çº¿](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410189.png)\n5. ä¸Šæœºæ£€æŸ¥ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½ç”¨\n6. æ£€æŸ¥å®Œåå¼€å§‹æ³¨èƒ¶ï¼ŒçŒæ³¨704èƒ¶æˆ–è€…çƒ­ç†”æªå›ºå®šï¼ˆçƒ­ç†”æªå‡å›ºå¤ªå¿«ï¼Œé€‰æ‹©äº†704èƒ¶çŒæ³¨ï¼‰\n![æ³¨èƒ¶](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410506.png)\n7. ç­‰å¾…å‡å›ºåå°±å¯ä»¥æ­£å¸¸ç”¨å•¦\n![æˆå“](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410555.png)\n![æˆå“](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410518.png)\n\n#### æ’¸é”®ç›˜\né”®ç›˜å°±æ¯”è¾ƒç®€å•äº†ï¼Œæ‰¾ä¸€æŠŠå¸¦ä¸»æ§çš„pcbæ¿å­ï¼Œç›´æ¥æ’è½´ç„Šæ¥è½´è„šï¼Œç„Šæ¥é”®ç›˜æ˜¯ä¸ªè€åŠ›æ´»å„¿ï¼Œä¸éš¾ä½†æ˜¯å¤š\n![pcb](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410985.jpeg)\n\n![è¿™æŠŠé”®ç›˜ç”¨çš„ttcé’è½´ï¼Œå£°éŸ³æ¸…è„†ï¼Œæ‰‹æ„Ÿä¸é”™](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171410300.jpeg)","categories":["notes"]},{"title":"xbb-utilså¼€å‘è§„èŒƒ","url":"/2021/08/15/notes/xbb-utils/","content":"ä¸ºä»€ä¹ˆé€‰æ‹©å¼€å‘utilsåŒ…ï¼Ÿ\n\n- æ–¹ä¾¿ä»£ç çš„å¿«é€Ÿç»´æŠ¤\n- æ–¹ä¾¿ä¸€å¥—ä»£ç éƒ¨ç½²å¤šä¸ªé¡¹ç›®ä»¥åŠæ–°é¡¹ç›®çš„å¿«é€Ÿå¯åŠ¨\n- ä¸ºåæœŸéœ€æ±‚è¸©å‘\n<!-- more -->\nä¸ºä»€ä¹ˆé€‰æ‹©tsï¼Ÿ\n\n- æœ‰æ›´åŠ å®‰å…¨çš„é™æ€ç±»å‹æ£€æŸ¥ï¼Œè€Œé™æ€ç±»å‹æ£€æŸ¥æ›´æœ‰åˆ©äºæ„å»ºå¤§å‹é¡¹ç›®\n- å¢åŠ äº†ä»£ç å¯è¯»æ€§\n- æ›´æœ‰å¥½çš„IDEä»£ç æç¤º\n\n### ç‰ˆæœ¬è§„èŒƒ\n\nä¸»ç‰ˆæœ¬å·.å­ç‰ˆæœ¬å·.ä¿®æ­£ç‰ˆæœ¬å·\n\nä¿®å¤bugï¼šä¿®æ­£ç‰ˆæœ¬å·+1\n\næ–°å¢æ–¹æ³•ï¼šå­ç‰ˆæœ¬å·+1ï¼Œä¿®æ­£ç‰ˆæœ¬å·å¤ä½ä¸º 0\n\næ•´ä½“å½±å“ï¼šé‡å¤§ä¿®æ”¹æˆ–å±€éƒ¨ä¿®æ­£ç´¯ç§¯è¾ƒå¤šï¼Œè€Œå¯¼è‡´é¡¹ç›®æ•´ä½“å‘ç”Ÿå…¨å±€å˜åŒ–æ—¶ï¼Œä¸»ç‰ˆæœ¬å·åŠ  1ï¼Œå…¶ä½™ç‰ˆæœ¬å·å¤ä½ä¸º0\n\n|ç‰ˆæœ¬å·|å¤‡æ³¨|\n|---|---|\n|v0.0.1|åŸºç¡€æ­å»º|\n|v0.1.0|æ–°å¢vue2.xè°ƒè¯•é¡µé¢|\n|v0.1.1|ä¿®å¤bugï¼Œå®Œå–„å•æµ‹|\n|v0.1.2|ä¿®å¤bugï¼Œç»´æŠ¤æ›´æ–°|\n|v1.1.0|ä¼˜åŒ–mathæ–¹æ³•ï¼Œæ–°å¢thumbnail, formatToNumber, dealNumber, getGuidæ–¹æ³•|\n\n\n\n### é¡¹ç›®ç»“æ„\n\næ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æœ‰å„è‡ªçš„èŒè´£ï¼Œé¡¹ç›®é…ç½®æ–‡ä»¶å•ç‹¬åˆ—å‡ºæ¥æ–¹ä¾¿ä¿®æ”¹é…ç½®ã€‚æ ¸å¿ƒæ¨¡å—ä¹Ÿå°±åªæœ‰`src`æ–‡ä»¶ï¼Œå…¶ä½™éƒ½æ˜¯è¾…åŠ©ã€‚\n\n```JavaScript\n.\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ babel.config.js\nâ”œâ”€â”€ coverage // å•æµ‹ç»“æœ\nâ”‚   â””â”€â”€ lcov-report\nâ”‚       â””â”€â”€ index.html // å•æµ‹ç»“æœé¡µé¢å…¥å£\nâ”œâ”€â”€ docs // typedocç”Ÿæˆçš„æ–‡æ¡£\nâ”‚   â”œâ”€â”€ assets\nâ”‚   â”œâ”€â”€ globals.html\nâ”‚   â”œâ”€â”€ index.html\nâ”‚   â””â”€â”€ interfaces\nâ”œâ”€â”€ gulpfile.js // gulp+rollupé…ç½®æ–‡ä»¶\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ src // ä»£ç æ¨¡å—\nâ”‚   â”œâ”€â”€ core // æ ¸å¿ƒä»£ç å—\nâ”‚   â”‚   â”œâ”€â”€ env.ts\nâ”‚   â”‚   â””â”€â”€ **.ts\nâ”‚   â”œâ”€â”€ index.ts // å…¥å£æ–‡ä»¶\nâ”‚   â”œâ”€â”€ tools\nâ”‚   â”‚   â””â”€â”€ index.ts // å·¥å…·\nâ”‚   â””â”€â”€ types // å£°æ˜æ–‡ä»¶\nâ”‚       â””â”€â”€ index.ts // interface\nâ”œâ”€â”€ tests // å•å…ƒæµ‹è¯•\nâ”‚   â””â”€â”€ unit // æ ¸å¿ƒæµ‹è¯•æ¨¡å—\nâ”œâ”€â”€ home // vueè°ƒè¯•é¡µé¢\nâ”‚   â””â”€â”€ ** // è°ƒè¯•\nâ”œâ”€â”€ vue.config.js // vueé¡¹ç›®é…ç½®(è°ƒè¯•ç”¨)\nâ”œâ”€â”€ jest.config.js // jestå•æµ‹é…ç½®\nâ”œâ”€â”€ tsconfig.json // tsé…ç½®\nâ”œâ”€â”€ tslint.json // tslinté…ç½®\nâ”œâ”€â”€ .prettierrc // prettieré…ç½®\nâ”œâ”€â”€ .lintstagedrc // lintstageé…ç½®\nâ””â”€â”€ typedoc.json // typedocé…ç½®\n\n```\n\n\n### src\n\n1. æ‰€æœ‰åŠŸèƒ½æ¨¡å—éœ€è¦å¼€å‘åˆ°`src/core/**`ä¸‹ï¼Œæ­¤æ–‡ä»¶ä¸ºæ ¸å¿ƒä»£ç å—ï¼›\n2. å…·ä½“åŠŸèƒ½ç›®å‰åˆ’åˆ†äº†å‡ å¤§ç±»åˆ«`math` `url` `is` `method` `verify`...ç­‰ç­‰ï¼ŒåæœŸæŒ‰éœ€æ·»åŠ ï¼›\n3. `core`ä¸‹çš„æ–¹æ³•éƒ½éœ€è¦å¯¼å‡ºï¼Œä¸”éœ€è¦æ·»åŠ æ³¨é‡Šï¼Œæ³¨é‡Šå‚è€ƒä¸‹å›¾(å›¾1)ï¼Œæ­¤æè¿°ä¸ç”Ÿæˆæ–‡æ¡£ï¼Œæ•…å¯ä»¥å†™çš„æ›´åŠ è¯¦ç»†ï¼›\n4. `core/is.ts`ä¸ºç±»å‹åˆ¤æ–­æ–‡ä»¶ï¼Œæ¨èå¤§å®¶é¡¹ç›®ä¸­éœ€è¦è¿›è¡Œç±»å‹åˆ¤æ–­æ—¶å€™ä½¿ç”¨æ­¤æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¹¦å†™æ–°çš„åˆ¤æ–­ä»£ç ã€‚\n5. `types`æ–‡ä»¶å¤¹æ”¾interfaceæ¥å£å£°æ˜ï¼Œ`interface`æœ‰å‡ ä¸ªå¤§ç±»å¯¹åº”`core`ä¸‹çš„æ–‡ä»¶å‘½(å›¾2)ï¼Œä½œä¸ºå¼€å‘ä¸­çš„ä»£ç æç¤ºæ–‡æ¡ˆï¼Œinterfaceçš„å¤‡æ³¨éœ€è¦ä¹¦å†™çš„æ¸…æ™°ï¼Œä¼ å…¥çš„å‚æ•°ä»¥åŠè¿”å›çš„å‚æ•°ç±»å‹ä¸€å®šè¦æ­£ç¡®ï¼Œæ–‡æ¡ˆä¹Ÿè¦ç›¸å¯¹ç®€ç»ƒã€‚\n6. ç±»å‹è¶…è¿‡3ä¸ª(åŒ…å«3ä¸ª)æ¨èä½¿ç”¨ç±»å‹åˆ«åï¼Œä¾‹å¦‚ï¼š\n\t```TypeScript\n\t// bad\n\texport function checkType(val: Date | string | number): Date {\n\t  // TODO...\n\t}\n\t\n\t// good\n\ttype dateType = Date | string | number\n\texport function checkType(val: dateType): Date {\n\t  // TODO...\n\t}\n\t```\n\t\n\nå¤‡æ³¨ï¼šå› ä¸ºä½¿ç”¨äº†è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…æ–‡æ¡£è¾“å‡ºæ··ä¹±ï¼Œå¤‡æ³¨éœ€è¦ç»Ÿä¸€çš„è§„åˆ™ã€‚é™¤`types`æ–‡ä»¶ä¸‹çš„æ–¹æ³•ï¼Œå…¶ä½™çš„éƒ½éœ€è¦æ·»åŠ `@ignore`é˜»æ­¢æ–‡æ¡£çš„è‡ªåŠ¨ç”Ÿæˆï¼Œ\n\n![å›¾1](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047229.png)\n\n![å›¾2](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047515.png)\n\n### å•æµ‹\n\n1. `unit/index.spec.ts`æ–‡ä»¶ç”¨æ¥æµ‹è¯•å®ä¾‹æ˜¯å¦æŒ‚è½½äº†å¯¹åº”çš„æ–¹æ³•(`/src/core/**.ts`)ï¼Œæ¯æ¬¡åœ¨`core`ä¸‹æ–°å¢æ–¹æ³•åï¼Œéƒ½éœ€è¦åˆ°è¿™ä¸ªæ–‡ä»¶ä¸‹çš„å¯¹åº”å•æµ‹æ¨¡å—ä¸­æ·»åŠ æµ‹è¯•å®ä¾‹ï¼Œç”¨äºç¡®ä¿å®ä¾‹æœ‰æ­¤æ–¹æ³•ï¼Œç›¸å½“äºåŒé‡ä¿é™©ï¼›\n2. `unit/core/**.spec.ts`ä¸ºå¯¹åº”çš„`core`ä¸‹çš„æ ¸å¿ƒå•æµ‹æ–‡ä»¶ï¼Œæ¯ä¸ªå•æµ‹æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¤§çš„`describe`åŒ…è£¹æ•°ä¸ª`it`ï¼Œæ–¹ä¾¿å•æµ‹æŠ¥é”™æ—¶ï¼Œå®šä½å…·ä½“å“ªä¸ªæ–‡ä»¶ä¸‹çš„å“ªä¸ªæ–¹æ³•æŠ¥é”™ï¼Œé”™è¯¯æ—¥å¿—ä¼šè¾“å‡º`describe`å’Œ`it`çš„æè¿°æ–‡æ¡ˆï¼›\n\t![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047549.png)\n3. å•æµ‹æ–‡ä»¶éœ€è¦æŠŠè¦æµ‹è¯•çš„ä»£ç ä¸­çš„æ¯ä¸€ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸€è¡Œä»£ç ï¼Œæ¯ä¸€ä¸ªåˆ¤æ–­éƒ½è¦è¦†ç›–ï¼Œéœ€è¦å®Œæˆæ–¹æ³•è¦†ç›–100%ï¼Œåˆ†æ”¯è¦†ç›–98%ï¼Œè¡Œæ•°è¦†ç›–100%çš„æ¡ä»¶ï¼Œæ¨èå…¨éƒ¨100%ï¼›\n\t![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047925.png)\n4. å•æµ‹ç»“æœå¯ä»¥åœ¨æ§åˆ¶å°æˆ–è€…`coverage/lcov-report/index.html`æŸ¥çœ‹è¯¦æƒ…ã€‚\n\t![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047418.png)\n\t- ç¬¬ä¸€è¡Œ10x ä»£è¡¨å½“å‰è¡Œèµ°äº†10æ¬¡\n\t- é»„è‰²img[0]è¡¨ç¤ºå•æµ‹è¿™è¡Œä»£ç æ²¡æœ‰è¦†ç›–åˆ°\n\t- `if`å‰çš„Eæ ‡è¯†ï¼Œè¯´æ˜æ­¤`if`åˆ¤æ–­çš„`else`æ¡ä»¶æ²¡æœ‰è¦†ç›–\n\t- çº¢è‰²åˆ™è¡¨ç¤ºæ•´è¡Œ(å¤§æ®µä»£ç )æ²¡æœ‰è¦†ç›–åˆ°ï¼Œè€ƒè™‘æ˜¯å¦æ¼å†™è¯¥æ–¹æ³•çš„å•æµ‹\n\n### è°ƒè¯•\n\næœ¬é¡¹ç›®ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œå·²é›†æˆvue2.xï¼Œå¯ä»¥é€šè¿‡`npm run serve`å¯åŠ¨vueé¡¹ç›®ã€‚\n\nvueé¡¹ç›®ç›®å½•ä¸º`home/*`ã€‚\n\n### ä½¿ç”¨\n\néœ€è¦ç”¨åˆ°çš„é¡¹ç›®ï¼Œä½¿ç”¨`npm i -S xbb-utils`æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œä¹‹åå†éœ€è¦ç”¨åˆ°çš„é¡µé¢`import xbb from 'xbb-utils'`\n\n![ä»£ç æç¤º](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047096.png)\n\n### åŠŸèƒ½å¼€å‘\n\n1. é¦–å…ˆéœ€è¦åŸºäºè¿œç«¯masteræ‹‰å–æœ€æ–°ä»£ç åˆ†æ”¯\n2. æ–°å»ºå¼€å‘åˆ†æ”¯ï¼Œä¸€èˆ¬ä¸ºfeature/å¼€å‘åˆ†æ”¯åçš„æ ¼å¼`git checkout -b feature/xxxxx`\n3. æ¨é€å¼€å‘åˆ†æ”¯åˆ°è¿œç«¯å¹¶è¿½è¸ªå…³ç³»`git push --set-upstream origin feature/xxxxx`\n4. enjoy your coding...\n\nps: å¦‚æœæœ‰å¥½çš„ç‚¹å­ä½†æ˜¯æ²¡æœ‰æ—¶é—´å¼€å‘ï¼Œå¯ä»¥å†gitlabæäº¤issues\n\n### å¼€å‘å®Œæˆ\n\n1. å¼€å‘å®Œæˆåéœ€è¦å†è·‘ä¸€éå•æµ‹ï¼Œç¡®ä¿é€šè¿‡ç‡ä¸º100%\n2. æ£€æŸ¥æ— è¯¯ï¼Œæ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå»gitlabæäº¤MR(merge request)\n3. å¾…ç®¡ç†å‘˜å®¡æ ¸æ— è¯¯åå‘å¸ƒï¼Œä¼šåœ¨ç¾¤é‡Œé€šçŸ¥æœ€æ–°ç‰ˆæœ¬å·ï¼ŒåŠæ—¶æ›´æ–°åˆ°æœ€è¿‘ç‰ˆæœ¬å³å¯\n\n\n\n","tags":["typescript","jest","npm","vue2","git","vue"],"categories":["notes"]},{"title":"å†…å­˜æ³„æ¼æ’æŸ¥","url":"/2021/08/10/vue/memory/","content":"### å‰è¨€\n\nç›®å‰webç«¯åœ¨æµè§ˆå™¨ä¸­æ“ä½œæ—¶ï¼Œä¼šå­˜åœ¨æ˜æ˜¾çš„å¡é¡¿ï¼Œè€Œä¸”ä¼šè¶Šç”¨è¶Šå¡ï¼Œåˆæ­¥æ€€ç–‘æ˜¯å†…å­˜æ³„æ¼å¯¼è‡´ã€‚\n\n<!-- more -->\n\n### é—®é¢˜æ’æŸ¥\n\n#### 1. ä¸æ–­é‡å¤æ‰“å¼€ã€å…³é—­é¡µé¢ï¼Œå‘ç°å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼›\n\n\n\nåˆå§‹å†…å­˜å ç”¨ï¼š\n\n![img](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202207061659725.png)\n\n\n\n\n\nä¸€é¡¿æ“ä½œä¹‹åï¼š\n\n![img](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202207061658631.png)\n\n\n\næ’æŸ¥å ç”¨å†…å­˜è¾ƒå¤§çš„æ•°æ®ç‚¹ï¼š\n\n![img](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202207061658627.png)\n\n\n\n\n\n#### 2.å›¾è¡¨ä¸­å¿ƒæ¥å›åˆ‡æ¢ä¸åŒå›¾è¡¨ï¼Œä¼šæœ‰å†…å­˜å¢åŠ æƒ…å†µ\n\nå¯èƒ½åŸå› ï¼š\n\n1. é¡µé¢ä¸­æœ‰æ·»åŠ è‡ªå®šä¹‰çš„ç›‘å¬äº‹ä»¶ï¼Œä½†æ˜¯é”€æ¯æ—¶æ²¡æœ‰ç§»é™¤äº‹ä»¶\n2. echartsåœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™å¯èƒ½æ²¡æœ‰æ¸…é™¤å¼•ç”¨ï¼Œç»„ä»¶é”€æ¯æ—¶éœ€è¦è°ƒç”¨disposeé”€æ¯å®ä¾‹\n\n\n\n\n\nå…³äºå†…å­˜æ³„æ¼çš„æ’æŸ¥æ–¹æ³•å¯å‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼š\n\n1. https://zhuanlan.zhihu.com/p/26269860\n2. https://zhuanlan.zhihu.com/p/67843006\n3. https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management\n\n","tags":["vue","memory"],"categories":["vue"]},{"title":"inputè¶…è¿‡10^20ç§‘å­¦è®°æ•°æ³•çš„è§£å†³æ–¹æ¡ˆ","url":"/2020/11/13/js/inputè¶…è¿‡10^20ç§‘å­¦è®°æ•°æ³•çš„è§£å†³æ–¹æ¡ˆ/","content":">é¡¹ç›®ä¸­ç”¨åˆ°input type=\"number\" è¾“å…¥æ¡†å¦‚æœæ•°å€¼è¶…è¿‡äº†10çš„20æ¬¡æ–¹ä¼šæ˜¾ç¤ºæˆ10exxxæˆ–è€…10e+xxx \n>è§£å†³æ–¹æ¡ˆï¼š\n>1.è¯´æœäº§å“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå­˜åœ¨å¤§äº10çš„20æ¬¡æ–¹æˆ–è€…å°äºæ˜¯çš„è´Ÿ10æ¬¡æ–¹çš„å€¼\n>2.è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼å±•ç¤º\n\nç½‘ä¸Šæ‰¾çš„ä¸æ˜¯è¿™ä¸ªä¸åŒ¹é…å°±æ˜¯é‚£ä¸ªç»“æœä¸å¯¹ï¼Œé‚£å¹²è„†è‡ªå·±å†™ä¸ªå¥½äº†\n<!-- more -->\n```javascript\nfunction ScientificNumber (num) {\n    if (!num) return num\n    const str = num.toString()\n    const reg = /^(\\d+)(\\.\\d+)?(e)([+]?\\d+)$/\n    const reg2 = /^(\\d+)(\\.\\d+)?(e)([-]?\\d+)$/\n    let arr\n    let len\n    let zero = ''\n    if (reg.test(str)) {\n      arr = reg.exec(str)\n      // ä¿ç•™å°æ•°ä½æ•°\n      const arr2 = arr[2] ? arr[2].replace('.', '') : ''\n      // æ­¤å¤„å‡å»arr2çš„é•¿åº¦ä¸ºäº†å…¼å®¹æœ‰å°æ•°æƒ…å†µ\n      len = Math.abs(arr[4]) - (arr2.length || 0)\n      for (var i = 0; i < len; i++) {\n        zero += '0'\n      }\n      return arr[1] + arr2 + zero\n    } else if (reg2.test(str)) {\n      arr = reg2.exec(str)\n      len = Math.abs(arr[4]) - 1\n      const arr2 = arr[2] ? arr[2].replace('.', '') : ''\n      for (let index = 0; index < len; index++) {\n        zero += '0'\n      }\n      return '0.' + zero + arr[1] + arr2\n    } else {\n      return num\n    }\n  }\n```\n\n![æµ‹è¯•ç»“æœ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171510537.png)","tags":["javascript","input"],"categories":["js"]},{"title":"å›è°ƒä¸å¼‚æ­¥ç¼–ç¨‹","url":"/2020/08/07/js/event-loop/","content":"\n#### ä¸€ã€å›è°ƒå‡½æ•°çš„ä½¿ç”¨åœºæ™¯\n\n1. å¼‚æ­¥ç¼–ç¨‹ã€‚\n2. äº‹ä»¶ç›‘å¬ã€å¤„ç†ã€‚\n3. setTimeoutã€setIntervalæ–¹æ³•ã€‚\n4. é€šç”¨åŠŸèƒ½ï¼Œç®€åŒ–é€»è¾‘ã€‚\n<!-- more -->\n#### äºŒã€å¼‚æ­¥ç¼–ç¨‹çš„4ç§æ–¹æ³•\n\n1. å›è°ƒå‡½æ•°ã€‚\n2. äº‹ä»¶ç›‘å¬ã€‚\n3. å‘å¸ƒè®¢é˜…ã€‚\n4. Promiseå¯¹è±¡ã€‚\n\n\n\nå›è°ƒå‡½æ•°æ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ä»£ç æ®µï¼Œå®ƒä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å…¶ä»–çš„ä»£ç ï¼Œå…¶ä½œç”¨æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ–¹ä¾¿è°ƒç”¨è¿™æ®µä»£ç ã€‚\n\n```javascript\nfn1(fn2)\nfunction fn1 () {\n  // to do...\n  fn2()\n}\n\nfunction fn2 () {\n  // to do...\n}\n```\n\n\n\nè¯´åˆ°å¼‚æ­¥ç¼–ç¨‹ï¼Œé‚£ä¹ˆå°±æœ‰å¿…è¦äº†è§£jsçš„äº‹ä»¶å¾ªç¯æœºåˆ¶Event Loop\n\n![image.png](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171427632.png)\n\n#### 1. æ ˆå’Œé˜Ÿåˆ—\n\n![image.png](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171427417.png)\n\næ ˆï¼š    åè¿›å…ˆå‡ºï¼ˆLIFO-last in first outï¼‰:æœ€åæ’å…¥çš„å…ƒç´ æœ€å…ˆå‡ºæ¥ã€‚\n\né˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆFIFO-first in first outï¼‰:æœ€å…ˆæ’å…¥çš„å…ƒç´ æœ€å…ˆå‡ºæ¥ã€‚\n\n#### 2. å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡(æµè§ˆå™¨)\n\nå®é˜Ÿåˆ—ï¼Œmacrotaskã€‚ä¸€äº›å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒä¼šä¾æ¬¡è¿›å…¥macro task queueï¼Œç­‰å¾…åç»­è¢«è°ƒç”¨ï¼š\n\n- setTimeoutå’ŒsetInterval\n- requestAnimationFrame\n- I/O\n- UI rendering\n\nå¾®é˜Ÿåˆ—ï¼Œmicrotaskã€‚ å¦ä¸€äº›å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒä¼šä¾æ¬¡è¿›å…¥micro task queueï¼Œç­‰å¾…åç»­è¢«è°ƒç”¨ï¼š\n\n- Promise.then\n- Object.observe\n- MutationObserver\n\næ‰§è¡Œé¡ºåºï¼š\n\n1. æ‰§è¡Œå…¨å±€ScriptåŒæ­¥ä»£ç ï¼Œè¿™äº›åŒæ­¥ä»£ç æœ‰ä¸€äº›æ˜¯åŒæ­¥è¯­å¥ï¼Œæœ‰ä¸€äº›æ˜¯å¼‚æ­¥è¯­å¥ï¼ˆæ¯”å¦‚setTimeoutç­‰ï¼‰ï¼Œé‡åˆ°å¼‚æ­¥ä»£ç æ ¹æ®ä¸Šè¿°ä»»åŠ¡åˆ’åˆ†åˆ°å¯¹åº”é˜Ÿåˆ—ä¸­ï¼›\n2. å…¨å±€Scriptä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨æ ˆStackä¼šæ¸…ç©ºï¼›\n3. ä»å¾®é˜Ÿåˆ—microtask queueä¸­å–å‡ºä½äºé˜Ÿé¦–çš„å›è°ƒä»»åŠ¡ï¼Œæ”¾å…¥è°ƒç”¨æ ˆStackä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œåmicrotask queueé•¿åº¦å‡1ï¼›\n4. ç»§ç»­å–å‡ºä½äºé˜Ÿé¦–çš„ä»»åŠ¡ï¼Œæ”¾å…¥è°ƒç”¨æ ˆStackä¸­æ‰§è¡Œï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°ç›´åˆ°æŠŠmicrotask queueä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ã€‚ï¼ˆå³æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ³¨æ„ï¼šå¦‚æœåœ¨æ‰§è¡Œmicrotaskçš„è¿‡ç¨‹ä¸­ï¼Œåˆäº§ç”Ÿäº†microtaskï¼Œé‚£ä¹ˆä¼šåŠ å…¥åˆ°é˜Ÿåˆ—çš„æœ«å°¾ï¼Œä¹Ÿä¼šåœ¨è¿™ä¸ªå‘¨æœŸè¢«è°ƒç”¨æ‰§è¡Œï¼‰\n5. microtask queueä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ­¤æ—¶microtask queueä¸ºç©ºé˜Ÿåˆ—ï¼Œè°ƒç”¨æ ˆStackä¹Ÿä¸ºç©ºï¼›\n6. å–å‡ºå®é˜Ÿåˆ—macrotask queueä¸­ä½äºé˜Ÿé¦–çš„ä»»åŠ¡ï¼Œæ”¾å…¥Stackä¸­æ‰§è¡Œï¼›\n7. æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨æ ˆStackä¸ºç©ºï¼›\n8. é‡å¤ç¬¬3-7ä¸ªæ­¥éª¤ï¼›\n9. ...\n\nç®€å•æ¥è¯´ï¼Œæ‰§è¡Œä¸»çº¿ç¨‹åŒæ­¥ä»£ç é‡åˆ°å¼‚æ­¥ä»»åŠ¡æŒ‚èµ·åˆ’åˆ†åˆ°å¯¹åº”ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶å¾®ä»»åŠ¡æ¸…ç©ºï¼Œæ‰§è¡Œæ ˆæ¸…ç©ºï¼Œå¼€å§‹æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡åæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—å¹¶æ‰§è¡Œæ¸…ç©ºï¼Œä¹‹åç»§ç»­æ‰§è¡Œå®ä»»åŠ¡ä¾æ¬¡å¾ªç¯ã€‚\n\næ¦‚å¿µæ€§çš„ä¸œè¥¿å°±è¿™ä¹ˆå¤šï¼Œæ¥çœ‹å‡ ä¸ªç¤ºä¾‹ä»£ç ï¼Œæµ‹è¯•ä¸€ä¸‹ä½ æ˜¯å¦æŒæ¡äº†:\n\n```javascript\nconsole.log(1)\n\nsetTimeout(() => {\n  console.log(2)\n  Promise.resolve().then(() => {\n    console.log(3)\n  })\n})\n\nnew Promise((resolve, reject) => {\n  console.log(4)\n  resolve(5)\n}).then(data => {\n  console.log(data)\n  return 6\n}).then(data => {\n  console.log(data)\n})\n\nsetTimeout(() => {\n  console.log(7)\n  Promise.resolve().then(() => {\n    console.log(8)\n  })\n})\n\nconsole.log(9)\n```\n\n","tags":["javascript","event loop"],"categories":["js"]},{"title":"å‰ç«¯æ•°æ®å­˜å‚¨ä¹‹IndexedDB","url":"/2020/08/06/js/indexedDB/","content":"\n##### ä¸€ã€å…³äºå‰ç«¯æ•°æ®å­˜å‚¨å¸¸ç”¨çš„å‡ ä¸ªæ–¹æ¡ˆ\n\n1. Cookie\n2. Web Storage\n3. IndexDB\n<!-- more -->\n##### äºŒã€cookieå’Œstorageå·®å¼‚å¯¹æ¯”\n\n|   ç‰¹ç‚¹   |                      Cookie                      |                         Web Storage                          |                           IndexDB                            |\n| :------: | :----------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |\n| ç”Ÿå‘½å‘¨æœŸ |           å¯è®¾ç½®è¿‡æœŸæ—¶é—´æˆ–è·Ÿéšå½“å‰é¡µé¢           |      localStorage: æ°¸ä¹…æœ‰æ•ˆsessionStorage: è·Ÿéšå½“å‰é¡µé¢      |            æ°¸ä¹…æœ‰æ•ˆï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼ŒåŒlocalStorage            |\n| æ•°æ®å¤§å° |                        4k                        |                            ä¸€èˆ¬5m                            |                    å–å†³äºç¡¬ç›˜çš„å¤§å°çš„50%                     |\n|   å±€é™   | æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦åˆ°headerä¸­ï¼Œä½¿è¯·æ±‚æ•°æ®æ— æ„ä¹‰å¢å¤§ | å¯¹äºObjectç±»å‹æ•°æ®å¿…é¡»jsonåºåˆ—åŒ–æ‰èƒ½å‚¨å­˜ï¼Œä¸”æ˜¯åŒæ­¥æ“ä½œï¼Œå¤§æ•°æ®æ“ä½œä¼šé˜»å¡è¿›ç¨‹ | è‹¥ç£ç›˜æ»¡ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æºå°†é¦–å…ˆè¢«åˆ é™¤ï¼Œç„¶åæ˜¯ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æµè§ˆå™¨ä¸å†è¶…è¿‡é™åˆ¶ã€‚ |\n\n##### ä¸‰ã€IndexDBç‰¹ç‚¹\n\n1. **é”®å€¼å¯¹å‚¨å­˜ã€‚**IndexedDB å†…éƒ¨é‡‡ç”¨å¯¹è±¡ä»“åº“ï¼ˆobject storeï¼‰å­˜æ”¾æ•°æ®ã€‚æ‰€æœ‰ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥ç›´æ¥å­˜å…¥ï¼ŒåŒ…æ‹¬ JavaScript å¯¹è±¡ã€‚å¯¹è±¡ä»“åº“ä¸­ï¼Œæ•°æ®ä»¥\"é”®å€¼å¯¹\"çš„å½¢å¼ä¿å­˜ï¼Œæ¯ä¸€ä¸ªæ•°æ®è®°å½•éƒ½æœ‰å¯¹åº”çš„ä¸»é”®ï¼Œä¸»é”®æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸èƒ½æœ‰é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n2. **å¼‚æ­¥ã€‚** IndexedDB æ“ä½œæ—¶ä¸ä¼šé”æ­»æµè§ˆå™¨ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè¿™ä¸ LocalStorage å½¢æˆå¯¹æ¯”ï¼Œåè€…çš„æ“ä½œæ˜¯åŒæ­¥çš„ã€‚å¼‚æ­¥è®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢å¤§é‡æ•°æ®çš„è¯»å†™ï¼Œé”æ­»ç”¨æˆ·æ“ä½œã€‚\n3. **æ”¯æŒäº‹åŠ¡ã€‚** IndexedDB æ”¯æŒäº‹åŠ¡ï¼ˆtransactionï¼‰ï¼Œè¿™æ„å‘³ç€ä¸€ç³»åˆ—æ“ä½œæ­¥éª¤ä¹‹ä¸­ï¼Œåªè¦æœ‰ä¸€æ­¥å¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å°±éƒ½å–æ¶ˆï¼Œæ•°æ®åº“å›æ»šåˆ°äº‹åŠ¡å‘ç”Ÿä¹‹å‰çš„çŠ¶æ€ï¼Œä¸å­˜åœ¨åªæ”¹å†™ä¸€éƒ¨åˆ†æ•°æ®çš„æƒ…å†µï¼Œæ“ä½œæ•°æ®æ›´å®‰å…¨ã€‚\n4. **æ”¯æŒç´¢å¼•ã€‚** IndexedDB æ•°æ®è¡¨å¯ä»¥å»ºç«‹ç´¢å¼•ï¼Œç´¢å¼•çš„æ„ä¹‰åœ¨äºï¼Œå¯ä»¥è®©ä½ æœç´¢ä»»æ„å­—æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ä»ä»»æ„å­—æ®µæ‹¿åˆ°æ•°æ®è®°å½•ã€‚å¦‚æœä¸å»ºç«‹ç´¢å¼•ï¼Œé»˜è®¤åªèƒ½æœç´¢ä¸»é”®ï¼ˆå³ä»ä¸»é”®å–å€¼ï¼‰ã€‚\n5. **åŒæºé™åˆ¶ã€‚** IndexedDB å—åˆ°åŒæºé™åˆ¶ï¼Œæ¯ä¸€ä¸ªæ•°æ®åº“å¯¹åº”åˆ›å»ºå®ƒçš„åŸŸåã€‚ç½‘é¡µåªèƒ½è®¿é—®è‡ªèº«åŸŸåä¸‹çš„æ•°æ®åº“ï¼Œè€Œä¸èƒ½è®¿é—®è·¨åŸŸçš„æ•°æ®åº“ã€‚\n6. **å‚¨å­˜ç©ºé—´å¤§ã€‚** IndexedDB çš„å‚¨å­˜ç©ºé—´æ¯” LocalStorage å¤§å¾—å¤šï¼Œä¸€èˆ¬æ¥è¯´ä¸å°‘äº 250MBï¼Œå¤§å°ä¸€èˆ¬æ˜¯ç¡¬ç›˜å¤§å°çš„50%ï¼Œè¶…è¿‡å°±ä¼šè§¦å‘æºå›æ”¶ã€‚\n7. **æ”¯æŒäºŒè¿›åˆ¶å‚¨å­˜ã€‚** IndexedDB ä¸ä»…å¯ä»¥å‚¨å­˜å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥å‚¨å­˜äºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBuffer å¯¹è±¡å’Œ Blob å¯¹è±¡ï¼‰ã€‚\n\n##### å››ã€IndexDBç”¨æ³•\n\nIndexDBå·²ç»è¢«å°è£…æŠ½ç¦»æˆä¸€ä¸ªä¸ªçš„APIï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨æµè§ˆå™¨APIã€‚\n\næ–°å»ºæ•°æ®åº“ï¼Œopenæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•° ä¸€ä¸ªæ˜¯æ•°æ®åº“åå­— ç¬¬äºŒä¸ªæ˜¯ç‰ˆæœ¬å·ï¼Œæ•´æ•°ï¼Œé»˜è®¤ä¸º1æˆ–å½“å‰ç‰ˆæœ¬\n\nè‹¥æ²¡æœ‰å¯¹åº”åº“åçš„æ•°æ®åº“åˆ™ä¼šè¿›è¡Œæ–°å»ºæ•°æ®åº“æ“ä½œ\n\nopenæ–¹æ³•è¿”å›ä¸€ä¸ªIDBRequestå¯¹è±¡ï¼Œå¯¹è±¡é€šè¿‡**errorã€successã€upgradeneeded**ï¼Œå¤„ç†æ‰“å¼€æ•°æ®åº“çš„æ“ä½œç»“æœ\n\n```javascript\nlet request = window.indexedDB.open(databaseName, version)\nlet db\n\nrequest.onerror = (event) => {\n  console.log('æ•°æ®åº“æ‰“å¼€æŠ¥é”™', event)\n}\n\nrequest.onsuccess = () => {\n  db = request.result\n  console.log('æ•°æ®åº“æ‰“å¼€æˆåŠŸ', db)\n}\n\nrequest.onupgradeneeded = ({ target: { result } }) => {\n  // changing objectStore data is done here, as opposed to a transaction enum:\n  db = result\n  console.log('æ•°æ®åº“å‡çº§', db)\n}\n```\n\n![1](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/MeYVOLxGWMYAOpz2/img/66cc1241-764f-49f5-ba5c-f03599eb3a3e.png)\n\nç°åœ¨ï¼Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªåå­—å«åšdemoBaseçš„æ•°æ®åº“ï¼Œé‚£ä¹ˆå…‰æœ‰æ•°æ®åº“æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ–°å»ºå¯¹è±¡ä»“åº“(object store)ç±»ä¼¼äºMySQLçš„è¡¨\n\n> è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä»“åº“å¿…é¡»åœ¨upgradeneededäº‹ä»¶ä¸­ï¼Œè€Œupgradeneededäº‹ä»¶åªä¼šåœ¨ç‰ˆæœ¬å·æ›´æ–°çš„æ—¶å€™è§¦å‘ï¼Œè¿™æ˜¯å› ä¸ºIndexedDB APIä¸­ä¸å…è®¸æ•°æ®åº“ä¸­çš„æ•°æ®ä»“åº“åœ¨åŒä¸€ç‰ˆæœ¬ä¸­å‘é€å˜åŒ–\n\n```javascript\n// changing objectStore data is done here, as opposed to a transaction enum:\nrequest.onupgradeneeded = function ({ target: { result } }) {\n  console.log('æ•°æ®åº“å‡çº§', result)\n  db = result\n  let objStore\n  // Node.contains()è¿”å›çš„æ˜¯ä¸€ä¸ªbooleanï¼Œæ¥è¡¨ç¤ºä¼ å…¥çš„èŠ‚ç‚¹æ˜¯å¦ä¸ºè¯¥èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹ã€‚\n  // åˆ¤æ–­æ˜¯å¦æœ‰personå¯¹è±¡ä»“åº“ è‹¥æ²¡æœ‰åˆ™æ–°å»ºä¸€ä¸ªå¯¹è±¡ä»“åº“(å³æ–°å»ºè¡¨)\n  if (!db.objectStoreNames.contains('person')) {\n    /**\n     * æ–°å»ºpersonè¡¨ ä¸»é”®(key)æ˜¯é»˜è®¤å»ºç«‹çš„ç´¢å¼•ï¼Œæ¯”å¦‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨idåšä¸ºä¸»é”®\n     * @param name: string\n     * @param optionalParameters?: IDBIndexParameters\n     * keyPath\n     * autoIncrement\n    */\n     objStore = db.createObjectStore('person', { keyPath: 'id' })\n    /**\n     * åˆ›å»ºç´¢å¼• ç”¨äºå¿«é€Ÿæ£€ç´¢\n     * @param name: string\n     * @param keyPath: string | string[]\n     * @param optionalParameters?: IDBIndexParameters\n    */\n    objStore.createIndex('nameIndex', 'name', { unique: false })\n  }\n}\n```\n\nç°åœ¨ï¼Œæ•°æ®åº“å’Œè¡¨æˆ‘ä»¬éƒ½æœ‰äº†ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯æ“ä½œè¡¨ï¼Œä¹Ÿå°±æ˜¯å¢ã€åˆ ã€æ”¹ã€æŸ¥æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡äº‹åŠ¡æ¥æ“ä½œ\n\n>ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡é€šå¸¸åŒ…å«äº†ä¸€ä¸ªåºåˆ—çš„å¯¹æ•°æ®åº“çš„è¯»/å†™æ“ä½œã€‚å®ƒçš„å­˜åœ¨åŒ…å«äº†ä¸¤ä¸ªä»¥ä¸Šç›®çš„\n>1ã€ä¸ºæ•°æ®åº“æ“ä½œåºåˆ—æä¾›äº†ä¸€ä¸ªä»å¤±è´¥ä¸­æ¢å¤åˆ°æ­£å¸¸çŠ¶æ€çš„æ–¹æ³•ï¼ŒåŒæ—¶æä¾›äº†æ•°æ®åº“å³ä½¿åœ¨å¼‚å¸¸çŠ¶æ€ä¸‹ä»ç„¶ä¿æŒä¸€è‡´æ€§çš„æ–¹æ³•\n>2ã€å½“å¤šä¸ªåº”ç”¨ç¨‹åºåœ¨å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œå¯ä»¥åœ¨è¿™äº›åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¸€ä¸ªéš”ç¦»æ–¹æ³•ï¼Œä»¥é˜²æ­¢å½¼æ­¤çš„æ“ä½œç›¸äº’å¹²æ‰°\n\n1. å¢\n\n   æ–°å¢æ•°æ®ï¼Œé¦–å…ˆéœ€è¦æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œæ–°å»ºæ—¶å¿…é¡»æŒ‡å®šè¡¨æ ¼åç§°å’Œæ“ä½œæ¨¡å¼ï¼ˆ\"åªè¯»\"æˆ–\"è¯»å†™\"ï¼‰\n\n   ```javascript\n   function add() {\n     let content = db.transaction(['person'], 'readwrite')\n     \t.objectStore('person')\n     \t.add({ id: 1, name: 'å¼ ä¸‰', age: 24, email: 'zhangsan@example.com' });\n   \n     content.onsuccess = (event) => {\n       console.log('æ•°æ®å†™å…¥æˆåŠŸ')\n     }\n   \n     content.onerror = (event) => {\n       console.log('æ•°æ®å†™å…¥å¤±è´¥')\n     }\n   }\n   ```\n\n   æ­¤æ—¶ä¸€æ¡æ•°æ®å·²ç»æ–°å¢æˆåŠŸæˆ‘ä»¬å¯ä»¥æ‰“å¼€Chrome DevToolsï¼Œå…³äºæ•°æ®å­˜å‚¨å¯ä»¥æ‰“å¼€Applicationå†Storageä¸­æ‰¾åˆ°IndexDB\n\n2. åˆ \n\n   ```javascript\n   function remove() {\n     const request = db.transaction(['person'], 'readwrite')\n       .objectStore('person')\n       .delete(1)\n   \n     request.onsuccess = (event) => {\n       console.log('æ•°æ®åˆ é™¤æˆåŠŸ')\n     }\n   \n     request.onerror = (event) => {\n       console.log('æ•°æ®åˆ é™¤å¤±è´¥')\n     }\n   }\n   ```\n\n   \n\n3. æ”¹\n\n   ```javascript\n   function update () {\n     const request = db.transaction(['person'], 'readwrite')\n       .objectStore('person')\n       .put({ id: 1, name: 'æå››', age: 35, email: 'lisi@example.com' })\n   \n     request.onsuccess = (event) => {\n       console.log('æ•°æ®æ›´æ–°æˆåŠŸ')\n     }\n   \n     request.onerror = (event) => {\n       console.log('æ•°æ®æ›´æ–°å¤±è´¥')\n     }\n   }\n   ```\n\n   \n\n4. æŸ¥\n\n   ```javascript\n   function search () {\n     // æ–°å»ºæŸ¥è¯¢äº‹åŠ¡\n     const request = db.transaction(['person'])\n       .objectStore('person')\n   \t\t// æŸ¥è¯¢ä¸»é”®æ˜¯1çš„  \n       .get(1)\n     \t// é€šè¿‡ç´¢å¼•æŸ¥\n     \t// .index('name')\n       // .get('æå››')\n   \n     request.onsuccess = (event) => {\n       if (request.result) {\n         console.log('data===', request.result)\n       } else {\n         console.log('æœªè·å¾—æ•°æ®è®°å½•')\n       }\n     }\n     \n     request.onerror = (event) => {\n       console.log('äº‹åŠ¡å¤±è´¥')\n     }\n   }\n   ```\n\n##### äº”ã€ç®€å•å°è£…ä½¿ç”¨\n\n```javascript\nclass IndexDBDemo {\n  db = null\n\n  constructor(name, storeOpt = {}, key = null, indexOpt = {}) {\n    if (!this.db) {\n      this.init(name, storeOpt, key, indexOpt)\n    }\n    return this.db\n  }\n\n\t// åˆå§‹åŒ–\n  init (name, storeOpt = {}, key = null, indexOpt = {}) {\n    console.log('init')\n    const request = indexedDB.open(name)\n\n    return new Promise((res, reject) => {\n      request.onsuccess = () => {\n        this.db = request.result\n      }\n  \n      request.onupgradeneeded = function ({ target: { result } }) {\n        this.db = result\n        if (!this.db.objectStoreNames.contains(name)) {\n          const req = this.db.createObjectStore(name, storeOpt)\n          if (key) {\n            req.createIndex(key, key, indexOpt)\n          }\n        }\n        res()\n      }\n\n      request.onerror = (error) => {\n        reject(error)\n      }\n    })\n  }\n\n  add (name, data) {\n    return new Promise((result, reject) => {\n      const request = this.db.transaction([name], 'readwrite')\n        .objectStore(name)\n        .add(data)\n\n      request.onsuccess = (event) => {\n        result(event)\n      }\n\n      request.onerror = (error) => {\n        reject(error)\n      }\n    })\n  }\n\n  remove(name, key) {\n    return new Promise((result, reject) => {\n      const request = this.db.transaction([name], 'readwrite')\n        .objectStore(name)\n        .delete(key)\n\n      request.onsuccess = (event) => {\n        result(event)\n      }\n\n      request.onerror = (error) => {\n        reject(error)\n      }\n    })\n  }\n\n  update (name, data) {\n    return new Promise((result, reject) => {\n      const request = this.db.transaction([name], 'readwrite')\n        .objectStore(name)\n        .put(data)\n\n      request.onsuccess = (event) => {\n        result(event)\n      }\n\n      request.onerror = (error) => {\n        reject(error)\n      }\n    })\n  }\n\n  search (name, index) {\n    return new Promise((result, reject) => {\n      const request = this.db.transaction([name])\n        .objectStore(name)\n        .get(index)\n\n      request.onsuccess = (event) => {\n        if (request.result) {\n          result(request.result)\n        } else {\n          console.log('no data')\n          reject()\n        }\n      }\n\n      request.onerror = (error) => {\n        console.log('äº‹åŠ¡å¤±è´¥')\n        reject(error)\n      }\n    })\n  }\n\n  searchIndex(name, key, index) {\n    return new Promise((result, reject) => {\n      const request = this.db.transaction([name])\n        .objectStore(name)\n        .index(key)\n        .get(index)\n\n      request.onsuccess = (event) => {\n        if (request.result) {\n          result(request.result)\n        } else {\n          console.log('no data')\n          reject()\n        }\n      }\n\n      request.onerror = (error) => {\n        reject(error)\n      }\n    })\n  }\n}\n\n// ä½¿ç”¨\nthis.db = new IndexDBDemo(name, { keyPath: 'id', autoIncrement: true }, 'name', { unique: false })\nthis.db.add(name, obj).then().catch()\nthis.db.remove(name, key).then().catch()\nthis.db.update(name, obj).then().catch()\nthis.db.search(name, key).then().catch()\nthis.db.searchIndex(name, 'ç´¢å¼•', 'ç´¢å¼•å€¼').then().catch()\n\n```\n\n\n\n##### å…­ã€æµè§ˆå™¨å…¼å®¹\n\næ›´å¤šé«˜çº§ç”¨æ³•å‚è€ƒ[Web API](https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API#Browser_compatibility) \n\nåŠŸèƒ½å†å¼ºå¤§ï¼Œä¸å…¼å®¹ä¹Ÿä¸è¡Œï¼Œä¸‹é¢æ˜¯æµè§ˆå™¨å…¼å®¹å›¾ï¼Œæ•°æ®æ¥æº [can i use](https://caniuse.com/#search=IndexDB)\n\n![æµè§ˆå™¨å…¼å®¹æƒ…å†µ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221109134.png)","tags":["javascript","cookie","indexedDB","localStorage","sessionStorage"],"categories":["js"]},{"title":"Typescript+verdaccio+pm2æ„å»ºç§æœ‰å·¥å…·åŒ…","url":"/2020/04/14/npm/Typescript+verdaccio/","content":"### å‰è¨€\n1. é¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°æŸäº›æ–¹æ³•ï¼Œæ¯”å¦‚æ ¼å¼åŒ–æ—¶é—´æˆ³ï¼Œæ¯”å¦‚åˆ¤æ–­ç¯å¢ƒç­‰ç­‰ã€‚  \nç¬”è€…æœ€åˆæ˜¯æŠŠè¿™äº›æ–¹æ³•æŠ½ç¦»å‡ºæ¥å†™æˆå…¬å…±æ–¹æ³•ï¼Œä½†ç”±äºåæœŸé¡¹ç›®æ‰©å±•æ¯æ¬¡éƒ½è¦å¤åˆ¶è¿™ä¸ªå·¥å…·æ–‡ä»¶å¾ˆæ˜¯éº»çƒ¦ä¸”æ•ˆç‡ä½ä¸‹ï¼Œå‘å¸ƒnpmåŒ…æ­£å¥½è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼Œæ­£å¥½å€Ÿæ­¤æœºä¼šé‡æ„æˆtsæ–‡ä»¶å¹¶å‘å¸ƒnpmåŒ…ã€‚  \n\n2. æœ¬å·¥å…·å†…ç½®`vue2.x + ts`ï¼Œæ–¹ä¾¿å¼€å‘ä¸­è°ƒè¯•ä»£ç ã€‚  \næœ¬å·¥å…·åŒ…å†…éƒ¨é›†æˆäº†`lodash`çš„ä¸€äº›æ–¹æ³•ï¼Œè¯¦è§[æ–‡æ¡£](https://bestjarvan.github.io/utils-tools/docs/interfaces/lodashtool.html)æˆ–è€…`src/core/lodash-tool`  \n\n3. æœ¬å·¥å…·ä½¿ç”¨`typedoc`æ ¹æ®æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ï¼Œå¯æœç´¢æ–¹æ³•\n\n4. æœ¬é¡¹ç›®npmåŒ…å•å…ƒæµ‹è¯•é€šè¿‡ç‡100%ï¼ŒåŒæ—¶ç»è¿‡å…¬å¸å¤šä¸ªé¡¹ç›®æ²‰æ·€ï¼Œä¸”ç¨³å®šè¿è¡Œï¼Œå¤§å®¶å¦‚æœ‰éœ€è¦å¯ç›´æ¥ä¸‹è½½æ‹“å±•ä½¿ç”¨\n\n[åšå®¢ä¼ é€é—¨](https://bestjarvan.gitee.io/2020/04/14/npm/Typescript+verdaccio/index.html)\n\næœ¬æ–‡åªç®€è¦ä»‹ç»ä¸‹æ•´ä¸ªæµç¨‹ï¼Œå…·ä½“é¡¹ç›®[GitHub](https://github.com/BestJarvan/utils-tools)ï¼Œæ¬¢è¿Startã€Forkã€‚thx~   XD\n\n<!-- more -->\n\n### ç®€è¦\n\n- å·¥å…·\n- é¡¹ç›®æ¶æ„\n- åˆå§‹åŒ–\n- å•å…ƒæµ‹è¯•\n- æ–‡æ¡£è¾“å‡º\n- æ‰“åŒ…\n- å‘å¸ƒ\n\n### å·¥å…·\n- [TypeScript](https://www.tslang.cn/)\n- [Typedoc](http://typedoc.org/)\n- [Vue 2.x](https://cn.vuejs.org/)\n- [Rollup](https://www.rollupjs.com/) + [gulp](https://www.gulpjs.com.cn/)\n- [jest](https://jestjs.io/)\n- [pm2](https://pm2.keymetrics.io/) + [verdaccio](https://verdaccio.org/)\n- [Lodash](https://www.lodashjs.com/)\n\n### æ’ä»¶\n> æœ¬å·¥å…·åŒ…ä½¿ç”¨ä¸‹åˆ—æ’ä»¶è§„èŒƒå¼€å‘ï¼Œå®šåˆ¶å›¢é˜Ÿå¼€å‘è§„èŒƒ\n- eslint\n- tslint\n- prettier\n- commitlint\n- husky\n\n### é¡¹ç›®æ¶æ„\n\n```çº¯æ–‡æœ¬\n.\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ docs // typedocç”Ÿæˆçš„æ–‡æ¡£\nâ”‚Â Â  â”œâ”€â”€ assets\nâ”‚Â Â  â”œâ”€â”€ globals.html\nâ”‚Â Â  â”œâ”€â”€ index.html\nâ”‚Â Â  â””â”€â”€ interfaces\nâ”œâ”€â”€ gulpfile.js // gulp+rollupé…ç½®æ–‡ä»¶\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ public // vueç›¸å…³\nâ”œâ”€â”€ home // vueè°ƒè¯•é¡µé¢\nâ”œâ”€â”€ src // ä»£ç æ¨¡å—\nâ”‚Â Â  â”œâ”€â”€ core // æ ¸å¿ƒä»£ç å—\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ env.ts\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ ***.ts\nâ”‚Â Â  â”œâ”€â”€ index.ts // å…¥å£æ–‡ä»¶\nâ”‚Â Â  â”œâ”€â”€ tools\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts\nâ”‚Â Â  â””â”€â”€ types // å£°æ˜æ–‡ä»¶\nâ”‚Â Â      â””â”€â”€ index.ts\nâ”œâ”€â”€ test // å•å…ƒæµ‹è¯•\nâ”‚Â Â  â”œâ”€â”€ core // æ ¸å¿ƒä»£ç å•å…ƒæµ‹è¯•\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ env.spec.ts\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ ***.spec.ts\nâ”‚Â Â  â””â”€â”€ index.spec.ts\nâ”œâ”€â”€ tsconfig.json // tsé…ç½®\nâ”œâ”€â”€ tslint.json // tslinté…ç½®\nâ”œâ”€â”€ .prettierrc // prettieré…ç½®\nâ”œâ”€â”€ .lintstagedrc // lintstageé…ç½®\nâ””â”€â”€ typedoc.json // typedocé…ç½®\n```\n\n\n### åˆå§‹åŒ–\n\n1. `npm init`åˆå§‹åŒ–é¡¹ç›®\n2. å®‰è£…ä¾èµ–`npm i -D gulp del typescript`\n3. å®‰è£…[rollup](https://www.rollupjs.com/guide/tools#gulp)ä¾èµ–`npm i -D rollup rollup-plugin-node-resolve rollup-plugin-commonjs rollup-plugin-typescript2 rollup-plugin-uglify rollup-plugin-sourcemaps rollup-plugin-json`\n4. å®‰è£…è¾…åŠ©æ’ä»¶`npm i -D typedoc jest @types/jest ts-jest`\n5. åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªsrcæ–‡ä»¶ï¼Œç¼–å†™å…¬å…±æ–‡ä»¶\n6. éœ€è¦ä¸€ä¸ªtypesæ–‡ä»¶å¤¹å­˜æ”¾å£°æ˜æ–‡ä»¶(ç”¨äºä»£ç æç¤º)\n7. æ‰€æœ‰æ–‡ä»¶éƒ½éœ€è¦é€šè¿‡src/index.ts å¯¹å¤–æŠ›å‡º\n\n```çº¯æ–‡æœ¬\n// gulpfile.js\nconst gulp = require('gulp')\nconst del = require('del')\nconst rollup = require('rollup')\nconst json = require('rollup-plugin-json')\nconst commonjs = require('rollup-plugin-commonjs')\nconst resolve = require('rollup-plugin-node-resolve')\nconst sourceMaps = require('rollup-plugin-sourcemaps')\nconst typescript = require('rollup-plugin-typescript2')\nconst uglify = require('rollup-plugin-uglify').uglify\nconst pkg = require('./package.json')\n\n// åˆ é™¤æ‰“åŒ…åçš„æ–‡ä»¶ ç›®çš„ä¸ºäº†æ¯æ¬¡æ‰“åŒ…å‡ºæ¥çš„ç»“æœæ›´å¹²å‡€ï¼Œé¿å…æŸäº›æ–‡ä»¶æ²¡è¢«åˆ é™¤ç­‰åŸå› æŠ›é”™\nfunction task_clean (done) {\n  del.sync('dist')\n  del.sync('docs')\n  done()\n}\n\nasync function task_ts () {\n  const bundle = await rollup.rollup({\n    input: 'src/index.ts',\n    plugins: [\n      json(),\n      // Compile TypeScript files\n      typescript({ useTsconfigDeclarationDir: true }),\n      // Allow bundling cjs modules (unlike webpack, rollup doesn't understand cjs)\n      commonjs(),\n      // Allow node_modules resolution, so you can use 'external' to control\n      // which external modules to include in the bundle\n      // https://github.com/rollup/rollup-plugin-node-resolve#usage\n      resolve(),\n  \n      // Resolve source maps to the original source\n      sourceMaps(),\n      uglify(),\n    ]\n  });\n\n  await bundle.write({\n    file: pkg.main,\n    format: 'umd',\n    name: pkg.name,\n    sourcemap: false\n  })\n}\n\ngulp.task('default',\n  gulp.parallel(\n    task_clean,\n    task_ts\n  )\n)\n```\n\n\n### å•å…ƒæµ‹è¯•\n\né…ç½®ä»£ç é€šè¿‡ç‡æœ€ä½æ ‡å‡†\nä¾‹å¦‚æˆ‘é…ç½®çš„ å¿…é¡»å…¨éƒ¨åˆ†æ”¯ã€æ–¹æ³•ã€ä»£ç è¡Œæ•°é€šè¿‡ç‡è¾¾åˆ°90%æ‰ç®—æµ‹è¯•é€šè¿‡\n\n```çº¯æ–‡æœ¬\n  coverageThreshold: {\n    global: {\n      branches: 90,\n      functions: 90,\n      lines: 90,\n      statements: -5\n    }\n  }\n```\n\n\n`jest --coverage // ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡`<br />\n\n![æµ‹è¯•ç»“æœ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509157.png)\n\n\n### æ–‡æ¡£è¾“å‡º\n\n1. é…ç½®typedoc\n\n```çº¯æ–‡æœ¬\n// package.json  scriptsç‰‡æ®µ\n{\n  \"build\": \"npm run lint && gulp && typedoc\",\n}\n// tslint\n// gulp ä¼šè‡ªåŠ¨è¯†åˆ«æ ¹ç›®å½•ä¸‹gulpfile.jsé…ç½®æ–‡ä»¶\n// typedoc è‡ªåŠ¨è¯†åˆ«æ ¹ç›®å½•ä¸‹typedoc.jsoné…ç½®æ–‡ä»¶\n// å‚è€ƒé¡¹ç›®ç»“æ„\n```\n\n\n1. buildåå°±å¯ä»¥æäº¤åˆ°gitæœåŠ¡å™¨ï¼Œæ¯”å¦‚æˆ‘ç”¨çš„giteeä½¿ç”¨gitee pagesï¼ˆé™æ€é¡µé¢æ‰˜ç®¡ï¼Œå…å»è‡ªå·±ç”³è¯·åŸŸåã€æœåŠ¡å™¨ã€è™šæ‹Ÿä¸»æœºç­‰ï¼Œgithubæœ‰github pagesç­‰ï¼‰\n2. gitee pagesç®€å•çš„è®¾ç½®ä¸‹å…¥å£æ–‡ä»¶(æ¯”å¦‚docs/index.html)å°±ä¼šç”Ÿäº§å¯¹åº”çš„åœ¨çº¿æ–‡æ¡£é“¾æ¥\n3. ä½¿ç”¨ git hooksæ­é… lint-staged åœ¨æäº¤æ—¶å…ˆå»æ ¼å¼åŒ–æš‚å­˜åŒºä»£ç ï¼Œä¿æŒä»£ç å¹²å‡€ä¹‹åpushä»£ç \n\n![gitee pages](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509630.png)\n\n\n### æ‰“åŒ…\n\nä½¿ç”¨rollupé…åˆgulpæ‰“åŒ…ç¼–è¯‘\n\n1. gulpé…ç½®ä¸­ä½¿ç”¨delåˆ é™¤distæ–‡ä»¶ï¼Œé¿å…å…¶ä»–æ„å¤–é—®é¢˜\n2. ä½¿ç”¨rollupç¼–è¯‘tsæ–‡ä»¶\n3. ç¼–è¯‘åä¼šä¿ç•™å£°æ˜æ–‡ä»¶ï¼Œåœ¨package.jsonä¸­typingså­—æ®µå†™å…¥æ±‡æ€»çš„å£°æ˜æ–‡ä»¶åœ°å€ï¼Œç”¨äºä»£ç æç¤º\n4. ä¸‘åŒ–å‹ç¼©jsæ–‡ä»¶\n5. è¾“å‡ºåˆ°package.jsonå®šä¹‰çš„å…¥å£æ–‡ä»¶dist/index.js\n\n### å‘å¸ƒ\n\nä¸€ã€å‘å¸ƒåˆ°npmå¸‚åœº\n\n1. éœ€è¦å…ˆåœ¨terminalç™»å½•npm\n2. æ‰‹åŠ¨ä¿®æ”¹package.jsonçš„version(åæœŸè„šæœ¬è‡ªåŠ¨æ›´æ–°)ï¼Œnpm publishï¼ŒæˆåŠŸåä¼šå¾—åˆ°ä¸€ä¸ªç‰ˆæœ¬ä¿¡æ¯\n\n```çº¯æ–‡æœ¬\n+ @jarvannnn/utils@0.0.1\n```\n\n\n1. npm i --save @jarvannnn/utils å°±å¯ä»¥é¡¹ç›®ä¸­ä½¿ç”¨äº†\n\näºŒã€ä½¿ç”¨verdaccioæ­å»ºnpmç§æœï¼Œå¹¶ä½¿ç”¨pm2å®ˆæŠ¤è¿›ç¨‹\n\n1. `npm install -g verdaccio pm2`å…¨å±€å®‰è£…verdaccioä»¥åŠpm2[^pm2]\n2. terminalç›´æ¥è¾“å…¥verdaccio \nå³å¯ç«‹å³è¿è¡Œï¼Œé»˜è®¤æŠ›å‡ºç«¯å£ä¸º4873ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`pm2 start verdaccio`æŒ‡ä»¤ä½¿å…¶è¿è¡Œåˆ°åå°\n3. ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡`localhost:4873`è®¿é—®npmç§æœ^localhost\n4. å‘å¸ƒåˆ°verdaccioå¹³å° é¦–å…ˆéœ€è¦åœ¨terminalä¸­è¾“å…¥`npm adduser --registry http://localhost:4873`æ³¨å†Œç”¨æˆ·ï¼Œè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ç­‰ä¿¡æ¯æ³¨å†Œ\n5. `npm publish --registry http://localhost:4873` å‘å¸ƒä»£ç åŒ…\n\ntips: å¦‚æœè·Ÿæˆ‘ä¸€æ ·ä¸å–œæ¬¢æ¯æ¬¡å‘å¸ƒéƒ½è¦è¾“å…¥--registryï¼Œé‚£ä¹ˆå¯ä»¥å€ŸåŠ©nrm[^nrm]é•œåƒæºç®¡ç†å·¥å…·æ¥ç®¡ç†æœ¬åœ°æº\n\n### é¡¹ç›®ä¸­ä½¿ç”¨\n\n![ä»£ç æç¤º](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509895.png)\n\n![ä»£ç æç¤º](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509773.png)\n\n[^pm2]:  * `pm2 start verdaccio` å¯åŠ¨verdaccio<br />* `pm2 stop verdaccio(all) ` åœæ‰verdaccio(æˆ–å…¨éƒ¨)<br />* `pm2 delete verdaccio` åˆ é™¤verdaccio<br />* `pm2 show verdaccio` æ˜¾ç¤ºverdaccioè¿è¡Œæ—¥å¿—\n\n[^nrm]: * `nrm add mynpm http://localhost:4873` æ·»åŠ æœ¬åœ°æº<br />* `nrm use mynpm` åˆ‡æ¢æœ¬åœ°æº<br />* `nrm ls` æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰æº\n\n","tags":["typescript","jest","npm","verdaccio","rollup","pm2","typedoc"],"categories":["npm"]},{"title":"npmç§æœ‰å¹³å°å‘å¸ƒæµç¨‹","url":"/2019/12/15/npm/npm-publish/","content":"### ä¸€ã€æºç®¡ç†å·¥å…·nrm\n\n1. å…¨å±€å®‰è£…`npm i -g nrm`\n2. æ·»åŠ é€é‚¦æº`nrm add xbb http://npm.xbongbong.com.cn/`\n3. é€‰æ‹©æº`nrm use xbb`\n4. æ·»åŠ ç”¨æˆ·åˆ°æˆ‘ä»¬çš„æº`npm adduser`ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥`username`,`password`,`email`å‚æ•°\n<!-- more -->\nå¤‡æ³¨ï¼šè‹¥ä¸ä½¿ç”¨nrmæºç®¡ç†å·¥å…·ï¼Œåˆ™æ¯é¡¹npmå‘½ä»¤éƒ½éœ€è¦åŠ å…¥\n\n`--registry http://npm.xbongbong.com.cn/`\n\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221046249.png)\n\n### äºŒã€å‘å¸ƒnpmåŒ…\n\n1. è¿›å…¥åˆ°é¡¹ç›®ï¼Œä¾‹å¦‚xbb-utilsï¼Œ`cd ./xbb-utils`\n2. ç™»å½•åˆšåˆšæ³¨å†Œçš„ç”¨æˆ·`npm login`ï¼Œè·Ÿç€æ“ä½œ\n3. æ£€æŸ¥æ˜¯å¦ç™»å½•æˆåŠŸ`npm whoami`ï¼Œå¦‚æœè¾“å‡ºåˆšåˆšç™»å½•çš„ç”¨æˆ·åï¼Œè¯´æ˜ç™»å½•æˆåŠŸäº†\n4. å‘å¸ƒåˆ°ç§æœ‰å¹³å°`npm publish`\n5. å¦‚æœå‘å¸ƒçš„åŒ…æœ‰é—®é¢˜ï¼Œæ’¤é”€å‘å¸ƒ`npm unpublish`\n\ntipsï¼š~ * ^ å’Œæ— å‰ç¼€çš„åŒºåˆ«\n\n- ~ ä¼šåŒ¹é…æœ€è¿‘çš„å°ç‰ˆæœ¬ä¾èµ–åŒ…ï¼Œæ¯”å¦‚~1.2.3ä¼šåŒ¹é…æ‰€æœ‰1.2.xç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬1.3.0\n- ^ ä¼šåŒ¹é…æœ€æ–°çš„å¤§ç‰ˆæœ¬ä¾èµ–åŒ…ï¼Œæ¯”å¦‚^1.2.3ä¼šåŒ¹é…æ‰€æœ‰1.x.xçš„åŒ…ï¼ŒåŒ…æ‹¬1.3.0ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬2.0.0\n- * è¿™æ„å‘³ç€å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ä¾èµ–åŒ…\n- ä¸å†™å‰ç¼€â€”â€”é”ç‰ˆæœ¬ï¼Œæ¯”å¦‚1.2.3åªä¼šä¸‹è½½1.2.3ç‰ˆæœ¬ä»£ç ï¼Œè‹¥æ²¡æœ‰å¯¹åº”ç‰ˆæœ¬åˆ™ä¼šä¸‹è½½å¤±è´¥\n\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047766.png)\n\n### ä¸‰ã€ç§æœ‰å¹³å°\n\næˆ‘ä»¬å¯ä»¥æ‰“å¼€æµè§ˆå™¨è¾“å…¥[http://npm.xbongbong.com.cn](http://npm.xbongbong.com.cn)ï¼ŒæŸ¥çœ‹æˆ‘ä»¬åˆšåˆšå‘å¸ƒçš„åŒ…ã€‚\n\nç§æœ‰å¹³å°å·²é…ç½®ä¸Šæ¸¸æºï¼Œæ·˜å®æºå’Œnpmå®˜æ–¹æºï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼Œæ‰¾ä¸åˆ°çš„åŒ…ä¼šç°åœ¨æ·˜å®æºæ‰¾ï¼Œæ²¡æ‰¾åˆ°å†å»å®˜æ–¹æºæ‰¾ã€‚\n\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202112221047705.png)\n\n","tags":["npm","nrm"],"categories":["npm"]},{"title":"é€šè¿‡shellè„šæœ¬è‡ªåŠ¨ç”Ÿæˆvueæ–‡ä»¶","url":"/2019/08/10/vue/shell-vue/","content":"æœ€è¿‘åœ¨å†™nuxté¡¹ç›®æ—¶å€™æ¯æ¬¡æ–°å»ºé¡µé¢éƒ½è¦å»æ–°å»ºç„¶åå¼•å…¥å„ç§éœ€è¦çš„ä¾èµ–å¾ˆæ˜¯éº»çƒ¦ï¼Œæ‰€ä»¥æƒ³å†™ä¸€ä¸ªè„šæœ¬è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ çœå»æ‰‹åŠ¨æ–°å»º\nç°å†™ä¸‹å®ç°æ–¹æ³• ç»™å¤§å®¶å‚è€ƒ\n<!-- more -->\n>Macä¸‹å¯ç›´æ¥è¿è¡Œ \n>Windowsä¸‹éœ€è¦å®‰è£…Cygwinç±»è½¯ä»¶ä¸”é…ç½®ç¯å¢ƒå˜é‡åè¿è¡Œ\n\n#ä½¿ç”¨æ–¹æ³•\n1. éœ€è¦ä¿®æ”¹package.json çš„scrpts åŠ ä¸€æ¡create æˆ–è€…è‡ªå®šä¹‰åå­— ä¸»è¦æ˜¯ä¸ºäº†æˆ‘ä»¬åœ¨terminalä¸­è¾“å…¥æŒ‡ä»¤åè¿è¡Œå¯¹åº”çš„è„šæœ¬\n\n![package.json](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171443157.png)\n\n2. åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªtemplateæ–‡ä»¶å¤¹æ”¾è‡ªå·±çš„æ¨¡æ¿æ–‡ä»¶\n   æ–‡ä»¶å†…å®¹æ ¹æ®é¡¹ç›®éœ€è¦è‡ªè¡Œä¿®æ”¹\n\n![æ¨¡æ¿](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171443159.png)\n\n3. ä¹‹ååœ¨buildæ–‡ä»¶å¤¹ä¸‹æ–°å»º create.sh è„šæœ¬æ–‡ä»¶ (ä»£ç åœ¨ä¸‹é¢)\n\n4. ä¹‹ååœ¨terminalä¸­è¾“å…¥ npm run create æŒ‡ä»¤ è¿™ä¸ªæŒ‡ä»¤æ”¯æŒ åé¢æºå¸¦ä¸€ä¸ªä¸å¿…ä¼ å‚æ•°ä½œä¸ºæ–‡ä»¶å (npm run create xxxx)  æˆ–è€…ç›´æ¥è¾“å…¥npm run create\n\n![æ•ˆæœ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171444961.gif)\n\næ–‡ä»¶åä¸èƒ½é‡å¤ å¦‚æœé‡å¤ä¸ä¼šè¦†ç›–åŸæœ‰æ–‡ä»¶ åªä¼šè¾“å‡ºé”™è¯¯\n![åç§°é‡å¤](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171444987.gif)\n\n5. ç”Ÿæˆåçš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å†…å®¹\n![ç”Ÿæˆåçš„æ–‡ä»¶](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171444727.png)\n\n#create.sh è„šæœ¬æ–‡ä»¶\nä¿®æ”¹```COMPONENT_PATH``` å’Œ ```PAGE_PATH ``` è·¯å¾„æ”¹å˜ä¸ºè‡ªå·±çœŸå®æ¨¡æ¿è·¯å¾„\nè¿è¡Œè¯¥è„šæœ¬å\nç»„ä»¶ä¼šåœ¨```components```æ–‡ä»¶å¤¹ä¸‹æ–°å»ºç»„ä»¶\né¡µé¢ä¼šåœ¨```pages``` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºé¡µé¢\n```Shell\n#!/usr/bin/env sh\ncreate () {\n  if [[ $REPLY =~ ^[Yy]$ ]]\n    then\n      PATH_DIR=\"./components/$NAME\"\n    else\n      PATH_DIR=\"./pages/$NAME\"\n    fi\n\n  if [ ! -d \"$PATH_DIR\" ]\n  then\n    mkdir $PATH_DIR\n    if [[ $PATH_DIR =~ \"components\" ]]\n    then\n      CLASS_NAME=\"component-$NAME\"\n      cp $COMPONENT_PATH \"$PATH_DIR/index.vue\"\n    else\n      CLASS_NAME=\"page-$NAME\"\n      cp $PAGE_PATH \"$PATH_DIR/index.vue\"\n    fi\n    sed -i \"\" \"s/class-name/$CLASS_NAME/\" \"$PATH_DIR/index.vue\"\n    echo -e \"\\nç”Ÿæˆå®Œæˆ \\n... \\n\"\n  else\n    echo -e \"\\nå·²å­˜åœ¨æ–‡ä»¶å¤¹ \\n$PATH_DIR\"\n  fi\n}\n\nset -e\necho \"å¼€å§‹ç”Ÿæˆä»£ç ...\"\nCOMPONENT_PATH=\"./template/component.vue\"\nPAGE_PATH=\"./template/page.vue\"\nif [[ -n $1 ]]\nthen\n  NAME=$1\n  read -p \"è¯·é—®ä»£ç  $NAME - æ˜¯å¦æ˜¯ç»„ä»¶ ? (y/n)\" -n 1 -r\nelse\n  echo \"æœªå‘ç°åç§°, è¯·è¾“å…¥åç§°ï¼Ÿ\"\n  read NAME\n  read -p \"è¯·é—®ä»£ç  $NAME - æ˜¯å¦æ˜¯ç»„ä»¶ ? (y/n)\" -n 1 -r\nfi\n  create\n```\n\n\n##æ¨¡æ¿ç»„ä»¶å‚è€ƒ\n```\n<template>\n  <div class=\"class-\">\n    component\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  data() {\n    return {}\n  },\n  methods: {\n    init() {}\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/common/scss/var.scss';\n@import '@/common/scss/mixin.scss';\n\n.class- {\n}\n</style>\n\n```\n##æ¨¡æ¿é¡µé¢å‚è€ƒ\n```\n<template>\n  <div class=\"class-\">\n    page\n  </div>\n</template>\n\n<script>\nimport { baseMixin } from '@/common/mixins/index'\n\nexport default {\n  mixins: [baseMixin],\n  data() {\n    return {}\n  },\n  async asyncData({ $axios }) {},\n  head() {\n    return {\n      title: ''\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {}\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/common/scss/var.scss';\n@import '@/common/scss/mixin.scss';\n\n.class- {\n}\n</style>\n```","tags":["shell","vue"],"categories":["vue"]},{"title":"ionic2æ‹–æ‹½å…ƒç´ ","url":"/2018/06/20/ionic2/ionic2-jq/","content":"å…ˆçœ‹æ•ˆæœå›¾\n![æ‹–æ‹½å…ƒç´ ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171507697.gif)\n<!-- more -->\n1ã€è¿™é‡Œç”¨åˆ°äº†jq æ‰€ä»¥ç¬¬ä¸€æ­¥æˆ‘ä»¬åœ¨index ä¸­å¼•å…¥ ä¸¤ä¸ªå¿…é¡»çš„jq\n```\n  <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\n  <script type=\"text/javascript\" src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\n```\n\n2ã€ç¬¬äºŒæ­¥ æˆ‘ä»¬éœ€è¦åœ¨typings.d.tsä¸­å£°æ˜ $ å’Œ jQuery è¿™æ ·æ‰èƒ½åœ¨tsä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•\n```\ndeclare var $: any;\ndeclare var jQuery: any;\n```\n\n3ã€æ¥ç€æˆ‘ä»¬éœ€è¦ å¼•å…¥ touchPunch.ts è¿™ä¸ªæ–‡ä»¶ è¿™æ˜¯jqçš„è§¦æ‘¸æ’ä»¶ jqå°è£…å¥½çš„å¯ä»¥ç›´æ¥ç”¨ ï¼Œä¸‹è½½ä¹‹åæ”¾åˆ°æŸä¸ªæ–‡ä»¶å¤¹ä¸‹\nä¸‹è½½åœ°å€ï¼šhttps://gitee.com/bestjarvan/public/blob/master/mini-program-components/drag/touchPunch.ts\n\n4ã€æ”¾å¥½å æˆ‘ä»¬å¼•å…¥app.module.ts ä¸­ åœ¨providersä¸­å£°æ˜\n```\nproviders:[\n    TouchPunchProvider\n]\n```\n\n5ã€åœ¨htmlå…ƒç´ ä¸­ ç»™éœ€è¦æ‹–æ‹½çš„å…ƒç´ ä¸€ä¸ªid ä¹‹ååœ¨tsä¸­åˆå§‹åŒ–ä¸€ä¸‹æˆ‘ä»¬çš„jqæ’ä»¶ å°±å¯ä»¥äº†\n```\n// å‚è€ƒ\n// html\n<ion-fab style=\"width: 5rem;height: 5rem;\" middle right #barrage id=\"barrage\">\n  <div ion-fab style=\"display: none\"></div>\n  <img src=\"./assets/images/picdetail_service.png\">\n</ion-fab>\n\n//ts\nconstructor(public touchIt:TouchPunchProvider){}\n\nionViewDidLoad() {\n  this.touchIt.init();\n  $('#barrage').draggable();\n}\n```\nå®Œç»“","tags":["ionic2","angular","jquery"],"categories":["ionic2"]},{"title":"æ˜Ÿæ˜Ÿè¯„ä»·å°ç¨‹åºã€ç½‘é¡µé€šç”¨","url":"/2018/06/14/wechat/wx-star/","content":"å…ˆçœ‹æ•ˆæœå›¾\n![æ•ˆæœå›¾](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171507056.gif)\n<!-- more -->\nåŸç†æ˜¯éœ€è¦ä¸¤å¼ å›¾ç‰‡ ä¸€å¼ é€‰ä¸­çš„é»„è‰²ï¼Œä¸€å¼ æœªé€‰ä¸­çš„ç°è‰²\n![é€‰ä¸­](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171508974.png)\n\n![æœªé€‰ä¸­](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171508245.png)\n\n1ã€å¾ªç¯imageæ ‡ç­¾äº”æ¬¡\n2ã€ç»‘å®šç‚¹å‡»äº‹ä»¶\n3ã€è·å–ç‚¹å‡»ä¸‹æ ‡ï¼Œå¹¶èµ‹å€¼ç»™scoreå˜é‡ \n4ã€ä¸‰ç›®è¿ç®—åˆ¤æ–­scoreå˜é‡äºindex çš„å…³ç³» åŠ¨æ€æ›´æ”¹å›¾ç‰‡è·¯å¾„\n5ã€æ­¤æ–¹æ³•ç½‘é¡µä¹Ÿå¯ç”¨ é€šç”¨\n```\n//wxml\n<image class=\"start\" \n        wx:for=\"{{5}}\" \n        data-index=\"{{index}}\"\n        bindtap='selectIndexNum' \n        src=\"{{score >= index ? '/utils/img/big_star_s@3x.png' : '/utils/img/big_star_n@3x.png'}}\"\n/>\n\n//æ™®é€šç‰ˆæœ¬ js\nselectIndexNum(e){\n  this.setData({\n    score: +e.currentTarget.dataset.index\n  })\n},\n```\næˆ–è€…å¢å¼ºç‰ˆæ•ˆæœ\n```\n//ç‚¹ä¸¤æ¬¡ç›¸åŒåˆ†æ•°å–æ¶ˆé€‰æ‹© js\nselectIndexNum(e){\n  const i = +e.currentTarget.dataset.index;\n  this.setData({\n    score: i === this.data.score ? -1 : i\n  })\n},\n```","tags":["wechat"],"categories":["wechat"]},{"title":"è®°å½•ä¸‹å°ç¨‹åºé¡¹ç›®ä¸­çš„ä¸€äº›é—®é¢˜","url":"/2018/06/08/wechat/wx-problem/","content":"é¡¹ç›®ä¸­é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸å®šæœŸæ›´æ–°ï¼Œå¤šå­—é¢„è­¦ã€‚\n\n1ã€å¯Œæ–‡æœ¬å±•ç¤º   textæœ‰ä¸€ä¸ªdecodeå¯ä»¥è§£ætextareaä¸­çš„æ¢è¡Œç¬¦ ç­‰ç¬¦å· å®ç°ç®€å•å¯Œæ–‡æœ¬å±•ç¤º å¹¶ä¸”å±‚çº§ä¸ä¼šåœ¨æœ€é«˜çº§ã€å¯æ§åˆ¶\n![image.png](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420624.png)\n<!-- more -->\n2ã€wx.setStorageSync å¾®ä¿¡åŒæ­¥ä¿å­˜ç¼“å­˜ è°ƒç”¨è¿‡å¤šå¯èƒ½ä¼šæŠ¥é”™ æœ¬åœ°ä¿å­˜10MBä»¥å†… å¦‚æœæ•°æ®è¿‡å¤§  åœ¨å°‘æ•°æ‰‹æœºä¸Šä¼šä¿å­˜è¶…æ—¶ è§£å†³åŠæ³• è¿‡å¤§çš„æ•°æ®ä¸ä¿å­˜åœ¨æœ¬åœ° ç”¨çš„æ—¶å€™ç›´æ¥è·å–ç½‘ç»œè¯·æ±‚æˆ–è€…æœ¬åœ°è¯·æ±‚ (é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªä¸¤å¹´å‰çš„åä¸ºæ‰‹æœºï¼Œæ•°æ®é‡è¾ƒå¤§æ—¶ä¼šè¶…æ—¶æŠ¥é”™) ä½¿ç”¨syncæ¨ètrycatchåŒ…è£¹ã€å®é™…é¡¹ç›®ä¸­æŸäº›æ‰‹æœºä¼šæŠ¥é”™ æ¨èç”¨å¼‚æ­¥æ–¹æ³• wx.setStorage({})\n\n3ã€å…³äºé¡µé¢æ•°æ®äº¤äº’ ä¸¤ç§è§£å†³åŠæ³•\n>ä¸€ç§æ˜¯ä½¿ç”¨å†…ç½®æ–¹æ³•getCurrentPageè·å–å°ç¨‹åºè·¯ç”±å †æ ˆ[^router]è·å–åˆ°éœ€è¦æ“ä½œçš„è·¯ç”±é¡µæ“ä½œå¯¹åº”çš„æ–¹æ³•å˜é‡ç­‰ï¼Œç¼ºç‚¹å°±æ˜¯ä¸€å•å¤¸å¤šä¸ªè·¯ç”±æˆ–å¤æ‚åœºæ™¯æ— æ³•ç»´æŠ¤ä»£ç å¯è¯»æ€§ï¼Œæ¨èç¬¬äºŒç§\n\n>ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨è®¢é˜…å‘å¸ƒè€…æ¨¡å¼ã€æ–°å»ºä¸€ä¸ªjsç”¨äºå¤„ç†å‘å¸ƒè®¢é˜…é€»è¾‘æˆ–è€…ä½¿ç”¨npm[^publish]\n\n4ã€å°ç¨‹åºç½‘ç»œè¯·æ±‚å¯ä»¥å°è£…åœ¨å¤–éƒ¨æ–‡ä»¶é‡Œ ä½¿ç”¨promiseäºŒæ¬¡å°è£… æé«˜å¼€å‘æ•ˆç‡ã€ä»£ç å¯è¯»æ€§ï¼Œäº¦å¯ç»Ÿä¸€å¤„ç†headerã€requestå’Œresponse\n\n5ã€setData({}) æ–¹æ³•æ˜¯å¼‚æ­¥çš„  åŒä¸€æ–¹æ³•å†…å°½é‡å°‘è°ƒç”¨ ä¼šå†²çªå¯¼è‡´æŸä¸ªsetdataæ–¹æ³•æ²¡æ‰§è¡Œ åˆ‡å›å¯¼è‡´å…ƒç´ é‡ç»˜æ¶ˆè€—æ€§èƒ½ è§£å†³åŠæ³• å°½é‡è°ƒç”¨ä¸€æ¬¡ è¶Šå°‘è¶Šå¥½\n\n6ã€å¦‚æœwebviewæ“ä½œéœ€è¦åˆ·æ–°è‡ªèº«çš„è¯ å¯ä»¥urlåé¢åŠ æ—¶é—´æˆ³ é˜²æ­¢å› æµè§ˆå™¨ç¼“å­˜æ²¡æœ‰åˆ·æ–°\n\n7ã€å°ç¨‹åºæ— æ³•åŠ¨æ€æ›´æ”¹tabs  æ‰€æœ‰çš„tabséƒ½æ˜¯åœ¨app.jsonä¸­é…ç½®å¥½çš„ åˆ‡æœ€å¤šæ”¯æŒäº”ä¸ª å¦‚æœå°ç¨‹åºè¦å®ç°ç±»ä¼¼ç”¨æˆ·å’Œç®¡ç†è€…åŒæ—¶æ‰“å¼€ä¸€ä¸ªå°ç¨‹åºè€Œå±•ç¤ºä¸åŒçš„é¡µé¢ä¿¡æ¯çš„è¯ æœ‰ä¸¤ç§æ–¹æ¡ˆ \n\n    ä¸€ç§æ˜¯ è‡ªåˆ¶å‡çš„tabs æ³¨å…¥åˆ°éœ€è¦ç”¨åˆ°çš„é¡µé¢ ä½“éªŒä¸å¦‚åŸç”Ÿå®Œç¾æœ‰ç‘•ç–µ\n    \n    ç¬¬äºŒç§ å»ºç«‹ä¸€ä¸ªindexå…¥å£é¡µé¢ åœ¨å…¥å£æ–‡ä»¶ä¸­è¿›è¡Œæƒé™çš„é€»è¾‘åˆ¤æ–­ è®¾ç½®ä¸€ä¸ªå˜é‡ä¿å­˜åœ¨æœ¬åœ° ä¹‹åè¿›å…¥é¦–é¡µåè¿›è¡Œåˆ¤æ–­ åœ¨onloadä¸­è®¾ç½®éœ€è¦å±•ç¤ºçš„tabåå­—å›¾æ ‡ç­‰ä¿¡æ¯\n```\nwx.setTabBarItem({\n    index: 0, //ä¸‹æ ‡æ”¹å˜çš„\n    text: \"tabåå­—\",\n    iconPath: \"/utils/icon/æœªé€‰ä¸­\",\n    selectedIconPath: \"/utils/icon/é€‰æ‹©\"\n});\n```\n\n8ã€æ‰‹æœºç«¯å’Œç”µè„‘ç«¯ é€šè¿‡è·å–æ—¶é—´æˆ³çš„æ–¹æ³•å¾—åˆ°ç»“æœä¸ä¸€æ ·  ç”µè„‘ç«¯å¾—åˆ°æ—¶é—´æ­£å¸¸ æ‰‹æœºç«¯ è·å–æ—¶é—´æˆ³ ä¸ºäº†å…¼å®¹iOS éœ€è¦å†™æˆ \"2018-06-01T00:00:00\"è¿™ç§å®Œæ•´æ ¼å¼ å¾—åˆ°çš„æ—¶é—´æˆ³ éœ€è¦å‡å»8å°æ—¶ æ‰æ˜¯æ­£ç¡®çš„æ—¶é—´æˆ³ æ³¨æ„æœˆå’Œæ—¥ä¸è¶³ä¸¤ä½ã€ä¿æŒä¸¤ä½ \n\nnew Date(\"2018-06-01T00:00:00\") / 1000 - 28800\n\n9ã€éƒ¨åˆ†å®‰å“æœº å›¾ç‰‡åœ°å€ä¸èƒ½æœ‰ç©ºæ ¼ ä¸ç„¶ä¼šè¯†åˆ«ä¸å‡ºæ¥ æ¯”å¦‚ aa bb.png éœ€å†™æˆaa_bb.png\n\n10ã€ç»„ä»¶componentså¯ä»¥ä½¿ç”¨å¾®ä¿¡æä¾›çš„behaviorsæ–¹æ³•å®ç°ç±»ä¼¼vueçš„mixinsæ··å…¥ã€é¡µé¢pageå¯ä»¥æ‰‹åŠ¨å®ç°mixinsï¼Œåœ¨å¾®ä¿¡Page(options)å®ä¾‹åŒ–pageä¹‹å‰å…ˆå¤„ç†ä¸€æ¬¡optionsé¡µé¢æ•°æ®ï¼Œåˆ¤æ–­æœ‰mixinså°±æŠŠéœ€è¦æ³¨å…¥çš„å…¬å…±æ–¹æ³•çš„æ‰€æœ‰æ–¹æ³•æ‰“æ•£åˆ°optionsé‡Œé¢ è‹¥æœ‰é‡å¤çš„è¿›è¡Œè¦†ç›–åˆå¹¶\n\n11ã€é¡¹ç›®å¦‚æœç”¨åˆ°ç¬¬ä¸‰æ–¹æ¡†æ¶é‚£ä¹ˆå¤æ‚çš„å°è£…å¯ä»¥ä½¿ç”¨webpackã€gulpç­‰æ¨¡å—æ‰“åŒ…å¼€å‘å·¥å…·è‡ªå®šä¹‰å¼€å‘å¯ä»¥æ›´åŠ å¥‘åˆè‡ªèº«é¡¹ç›®çš„ä¸šåŠ¡åœºæ™¯ã€æŒ‰éœ€å¼•å…¥ scss ã€ npmã€ å›¾ç‰‡å‹ç¼©ç­‰æé«˜å¼€å‘æ•ˆç‡ã€ç¼©å°ä»£ç ä½“ç§¯æ¯•ç«Ÿå°ç¨‹åºæœ‰ä¸»ä½“åŒ…2m åˆ†åŒ…æ€»å¤§å°8mçš„é™åˆ¶\n\n12ã€ä¸€äº›ç‰¹æ®Šç»„ä»¶ä¾‹å¦‚å¼¹çª—ç­‰å¯ä»¥å‚è€ƒvue çš„å‡½æ•°å¼ç»„ä»¶ï¼Œé€šè¿‡å°ç¨‹çš„selectComponentæ–¹æ³•å®ç°æ’å…¥ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹ç•™ä¸€ä¸ªé”šç‚¹å…ƒç´ æ‰€æœ‰å‚æ•°æ–¹æ³•éƒ½åœ¨jsä½¿ç”¨ä¸­æ³¨å…¥\n![image.png](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420368.png)\n\n[^router]: å°ç¨‹åºè·¯ç”±å †æ ˆæœ€å¤šåªæœ‰10æ¡ è¶…å‡ºæ›¿æ¢æ•°ç»„æœ€å‰é¢çš„\n[^publish]: Vueé¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨å‘å¸ƒè®¢é˜…ç€æ¨¡å¼é¡µå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç©ºçš„vueå®ä¾‹ï¼Œé€šè¿‡vueå†…ç½®æ–¹æ³•\\$onã€\\$emitã€\\$offç­‰ä¹Ÿå¯å®ç° åŸç†ç›¸åŒ","tags":["wechat"],"categories":["wechat"]},{"title":"å¾®ä¿¡å°ç¨‹åº-A-Zæ’åºåŸå¸‚æ•°æ®","url":"/2018/03/24/wechat/wx-A-Z/","content":"å› ä¸ºå°ç¨‹åºé¡¹ç›®éœ€è¦åŸå¸‚åˆ—è¡¨é€‰æ‹©ï¼Œ ä¹‹ååœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›æ•°æ®ä½†æ˜¯å¹¶ä¸åˆé€‚ï¼Œæ‰€ä»¥ä»ä¸€äº›åœ°å›¾æ•°æ®ä¸­æå‡ºæ¥äº†ä¸€å¥—æ’åºåçš„æ•°æ®ç”¨ã€‚\n\nå°ç¨‹åºç”¨scroll-view å†…ç½®è·³è½¬åŠ¨ç”» å®ç°èµ·æ¥è¿˜æ˜¯æŒºç®€å•çš„ï¼›\n<!-- more -->\n![ç¬¬ä¸€ç§](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171421692.png)\n\nå¾ªç¯å¯¹è±¡å±•ç¤ºæ•°æ®  å¯ä»¥ç›´æ¥ä½¿ç”¨éƒ½æ˜¯å¤„ç†å¥½çš„\n\n>ä¸‹è½½åœ°å€ï¼š\n>é“¾æ¥: https://pan.baidu.com/s/11eU7nVAaO5RR9ksPYIpOIQ \n>å¯†ç : tnrv\n\n***\nä¹‹åç”¨nodeæŠŠæ ¼å¼åˆæ”¹äº†ä¸€è¾¹ï¼Œå‰ç«¯å¾ªç¯å¥½å¾ªç¯ä¸€ç‚¹ ï¼Œä¸¤ç§æ ¼å¼  éƒ½å¯ä»¥ç”¨\n\n![ç¬¬äºŒç§](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171421368.png)\n\nå¥½ä¹…ä¸ç”¨nodeå†™ä¸œè¥¿ï¼Œå¿½ç„¶è¿˜æœ‰ç‚¹ä¸é€‚åº”...\n\n>ä¸‹è½½åœ°å€ï¼š\n>é“¾æ¥: https://pan.baidu.com/s/1QPqoLF1UOy7zSQHBMowMLg \n>å¯†ç : hrjg\n\n***\néšæ‰‹å†™äº†ä¸ªåŸç”Ÿjs çš„ demo ï¼ŒåŠ¨ç”»æ²¡æ—¶é—´å†™å°†å°±å‚è€ƒä¸‹\n![demo](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171421829.gif)","tags":["wechat"],"categories":["wechat"]},{"title":"å¾®ä¿¡å°ç¨‹åº-çœå¸‚å¿ä¸‰çº§è”åŠ¨ç»„ä»¶city-picker","url":"/2018/03/24/wechat/wx-city-picker/","content":"\n2018å¹´11æœˆ6æ—¥æ›´æ–°\n![æ–°ç‰ˆæ•ˆæœ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171421576.gif)\n\n## ä¿®æ”¹ï¼š\n  1. æ–°å¢åŠé€æ˜maskèƒŒæ™¯\n  2. åŸå¸‚æ•°æ®å­˜æ”¾æœ¬åœ° å¤§å°400kb+æœ‰éœ€è¦å¯ä»¥æ”¾è‡ªå·±æœåŠ¡å™¨æˆ–è€…è¯·æ±‚é«˜å¾·åœ°å›¾api\n  3. ä¿®æ”¹æ ·å¼\n  4. ä¿®æ”¹æ•´ä½“å­—ä½“å¤§å°\n<!-- more -->\nç äº‘ï¼šhttps://gitee.com/bestjarvan/public.git\n\n***\n2018å¹´3æœˆ24æ—¥\nè¿›ä¸€æ­¥å°è£…picker-view  ä½¿ç”¨é«˜å¾·åœ°å›¾åŸå¸‚æ•°æ® éœ€è¦è”ç½‘æˆ–è€…è‡ªè¡Œä¸‹è½½åˆ°æœ¬åœ°\n\nå…ˆçœ‹æ•ˆæœï¼š\n![2.gif](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171444152.gif)\n\n\n\nç”¨æ³•ï¼š\n\n1ã€æŠŠç»„ä»¶æ”¾åˆ°å°ç¨‹åºçš„æ ¹ç›®å½•ä¸‹\n2ã€åœ¨app.js ä¸­ è¯·æ±‚é«˜å¾·åœ°å›¾åŸå¸‚æ•°æ®\n>2018å¹´11æœˆ6æ—¥æ›´æ–°  å¯æ ¹æ®æƒ…å†µæ·»åŠ æˆ–è€…ä¸æ·»åŠ åŸå¸‚æ•°æ®è¯·æ±‚ã€ é»˜è®¤ä¸æ·»åŠ  åŸå¸‚æ•°æ®å·²æ”¾åœ¨æœ¬åœ°\n```\n//åˆ¤æ–­æœ¬åœ°æ˜¯å¦æœ‰æ•°æ® æ²¡æœ‰ å°±è¯·æ±‚\nonLaunch:() => {\n  if (!wx.getStorageSync('citys')) {\n      wx.request({\n        url: \"http://restapi.amap.com/v3/config/district?&subdistrict=3&key=ä½ çš„é«˜å¾·key\",\n        method: \"GET\",\n        success: function (res) {\n          console.log(res['data']['districts'][0]['districts']);\n          //  è¯·æ±‚åˆ°æ•°æ® å­˜åœ¨æœ¬åœ°\n          wx.setStorageSync('citys', res['data']['districts'][0]['districts']);\n        }\n      })\n    }\n}\n```\n3ã€åœ¨éœ€è¦ç”¨çš„é¡µé¢jsonä¸­å†™ä¸‹ä¸‹åˆ—ä»£ç ï¼Œè·¯å¾„æ ¹æ®è‡ªå·±çš„çœŸå®è·¯å¾„ä¿®æ”¹\n```\n{\n  \"usingComponents\":{\n    \"city-picker\": \"../../../components/city-picker/city-picker\"\n  }\n}\n```\n4ã€åœ¨é¡µé¢ä¸­å¼•ç”¨ç»„ä»¶\n```\n//wxml\n//ç»‘å®šé€‰ä¸­äº‹ä»¶\n<city-picker bind:selected=\"selectCity\"></city-picker>\n\n//js\nselectCity: function(e){\n  console.log(e.detail);\n  //æ‰“å°å‡ºæ¥æ•ˆæœ{province: \"å¹¿è¥¿å£®æ—è‡ªæ²»åŒº\", city: \"åŒ—æµ·å¸‚\", county: \"åˆæµ¦å¿\"}\n}\n```","tags":["wechat"],"categories":["wechat"]},{"title":"å¾®ä¿¡å°ç¨‹åº-æ¨¡æ‹ŸiOSåˆ—è¡¨","url":"/2018/03/24/wechat/wx-iOS/","content":"æœ€è¿‘åˆšå†™å°ç¨‹åº å‘ç°å¾ˆå¤šå‘ ä¸è¿‡å…ˆå°è£…äº†ä¸€äº›ç®€å•çš„ç»„ä»¶ æ…¢æ…¢ç”¨\n\nç äº‘ï¼š[https://gitee.com/bestjarvan/public.git](https://gitee.com/bestjarvan/public.git)\n\nå…ˆçœ‹æ•ˆæœï¼š\n<!-- more -->\n![æœªç‚¹å‡»](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509394.png)\n\n![ç‚¹å‡»æ•ˆæœ](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171509070.png)\n\nç”¨æ³•ï¼š\n\n1ã€æŠŠç»„ä»¶æ”¾åˆ°å°ç¨‹åºçš„æ ¹ç›®å½•ä¸‹ \n2ã€åœ¨éœ€è¦ç”¨çš„é¡µé¢jsonä¸­å†™ä¸‹ä¸‹åˆ—ä»£ç ï¼Œè·¯å¾„æ ¹æ®è‡ªå·±çš„çœŸå®è·¯å¾„ä¿®æ”¹\n```\n{\n\n  \"usingComponents\":{\n\n    \"button-list\": \"/components/button-list/button-list\"\n\n  }\n\n}\n```\n3ã€åœ¨é¡µé¢ä¸­å¼•ç”¨ç»„ä»¶\n```\n//wxml\n    <button-list \n      bind:myevent=\"buttonClick\"  //ç»‘å®šç‚¹å‡»äº‹ä»¶\n      wx:for=\"{{listArr}}\"        //å¦‚æœåˆ—è¡¨å¤šçš„è¯ï¼Œå¯ä»¥å¾ªç¯å±•ç¤º\n      text=\"{{item.name}}\"        //æ˜¾ç¤ºçš„åˆ—è¡¨åå­—\n      img=\"{{item.img}}\"          //åå­—å‰çš„å›¾æ ‡ï¼Œè‹¥ä¸ä¼  é»˜è®¤éšè— åªæ˜¾ç¤ºæ–‡å­—\n      //hideRight=\"1\"             //hideRight æ˜¯å¦æ˜¾ç¤ºå³è¾¹çš„>å·  ä¼ ä»»æ„å€¼éšè—  \n    ></button-list> \n\n//js\n//å¦‚æœä½¿ç”¨å¾ªç¯\n    listArr:[\n      {\n        name:'æˆ‘çš„ä¼šå‘˜å¡',\n        img:'/utils/img/my_01@3x.png'\n      },\n      {\n        name:'è”ç³»å®¢æœ',\n        img:'/utils/img/my_02@3x.png'\n      }]\n\nbuttonClick:(e) => {\n    //ç‚¹å‡»äº‹ä»¶ç‚¹å‡»ä¹‹å e.detail.type == ä¼ å…¥ç»„ä»¶çš„textå€¼\n    console.log(e.detail.type);\n    switch (e.detail.type){\n      case 'æˆ‘çš„ä¼šå‘˜å¡':\n        //...\n        break;\n      //....\n}\n```","tags":["wechat"],"categories":["wechat"]},{"title":"ionic2æå…‰æ¨é€iOS","url":"/2017/08/08/ionic2/ionic2-jpush-iOS/","content":"é¦–å…ˆéœ€è¦ç”³è¯·æå…‰å¼€å‘è€…è´¦å· å¹¶ä¸”åˆ›å»ºä¸€ä¸ªappåº”ç”¨ï¼Œåˆ›å»ºä¹‹åéœ€è¦ä¸Šä¼ .p12æ ¼å¼çš„è¯ä¹¦ï¼Œæ‹¿åˆ°APP_KEY\n<!-- more -->\né€šè¿‡ Cordova Plugins å®‰è£…ï¼Œè¦æ±‚ Cordova CLI 5.0+ï¼š\n```\ncordova plugin add jpush-phonegap-plugin --variable APP_KEY=your_jpush_appkey\n```\nå®˜æ–¹ç»™çš„æ˜¯API_KEY æˆ‘è¿™é‡Œç”¨APP_KEYæˆåŠŸäº†ã€‚\n\nä¸‹ä¸€æ­¥å®‰è£…jpushåŒ…\n```\nnpm install ionic2-jpush --save\n```\n\nä¸Šé¢ä¸¤ä¸ªå®‰è£…æˆåŠŸåï¼Œåœ¨config.xmlä¸­æ›´æ”¹é…ç½®\n**æ³¨æ„widget çš„id è¦å’Œ æå…‰å¼€å‘ç€è´¦å·ä¸­çš„Bundle ID çš„å€¼ä¸€æ ·**\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442018.png)\n\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442487.png)\n\n\n\n![åœ¨package.jsonä¸­æŸ¥çœ‹é…ç½® \"APP_KEY\"å€¼å’Œæå…‰çš„APP_KEYä¸€æ ·å°±å¯ä»¥ã€‚](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442407.png)\n\n\n![ä¹‹åéœ€è¦åœ¨app.module.tsä¸­providerså¼•å…¥](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442702.png)\n\n\n```\nimport { JPushService } from 'ionic2-jpush';\n```\n![ä¸‹é¢å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨JPushäº†ï¼Œåœ¨éœ€è¦çš„é¡µé¢ä¸­å¼•å…¥](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442923.png)\n\n\n![åœ¨constructorä¸­æ„é€ ä¸€ä¸ªJPush](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171511974.png)\n\nä¸‹é¢å¯ä»¥æ­£å¸¸ä½¿ç”¨å®˜æ–¹æ–‡æ¡£ç»™çš„æ–¹æ³• \nä¹Ÿå¯ä»¥åœ¨æå…‰ä¸Šå‘é€æ¨é€äº†\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442696.png)\n\n\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442938.png)\n\nps: appæ¨é€è¿‡ä¹‹åä¼šæœ‰ä¸€ä¸ªè§’æ ‡1 æ‰“å¼€åº”ç”¨å1æ²¡æœ‰æ¶ˆå¤±ï¼Œåœ¨xcodeä¸­å‘ç°æ³¨æ‰äº†ä¸¤ä¸ªæ–¹æ³•\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171443706.png)\n\n\n","tags":["ionic2","angular","jpush"],"categories":["ionic2"]},{"title":"ionic2+cordovaæ’ä»¶å®ç°ç¬¬ä¸‰æ–¹ç™»å½•","url":"/2017/07/25/ionic2/ionic2+cordova/","content":"#### 1.é¦–å…ˆå’Œæ‰€æœ‰çš„éƒ½ä¸€æ ·ï¼Œè¦åˆ†åˆ«åˆ°å„ä¸ªå¼€æ”¾å¹³å°ç”³è¯·appidï¼Œæ·»åŠ æµ‹è¯•è´¦å·\n\nQQï¼šè…¾è®¯å¼€æ”¾å¹³å° http://open.qq.com/\nå¾®ä¿¡ï¼šå¾®ä¿¡å¼€æ”¾å¹³å° https://open.weixin.qq.com/\nå¾®åšï¼šæ–°æµªå¾®åšå¼€æ”¾å¹³å° http://open.weibo.com/\n<!-- more -->\n#### 2.é€šè¿‡cordovaæ·»åŠ æ’ä»¶\nQQ:\n\n```\ncordova plugin add cordova-plugin-qqsdk --variable QQ_APP_ID=YOUR_QQ_APPID\n```\nå¾®ä¿¡:\n```\ncordova plugin add cordova-plugin-wechat  --variable wechatappid=YOUR_WECHAT_APPID\n```\nå¾®åš:\n```\ncordova plugin add cordova-plugin-weibosdk --variable WEIBO_APP_ID=YOUR_WEIBO_APPID\n```\n\n#### 3.1å¾®åšéœ€è¦è¿›ä¸€æ­¥å»è®¾ç½®redirecturi\nåœ¨ä½ çš„config.xmlæ–‡ä»¶ä¸­æ·»åŠ \n ```<preference name=\"REDIRECTURI\" value=\"YOUR_WEIBO_REDIRECTURI\" />```\nå¿…é¡»è¦å’Œå¾®åšå¼€æ”¾å¹³å°é‡Œé¢çš„OAuth2.0 æˆæƒè®¾ç½®çš„ä¸€æ ·\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442895.png)\n\n#### 3.2 QQéœ€è¦è£…@ionic-native/qqsdk\n\n```\nnpm install @ionic-native/qqsdk --save\n```\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442379.png)\n\n#### 3.3 å¾®ä¿¡ã€å¾®åšéœ€è¦åœ¨ç¼–è¯‘æ–‡ä»¶ä¸­å£°æ˜å˜é‡\n\n```\ndeclare var Wechat:any;\ndeclare var WeiboSDK:any;\n```\nä¹‹åå°±èƒ½åœ¨éœ€è¦çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨Wechat.XXX æˆ–è€… WeiboSDK.XXXæ–¹æ³•\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442089.png)\n\n#### 4.ç¬¬ä¸‰æ–¹ç™»å½•ä»£ç \n\n  #####   4.1 QQç¬¬ä¸‰æ–¹ç™»å½•:\néœ€è¦å¼•å…¥QQSDKæ¨¡å—\n```\nimport { QQSDK,QQShareOptions } from '@ionic-native/qqsdk';\n\nconstructor(public qq:QQSDK);\n\nQQLogin(){\n    const loginOptions: QQShareOptions = {\n      client: this.qq.ClientType.QQ,\n    };\n    this.qq.ssoLogin(loginOptions)\n      .then((result) => {\n        console.log('shareNews success');\n        alert('token is ' + result.access_token);\n        alert('userid is ' + result.userid);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n}\n```\n\n##### 4.2 å¾®ä¿¡ã€å¾®åšç¬¬ä¸‰æ–¹ç™»å½•\n\n```\n  sinaLogin(){\n    WeiboSDK.ssoLogin(function (args) {\n      alert('access token is ' + args.access_token);\n      alert('userId is ' + args.userId);\n    }, function (failReason) {\n      alert(failReason);\n    });\n  }\n  wechatLogin(){\n    let scope = \"snsapi_userinfo\",\n      state = \"_\" + (+new Date());\n    Wechat.auth(scope, state, function (response) {\n      // you may use response.code to get the access token.\n      alert(JSON.stringify(response));\n    }, function (reason) {\n      alert(\"Failed: \" + reason);\n    });\n  }\n```\n**éœ€è¦æ³¨æ„ï¼š**\nå¾®ä¿¡éœ€è¦è®¤è¯æ‰èƒ½ä½¿ç”¨ï¼›\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171442953.png)\n\nå¾®åšï¼š\nå¦‚æœå¾®åšæŠ¥é”™redirect_uri_mismatch çš„è¯ è¯·çœ‹3.1 è®¾ç½®redirecturi\n\nå¦‚æœå¾®åšæŠ¥é”™sso package or sign error çš„è¯ éœ€è¦åœ¨ä½ çš„XCodeé‡Œé¢çš„Infoæ‰¾åˆ°Bundle identifierè¿™ä¸€é¡¹ï¼Œå¤åˆ¶ç²˜è´´åˆ°å¾®åšå¼€æ”¾å¹³å°ä½ çš„appä¸­çš„ bundle id ä¸­ ä¿æŒä¸¤è€…å€¼ä¸€è‡´\n\n#### 5.åˆ†äº«å’Œç™»å½•ç”¨æ³•ä¸€è‡´ã€å®‰è£…å¥½æ’ä»¶å‚è€ƒreadmeæ–‡æ¡£\n\n","tags":["ionic2","cordova","angular"],"categories":["ionic2"]},{"title":"node.jså®ç°ç®€å•çš„ç™»å½•æ³¨å†Œé¡µé¢","url":"/2017/07/25/node/node.js-login/","content":"é¦–å…ˆéœ€è¦æ–°å»ºå››ä¸ªæ–‡ä»¶\n\nä¸€ä¸ªæœåŠ¡å™¨js\nä¸€ä¸ªä¿å­˜æ•°æ®çš„txt (ä»£ç ä¼šè‡ªåŠ¨æ–°å»ºï¼Œæ‰‹åŠ¨æ–°å»ºä¹Ÿå¯)\nä¸€ä¸ªç™»é™†ã€ä¸€ä¸ªæ³¨å†Œé¡µé¢html\n<!-- more -->\ngiteeï¼šhttps://github.com/BestJarvan/user-register-nodejs-demo.git\n### 1.æ³¨å†Œé¡µé¢\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>register</title>\n</head>\n\n<body>\n\t<div>\n\t\t<label for=\"user\">ç”¨æˆ·å</label><input type=\"text\" id=\"user\">\n\t</div>\n\t<div>\n\t\t<label for=\"password\">å¯†ç </label><input type=\"password\" id=\"password\">\n\t</div>\n\t<div>\n\t\t<button id=\"register\">æ³¨å†Œ</button>\n\t</div>\n</body>\n<script src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"></script>\n<script>\n\t$(function () {\n\t\t$(\"#register\").click(function () {\n\t\t\t$.ajax({\n\t\t\t\turl: \"http://localhost:3000/register\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: {\n\t\t\t\t\tusername: $(\"#user\").val(),\n\t\t\t\t\tpassword: $(\"#password\").val()\n\t\t\t\t},\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\talert(res.msg);\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\t// TODO....\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t});\n</script>\n</html>\n```\n### 2.ç™»å½•é¡µé¢\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <title>login</title>\n</head>\n\n<body>\n  <div>\n    <label for=\"user\">ç”¨æˆ·å</label><input type=\"text\" id=\"user\">\n  </div>\n  <div>\n    <label for=\"password\">å¯†ç </label><input type=\"password\" id=\"password\">\n  </div>\n  <div>\n    <button id=\"login\">ç™»å½•</button>\n    <button id=\"register\"><a href=\"register.html\">æ³¨å†Œ</a></button>\n  </div>\n</body>\n<script src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"></script>\n<script>\n  $(function () {\n    $(\"#login\").click(function () {\n      if ($(\"#user\").val().length == 0) {\n        return alert(\"è¯·è¾“å…¥å†…å®¹!\");\n      }\n      if ($(\"#password\").val().length == 0) {\n        return alert(\"è¯·è¾“å…¥å¯†ç !\");\n      }\n\n      $.ajax({\n        url: \"http://localhost:3000/login\",\n        type: \"POST\",\n        data: {\n          username: $(\"#user\").val(),\n          password: $(\"#password\").val()\n        },\n        success: function (res) {\n          alert(res.msg)\n          if (res.code === 200) {\n            // TODO...\n          }\n        },\n        error: function (err) {\n          console.log(err);\n        }\n      })\n\n    })\n  });\n</script>\n</html>\n```\n### 3.æ­å»ºæœåŠ¡å™¨\n\n```\nvar http = require(\"http\");\nvar url = require(\"url\");\nvar qs = require(\"querystring\");\nvar fs = require(\"fs\");\n\n// è¯»å–æ–‡ä»¶\nfunction readFileFnc (cb, fail) {\n  fs.readFile(\"db.txt\", \"utf-8\", function (err, data) {\n    if (!err && data) {\n      console.log(\"æ–‡ä»¶ä¸­æœ‰æ•°æ®\");\n      cb(data)\n    } else {\n      console.log(\"è¯»å–æ–‡ä»¶å¤±è´¥\");\n      fail()\n    }\n  })\n}\n\nfunction registerUser (user, res, arr) {\n  //æ ¹æ®å‰ç«¯å‘æ¥çš„è·¯ç”±åœ°å€åˆ¤æ–­æ˜¯ç™»å½•è¿˜æ˜¯æ³¨å†Œé¡µé¢ï¼Œå¦‚æœæ˜¯æ³¨å†Œé¡µé¢\n  //åŒæ­¥å†™å…¥db.txtæ–‡ä»¶\n  var userList = arr || []\n  userList.push(user)\n  fs.writeFileSync(\"db.txt\", JSON.stringify(userList), \"utf-8\");\n  sendMsg(res, 'æ³¨å†ŒæˆåŠŸ!', 200)\n}\n\nfunction sendMsg (res, msg, code = 200) {\n  res.writeHead(200, { 'Content-Type': 'application/json' })\n  res.end(JSON.stringify({code, msg}))\n}\n\nhttp.createServer(function (req, res) {\n  //è®¾ç½®è¯·æ±‚å¤´\n  res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n  if (req.method == \"POST\") {\n    //æ¥æ”¶å‘æ¥çš„ç”¨æˆ·åå’Œå¯†ç \n    var result = \"\";\n    //è·å–å‰ç«¯ä»£ç å‘æ¥çš„è·¯ç”±åœ°å€\n    var pathName = url.parse(req.url).pathname;\n\n    req.addListener(\"data\", function (chunk) {\n      result += chunk;\n    });\n\n    req.on(\"end\", function () {\n      var user = qs.parse(result);\n      //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n      (!user.username || !user.password) && sendMsg(res, 'è¯·è¾“å…¥ç”¨æˆ·åæˆ–å¯†ç ', 103)\n      console.log(123123);\n      if (pathName === '/login') {\n        // ç™»å½•é¡µ\n        readFileFnc(\n          function (data) {\n            var arr = JSON.parse(data);\n            //éå†æ•´ä¸ªä¿å­˜æ•°æ®çš„æ•°ç»„  åˆ¤æ–­ç™»å½•æ³¨å†Œ\n            if (Array.isArray(arr)) {\n              const userInfo = arr.find(obj => obj.username == user.username)\n              if (userInfo) {\n                if (userInfo.password == user.password) {\n                  sendMsg(res, 'ç™»å½•æˆåŠŸï¼', 200)\n                } else {\n                  sendMsg(res, 'å¯†ç é”™è¯¯ï¼', 101)\n                }\n              } else {\n                sendMsg(res, 'è¯¥ç”¨æˆ·ä¸å­˜åœ¨', 102)\n              }\n            }\n          },\n          function () {\n            sendMsg(res, 'è¯¥ç”¨æˆ·ä¸å­˜åœ¨', 102)\n          }\n        )\n      } else if (pathName === '/register') {\n        // æ³¨å†Œé¡µ\n        console.log('zhuce')\n        readFileFnc(\n          function (data) {\n            var arr = JSON.parse(data);\n            //éå†æ•´ä¸ªä¿å­˜æ•°æ®çš„æ•°ç»„  åˆ¤æ–­ç™»å½•æ³¨å†Œ\n            if (Array.isArray(arr)) {\n              const userInfo = arr.find(obj => obj.username == user.username)\n              if (userInfo) {\n                sendMsg(res, 'è¯¥ç”¨æˆ·å·²å­˜åœ¨', 101)\n              } else {\n                registerUser(user, res, arr)\n              }\n            }\n          },\n          function () {\n            registerUser(user, res)\n          }\n        )\n      }\n    });\n  } else {\n    sendMsg(res, 'è¯·ä½¿ç”¨postè¯·æ±‚', 105)\n  }\n}).listen(3000, function (err) {\n  if (!err) {\n    console.log(\"æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œæ­£åœ¨ç›‘å¬port3000...\");\n  }\n});\n```\n### 4.åœ¨db.txtæ–‡ä»¶ä¸­å¯ä»¥æŸ¥çœ‹æ³¨å†Œä¿¡æ¯\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171411744.png)\n\n------end------","tags":["javascript","nodejs","html"],"categories":["node"]},{"title":"è™šæ‹Ÿä¸»æœºä¸ªäººç½‘ç«™å‘å¸ƒ","url":"/2017/07/25/js/è™šæ‹Ÿä¸»æœºä¸ªäººç½‘ç«™å‘å¸ƒ/","content":"1.è´­ä¹°åŸŸåä¹‹å‰å…ˆå»å·¥ä¿¡éƒ¨ç½‘ç«™æŸ¥çœ‹æƒ³è¦è´­ä¹°çš„åŸŸååç¼€èƒ½å¦å¤‡æ¡ˆ\nPS:åŸŸåç»‘å®šå›½å¤–æœåŠ¡å™¨æˆ–ä¸»æœºä¸éœ€è¦å¤‡æ¡ˆï¼Œå›½å†…éœ€è¦åˆ°å·¥ä¿¡éƒ¨å¤‡æ¡ˆã€‚\n<!-- more -->\n[ä¼ é€é—¨](http://www.miitbeian.gov.cn/publish/query/indexFirst.action)\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420554.png)\nè¿›å…¥ä¹‹ååœ¨ä¸‹å›¾åŸŸåç±»å‹åç§°ä¸­ è¾“å…¥æƒ³è¦è´­ä¹°çš„åç¼€ï¼Œä¹‹åæ¨¡ç³ŠæŸ¥è¯¢ èƒ½æŸ¥åˆ°å°±æ˜¯å¯ä»¥å¤‡æ¡ˆ ï¼ŒæŸ¥è¯¢ä¸åˆ°çš„ ç›®å‰æ— æ³•å¤‡æ¡ˆ\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420595.png)\n2ã€è´­ä¹°åŸŸåï¼Œè‡ªå·±å¯ä»¥å»ä¸‡ç½‘çœ‹ï¼Œä»·ä½ä¸ç­‰\n3ã€è´­ä¹°è™šæ‹Ÿä¸»æœº\nã€€ã€€ã€€ã€€å›½å†…æœ‰æŒºå¤šå…è´¹çš„è™šæ‹Ÿä¸»æœºï¼Œè¿™é‡Œç”¨çš„æ˜¯ä¸€ä¸ªæ²³å—æŸå®‰çš„å…è´¹ä¸»æœº\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420913.png)\næŸ¥çœ‹è¯¦æƒ…ä¹‹åç‚¹å‡» ç›´æ¥è´­ä¹° è„šæœ¬é»˜è®¤PHP  å¯ä»¥é€‰æ‹©ASP.NET\næœ€é«˜å¹´é™å¯ä»¥é€‰æ‹©äº”å¹´\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171420927.png)\nåˆ°äº†è¿™ä¸€æ­¥æ­å–œä½ å·²ç»æœ‰äº†è‡ªå·±ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œç‚¹å‡»ç®¡ç†å¯ä»¥æŸ¥çœ‹ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯\n\né€çš„ä¸»æœºæœ‰1Gçš„ç©ºé—´ å¹¶ä¸”æ²¡æœ‰è®¿é—®æµé‡æ˜¯20G å¦‚æœæ˜¯ä¸€èˆ¬çš„ä¸ªäººå°ç½‘ç«™å·²ç»è¶³å¤Ÿç”¨äº†\n\nå¯ä»¥ç”¨ftpå·¥å…·ç®¡ç†ä½ çš„ç©ºé—´ï¼Œæ‰€æœ‰çš„æ–‡ä»¶æ”¾åˆ°WEBæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸ªäººä¸»é¡µé»˜è®¤ä¼šæœç´¢WEBæ–‡ä»¶å¤¹ä¸‹æ ¹ç›®å½•ä¸­çš„indexæ–‡ä»¶(index.php , index.htmlç­‰)\næœ€åç»‘å®šåŸŸåä¹‹åå°±å¯ä»¥é€šè¿‡è‡ªå·±çš„åŸŸåè®¿é—®åˆ°è‡ªå·±WEBæ–‡ä»¶å¤¹ä¸‹çš„indexæ–‡ä»¶äº†\n\n\n4ã€åŸŸåå¤‡æ¡ˆ\n\nç»‘å®šåŸŸåä¹‹å‰éœ€è¦æŠŠåŸŸåå¤‡æ¡ˆï¼Œåœ¨å“ªé‡Œä¹°çš„ç©ºé—´å°±éœ€è¦å§”æ‰˜è´­ä¹°ç©ºé—´çš„å…¬å¸å¤‡æ¡ˆ\n\nå› ä¸ºç”¨çš„æ™¯å®‰çš„ æ‰€ä»¥è¿˜æ˜¯åœ¨æ™¯å®‰å¤‡æ¡ˆï¼Œæ‰¾åˆ°æ™¯å®‰ä¸»é¡µå¯¼èˆªæ ä¸Šæ–¹çš„  ç½‘ç«™å¤‡æ¡ˆ  è¿›å…¥ç½‘ç«™å¤‡æ¡ˆç³»ç»Ÿ\n\nç‚¹å‡»å¼€å§‹å¤‡æ¡ˆä¹‹åå¡«å†™è‡ªå·±çœŸå®ä¿¡æ¯ï¼Œæ ¹æ®ä¸ªåœ°å¸‚çš„ä¸åŒè¦æ±‚ ï¼Œéœ€è¦æä¾›ä¸åŒçš„ææ–™ï¼Œä¸»è¦ææ–™åŒ…æ‹¬\n\nèº«ä»½è¯æ­£åé¢ç…§ç‰‡\nå¤‡æ¡ˆäººåœ¨æ™¯å®‰å¹•å¸ƒå‰çš„ç…§ç‰‡\nä¸ªäººæ ¸æ£€å•å¡«å†™(æ ¸æ£€å•åœ¨å¤‡æ¡ˆç³»ç»Ÿé¦–é¡µä¸­å¯ä»¥æ‰¾åˆ°)\næ ¹æ®å½“åœ°ç‰¹æ®Šè¦æ±‚ï¼Œè‹¥æ²¡æœ‰ç‰¹åœ°è¦æ±‚ å‰ä¸‰ä¸ªå°±å¯ä»¥äº†\n å¤‡æ¡ˆæ—¶é—´ï¼šæ™¯å®‰å®¡æ ¸æ—¶é—´å¤§æ¦‚3å¤©å·¦å³ï¼Œä¹‹åæ™¯å®‰ä¼šæäº¤åˆ°å·¥ä¿¡éƒ¨å¤§æ¦‚20å¤©å·¦å³ä¼šå‘çŸ­æ¯æç¤ºå¤‡æ¡ˆé€šè¿‡\n\nä¹‹åè¿›è¡Œä¸‹ä¸€æ­¥\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171419774.png)\n\n5ã€ åŸŸåè§£æï¼Œç»‘å®šåŸŸå\nåœ¨æ™¯å®‰ä¸ªäººä¸­å¿ƒæ‰¾åˆ°å¹¶è¿›å…¥DNSPodè§£æ\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171419716.png)\nä¹‹åç‚¹å‡»æ·»åŠ åŸŸå ----->è¾“å…¥åŸŸååç¡®è®¤------>ç‚¹å‡»æ·»åŠ çš„åŸŸåå³è¾¹çš„åŸŸåç®¡ç†------>ç‚¹å‡»æ–°å¢è®°å½•\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171419705.png)\nç¬¬ä¸€é¡¹ä¸»æœºè®°å½•å¡«www \nè®°å½•ç±»å‹é€‰æ‹©ã€€ã€€CNAME\nè®°å½•å€¼å¡«å†™ä½ çš„æœåŠ¡å™¨çš„åŸŸåè§£æåˆ«åçš„å€¼\nTTLé»˜è®¤600 ä¸ç”¨ä¿®æ”¹\n![](https://gcore.jsdelivr.net/gh/BestJarvan/pic-imgs/imgs/202201171419707.png)\nä¸‹é¢åœ¨è´­ä¹°åŸŸåçš„åœ°æ–¹è¿›è¡ŒåŸŸåDNSè§£æ\næŠŠæ™¯å®‰çš„DNSå¡«å…¥ä¸¤ä¸ªç¡®å®šä¹‹å48å°æ—¶ä¹‹å†…ç”Ÿæ•ˆï¼Œå¿«ä¸€ç‚¹çš„å¤§æ¦‚30åˆ†é’Ÿå·¦å³\n\nä¸€æ—¦åŸŸåè§£ææˆåŠŸï¼Œå°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®ä½ çš„ä¸ªäººç½‘ç«™äº†\n\n-------end-------","categories":["js"]}]